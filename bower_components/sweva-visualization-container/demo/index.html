<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>sweva-visualization-container Demo</title>
  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../sweva-visualization-container.html">
  <style>
    html, body {
      height: calc(100% - 100px);
    }
  </style>
</head>
<body unresolved>
  <sweva-visualization-container room="swevavisualtest10"
                                 visualization-url-prefix="http://127.0.0.1:8081/components/"
                                 visualization-url-suffix=".html">
  </sweva-visualization-container>
  <script>
    var container = document.querySelector('sweva-visualization-container');

    var composition = {
      "type": "composition",
      "name": "composition1",
      "dataInNames": [],
      "dataInSchema": {},
      "dataOutNames": [
        "result"
      ],
      "dataOutSchema": {},
      "inputNames": [],
      "inputSchema": {},
      "mapDataIn": [
        "function (data, composableName, composables, libs) {",
        "if (data.hasOwnProperty(composableName)) {",
        "return libs.get(data, composableName);",
        "}",
        "return null;",
        "}"
      ],
      "mapDataOut": [
        "function (output, libs) {",
        "return output;",
        "}"
      ],
      "mapInput": [
        "function (input, moduleName, modules, libs) {",
        "if (input.hasOwnProperty(moduleName)) {",
        "return libs.get(input, moduleName);",
        "}",
        "return null;",
        "}"
      ],
      "composables": {
        "Node106": {
          "type": "module",
          "name": "code_frequency",
          "description": "A simple module template.",
          "dataInNames": [],
          "dataInSchema": {},
          "dataOutNames": [
            "code_frequency"
          ],
          "dataOutSchema": {},
          "inputNames": [
            "repository"
          ],
          "inputSchema": {},
          "request": [
            "function (data, input, libs) {",
            "",
            "var repo = 'LAS2peer';",
            "",
            "if(input.repository){",
            "repo = input.repository;",
            "}",
            "console.log(repo)",
            "return libs.axios.get('https://api.github.com/repos/rwth-acis/'+repo+'/stats/code_frequency');",
            "}    "
          ],
          "response": [
            "function (response, input, libs) {",
            "return { code_frequency:response.data }",
            "}"
          ]
        }
      },
      "links": {},
      "controls": [
        {
          "label": "Section1",
          "controls": []
        }
      ],
      "visualization": "sweva-visualization-raw/dist/sweva-visualization-raw"
    };

        
    container.addEventListener('initialized', function () { container.load(composition); }, false);

  </script>
</body>
</html>