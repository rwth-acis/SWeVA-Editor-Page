!function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";e("../../core/runners/runner.js");var n=e("../../core/compilers/compiler.js"),i=(e("../../../node_modules/as-bind/dist/as-bind.cjs.js"),e("../../core/composables/composable.js"),e("../../core/errors/ExecutionError.js"),e("../../core/errors/compileError.js"));e("../../core/errors/ExecutionError.js");const o=e("../offloading/offloadingDecision");if("undefined"==typeof Worker){console.log("Loading Node worker module");var s=e("../../../node_modules/web-worker/cjs/node")}function a(e){this.worker=null,this.internalGetterPrefix="_internal_get_",this.supportLibraryDeclares=this.generateSupportLibraryDeclares(e),this.supportLibraryDocumentation="The lib namespace contains all function from the support library.\nsynchronous functions return their result immediately, while the callback for asynchronous functions is called after all currently running AssemblyScript code is finished.\nCallback functions can have less parameters than the listed parameters, in which case only the first parameters are passed.\nFunctions:\n",this.resolveCompile=null}a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.generateSupportLibraryDeclares=function(e){let t="",r="namespace lib {\n";for(let n in e.functions){let i=e.functions[n].languageSpecific.typescript.returnSig||"void",o=e.functions[n].languageSpecific.typescript.parameterSig;e.functions[n].async&&(o="callback: string | null"+(void 0!==typeof o?", "+o:""),i="void"),t+=n+":\n  Description: "+e.functions[n].description+'\n  Parameters: "'+o+'"\n  '+(e.functions[n].async?'Async function: callback with signature "'+e.functions[n].languageSpecific.typescript.returnSig+'" required':'Sync function: returns "'+i+'"')+"\n",r+="export declare function "+n+"("+o+"):"+i+";\n"}return r+="}",this.supportLibraryDocumentation=t,console.log("Support functions:"),console.log(this.supportLibraryDocumentation),console.log(r),r},a.prototype.setup=async function(){var e=this;if(!this.setupCompleted)return new Promise((t=>{console.log("Loading AssemblyScript compiler"),this.initWorker(),this.worker.onmessage=function(r){switch(console.log("msg to worker"),console.log(r.data),r.data.type){case"setupComplete":console.log("setup complete"),e.setupCompleted=!0,t();break;case"compileError":case"compileResult":null!=e.resolveCompile&&e.resolveCompile(r.data)}}}))},a.prototype.initWorker=function(){void 0!==this.worker&&null!=this.worker&&this.worker.terminate(),sweva.inBrowser?(console.log("Load worker for webbrowser"),this.worker=new Worker("/node_modules/sweva-core/app/core/compilers/assemblyScriptCompilerWorker.js")):(console.log("Load worker for NodeJS"),this.worker=new s("app/core/compilers/assemblyScriptCompilerWorker.js"))},a.prototype.compile=async function(e){const t=this;for(;this.currentlyCompiling;)new Promise((e=>setTimeout(e,1)));this.currentlyCompiling=!0,await this.setup();let r,n=!1,s=!1,a=sweva.ExecutionManager.getODList();console.log("odList in ASC compiler = ",a);let l=0,c=0;if(s=await o(a),console.log("initial offloading decision = ",s),s)return"offloading";let u=performance.now();return await Promise.race([new Promise((async e=>{console.log("Begin periodic monitoring execution..."),r=setInterval((async()=>{l=performance.now(),c=(l-u)/5e3*100,c>a[0]&&(console.log("offloadingOutput$ Monitoring = CPU limit exceeded"),e("offloading")),s=await o(a),console.log("periodic offloading decision = ",s),s&&e("offloading")}),500)})),new Promise((r=>{this.resolveCompile=r,n=!0,this.worker.postMessage({type:"compile",source:t.prepareSourceCode(e.source)})}))]).then((t=>{let n=t;if(clearInterval(r),console.log("workerResult"),console.log(n),this.currentlyCompiling=!1,this.resolveCompile=null,"compileResult"===n.type)return console.log("offloadingOutput$ Offloading not needed. Proceed as normal"),n;if("offloading"===n)return this.initWorker(),console.log("offloadingOutput$ Offloading necessary. Callback triggered"),"offloading";throw new i(n.message,e.context)}))},a.prototype.prepareSourceCode=function(e){let t=this.generateGlobalGetters(e),r=e.join("\n");return this.supportLibraryDeclares+r+t},a.prototype.generateGlobalGetters=function(e){let t="";for(let r in e){if(e.includes(this.internalGetterPrefix))throw new i("Do not use "+this.internalGetterPrefix+" for names in your source, as it is reserved for internal use.","compileError");if(0===e[r].indexOf("export var")){let n=e[r].split("=")[0].split(":"),o="anyref";if(!(n.length>=2))throw new i('Exported variables require an explicit type! \n"'+e[r]+'" does not contain a type.',"compileError");o=n[1].split(/[\s=]+/).filter((e=>""!==e))[0],n=n[0].split(/[\s=]+/).filter((e=>""!==e));let s=n[n.length-1];t+="export function "+this.internalGetterPrefix+s+"():"+o+" { return "+s+"; }\n"}}return t},t.exports=a},{"../../../node_modules/as-bind/dist/as-bind.cjs.js":57,"../../../node_modules/web-worker/cjs/node":63,"../../core/compilers/compiler.js":2,"../../core/composables/composable.js":3,"../../core/errors/ExecutionError.js":7,"../../core/errors/compileError.js":8,"../../core/runners/runner.js":21,"../offloading/offloadingDecision":18}],2:[function(e,t,r){"use strict";function n(e){this.setupCompleted=!1,this.supportLibraryDocumentation=""}n.prototype.compile=function(e){return e},n.prototype.setup=async function(){this.setupCompleted||(this.setupCompleted=!0)},t.exports=n},{}],3:[function(e,t,r){"use strict";var n=e("../../core/errors/definitionError.js"),i=e("../../core/errors/ExecutionError.js"),o=e("../../../node_modules/clone/clone.js");function s(){}s.prototype.initialize=function(e){this.initializeProperty(e,"name","someComposable"),this.initializeProperty(e,"type","module"),this.initializeProperty(e,"dataInSchema",null),this.initializeProperty(e,"dataOutSchema",null),this.initializeProperty(e,"inputSchema",null),this.initializeProperty(e,"dataInNames",[]),this.initializeProperty(e,"dataOutNames",[]),this.initializeProperty(e,"inputNames",[]),this.dataIn=this.dataInNames.length,this.dataOut=this.dataOutNames.length,this.inputIn=this.inputNames.length,this.context=this.constructor.name+"["+this.name+"]"},s.prototype.initializeProperty=function(e,t,r){if(e.hasOwnProperty(t)){var n=e[t];if("object"==typeof n)if(Array.isArray(n)){if(0==n.length)return void(this[t]=r)}else if(0==Object.keys(n).length)return void(this[t]=r);this[t]=e[t]}else this[t]=r},s.prototype.initializeFunction=function(e,t,r,i){e.hasOwnProperty(t)?"function"==typeof e[t]?e[t].length>=r?this[t]=e[t]:sweva.ErrorManager.error(new n('function "'+t+'" requires at least '+r+" arguments, but provides only "+e[t].length,this.context,e[t])):null==e[t]||sweva.ErrorManager.error(new n('"'+t+'" is reserved for functions, but not defined as one',this.context,e[t])):this[t]=i},s.prototype.extendWith=function(e){var t=o(this);for(var r in e)e.hasOwnProperty(r)&&"extends"!=r&&(t[r]=e[r]);return t},s.prototype.getNewContext=function(e,t){return"string"==typeof e?(t="string"!=typeof t?"":": "+t,e+"."+this.constructor.name+"["+this.name+t+"]"):this.context},s.prototype.validateTypes=function(e,t){this[e+"Names"];var r=this[e+"Schema"];if(null!==r)try{if(!sweva.Ajv.validate(r,t))return sweva.ErrorManager.error(new i("Object does not match the given "+e+"Schema: "+sweva.Ajv.errorsText(sweva.Ajv.errors),this.context,t)),!1}catch(e){}return!0},s.prototype.execute=function(e,t){return new Promise((function(e,t){e(0)}))},t.exports=s},{"../../../node_modules/clone/clone.js":68,"../../core/errors/ExecutionError.js":7,"../../core/errors/definitionError.js":9}],4:[function(e,t,r){"use strict";var n=e("../../core/composables/composable.js"),i=e("../../core/composables/module.js"),o=e("../../core/errors/definitionError.js"),s=e("../../core/errors/ExecutionError.js");function a(e,t){this.manager=t,this.initializeProperty(e,"composables",{}),this.initializeProperty(e,"links",{}),this.initializeFunction(e,"mapInput",4,(function(e,t,r,n){return e.hasOwnProperty(t)?e[t]:null})),this.initializeFunction(e,"mapDataIn",4,(function(e,t,r,n){return e.hasOwnProperty(t)?e[t]:null})),this.initializeFunction(e,"mapDataOut",2,(function(e,t){return e})),this.initialize(e),this.isReady=!1}a.prototype=Object.create(n.prototype),a.prototype.loadComposables=function(){var e=this;return new Promise((function(t,r){var n=[];for(var o in e.composables)if(e.composables.hasOwnProperty(o))if("string"==typeof e.composables[o])n.push(sweva.ComposableLoader.load(e.composables[o],e.composables,o));else{var l=e.composables[o].type;e.composables[o]="module"==l?new i(e.composables[o],e.manager):new a(e.composables[o],e.manager)}Promise.all(n).then((function(){e.isReady=!0,e.wantsToExecute&&(e.wantsToExecute=!1,e.executeStarterCallback()),e.analyzeLinkGraph(),t()})).catch((function(t){sweva.ErrorManager.error(new s("Could not load all composables: "+t,e.context,e.composables))}))}))},a.prototype.hasParameters=function(e){var t=[];if(void 0!==this.composables[e].dataInConnected&&(t=Object.keys(this.composables[e].dataInConnected)),0===t.length)return!0;if(this.parameters.hasOwnProperty(e)){for(var r=0;r<t.length;r++){var n=t[r];if(void 0===this.parameters[e][n])return!1}return!0}return!1},a.prototype.addParameter=function(e,t,r){this.parameters.hasOwnProperty(e)||(this.parameters[e]={}),this.parameters[e][t]=r},a.prototype.reset=function(){for(var e in this.parameters={},this.output={},this.unlcearedComposables=[],this.composables)this.composables.hasOwnProperty(e)&&this.unlcearedComposables.push({composable:e,cleared:!1})},a.prototype.hasCycles=function(e){var t={},r={};for(var n in this.composables)this.composables.hasOwnProperty(n)&&(t[n]={});for(var i in this.links)if(this.links.hasOwnProperty(i))for(var o in r[i]=[],this.links[i])if(this.links[i].hasOwnProperty(o))for(var s in this.links[i][o])this.links[i][o].hasOwnProperty(s)&&r[i].push(s);for(var a=[],l=e.slice(),c=!0;l.length>0;){var u=l.pop();if(a.indexOf(u)>=0){c=!1;break}if(a.push(u),r.hasOwnProperty(u))for(var p=0;p<r[u].length;p++){var f=r[u][p];r[u].splice(p,1),p--;var d=!1;for(var n in r){if(r.hasOwnProperty(n))for(var h=0;h<r[n].length;h++)if(r[n][h]===f){d=!0;break}if(d)break}if(d||l.push(f),0===r[u].length){delete r[u];break}}}return Object.keys(r).length>0||!c},a.prototype.checkSchemaCompatibility=function(e,t,r,n,i,s){if(null==r||null==n)return!0;var a=null;function l(e,t,r){for(var n in r){if("items"!==n&&"required"!==n&&!t.hasOwnProperty(n))return a={level:e,message:'missing property "'+n+'"'},!1;if("items"===n&&t.hasOwnProperty(n)){if(!l(e+"."+n,t[n],r[n]))return!1}else if("properties"===n&&t.hasOwnProperty(n)){if(!c(e+"."+n,t[n],r[n]))return!1}else if("required"===n&&t.hasOwnProperty(n)){if(t[n].sort(),r[n].sort(),t[n].length!==r[n].length)return a={level:e,message:'array length different for "'+n+'" '+t[n].toString()+" != "+r[n].toString()},!1;for(var i=0;i<t[n].length;i++)if(t[n][i]!==r[n][i])return a={level:e,message:'array element difference for "'+n+'" ( '+t[n][i]+" != "+r[n][i]+" ) "+t[n].toString()+" != "+r[n].toString()},!1}else if(t.hasOwnProperty(n)&&t[n]!==r[n])return a={level:e,message:'inequal property value "'+n+'" ( '+t[n]+" != "+r[n]+" )"},!1}return!0}function c(e,t,r){for(var n in r){if(!t.hasOwnProperty(n))return a={level:e,message:'missing property "'+n+'"'},!1;if(!l(e+"."+n,t[n],r[n]))return!1}return!0}var u=!0;function p(e,t){return e.hasOwnProperty("properties")?e.properties.hasOwnProperty(t)?e.properties[t]:null:e}var f,d=r,h=n;"string"==typeof s&&((f=p(n,s))?n=f:a={level:"",message:'Composable "'+t+'" has no schema for property "'+s+'" provided by composable "'+e+'"'});"string"==typeof i&&((f=p(r,i))?r=f:a={level:"",message:'Composable "'+e+'" has no schema for property "'+i+'" required by composable "'+t+'"'});if(a||(u=l("",r,n)),a){var m="";"string"==typeof i&&"string"==typeof s?m=' for the mapping "'+i+'" -> "'+s+'"':"string"==typeof s&&(m=' for the mapping "'+s+'"');var g={};g[e]=d,g[t]=h,sweva.ErrorManager.error(new o('Schemas of "'+e+'" and "'+t+'" incompatible'+m+": "+a.level+": "+a.message,this.context,g))}return u},a.prototype.analyzeLinkGraph=function(){for(var e in this.invalidLinkGraph=!1,this.startingComposables=Object.keys(this.composables),this.endingComposables={},this.composables)this.composables.hasOwnProperty(e)&&(this.endingComposables[e]=!0);for(var t in this.links)if(this.links.hasOwnProperty(t))for(var r in this.links[t])if(this.links[t].hasOwnProperty(r))for(var n in this.links[t][r])if(this.links[t][r].hasOwnProperty(n)){var i=this.links[t][r][n];if(this.composables.hasOwnProperty(n)){if(this.composables[t].dataOutNames.indexOf(r)<0){sweva.ErrorManager.error(new o('Composable "'+t+'" maps undefined dataOut "'+r+'" to composable "'+n+'"!',this.context,this.composables[t].dataOutNames)),this.invalidLinkGraph=!0;break}if(this.composables[n].dataInNames.indexOf(i)<0){sweva.ErrorManager.error(new o('Composable "'+t+'" links to undefined dataIn "'+i+'" of composable "'+n+'"!',this.context,this.composables[n].dataInNames)),this.invalidLinkGraph=!0;break}if(this.composables[t].dataOutSchema&&null!=this.composables[n].dataInSchema)if(!this.checkSchemaCompatibility(t,n,this.composables[t].dataOutSchema,this.composables[n].dataInSchema,r,i)){this.invalidLinkGraph=!0;break}void 0===this.composables[n].dataInConnected&&(this.composables[n].dataInConnected={}),this.composables[n].dataInConnected[i]=!0}else sweva.ErrorManager.error(new o('Composable "'+t+'" links to undefined composable "'+n+'"!',this.context,Object.keys(this.composables))),this.invalidLinkGraph=!0;var s=this.startingComposables.indexOf(n);s>=0&&this.startingComposables.splice(s,1),this.endingComposables.hasOwnProperty(t)&&delete this.endingComposables[t]}this.hasCycles(this.startingComposables)&&(sweva.ErrorManager.error(new o("There are cycles in the linkage of composables!",this.context,this.links)),this.invalidLinkGraph=!0),this.dataIn=this.startingComposables.length,this.dataOut=Object.keys(this.endingComposables).length,this.dataInNames=[],this.dataOutNames=[];for(var a=0;a<this.startingComposables.length;a++)this.composables[this.startingComposables[a]].dataInNames.length>0&&this.dataInNames.push(this.startingComposables[a]);for(var e in this.endingComposables)this.endingComposables.hasOwnProperty(e)&&this.dataOutNames.push(e)},a.prototype.composableQueueExecution=function(e){for(var t=0;t<this.unlcearedComposables.length;t++)if(!this.unlcearedComposables[t].cleared){var r=this.unlcearedComposables[t].composable,n=null,i=null;if(this.hasParameters(r)){n=this.parameters[r],i=this.mapInput(this.input,r,this.composables,sweva.libs);var o=this;if(!this.unlcearedComposables[t].cleared){var s=!1;"function"==typeof this.composables[this.unlcearedComposables[t].composable].subscribe?(o.mqtt_module_name=this.composables[this.unlcearedComposables[t].composable].name,s={module_name:this.composables[this.unlcearedComposables[t].composable].name,context:e,data:{parameters:this.parameters,output:this.output,unclearedComposablesClone:JSON.parse(JSON.stringify(this.unlcearedComposables)),process:this.progress,client:this.mqtt_client}}):o.mqtt_module_name=!1,this.unlcearedComposables[t].cleared=!0,this.composables[r].execute(n,i,e,r,s,this.progress).then(function(t){return function(r){if(o.endingComposables.hasOwnProperty(t)){var n=!0;Object.keys(o.endingComposables).length>1?o.output[t]=r:o.output=r;for(var i=0;i<o.unlcearedComposables.length;i++)o.unlcearedComposables[i].cleared||(n=!1);n&&o.executeFinishedCallback()}else if(o.links[t])for(var s in o.links[t])if(o.links[t].hasOwnProperty(s))for(var a in o.links[t][s])if(o.links[t][s].hasOwnProperty(a)){var l=o.links[t][s][a];o.addParameter(a,l,r[s])}o.manager.addReexecutionListener((function(e){o.needsReloadingVisualization=!0,o.progress=e.mqtt_sweva_parameters.data.progress,o.context=e.mqtt_sweva_parameters.context,o.parameters=e.mqtt_sweva_parameters.data.parameters,o.output=e.mqtt_sweva_parameters.data.output,o.mqtt_client=e.mqtt_sweva_parameters.data.client,o.unlcearedComposables=JSON.parse(JSON.stringify(e.mqtt_sweva_parameters.data.unclearedComposablesClone)),o.composableQueueExecution.apply(o,[o.context]),console.log("recomputing demo result")}),o.mqtt_module_name),o.composableQueueExecution.apply(o,[e])}}(r)).catch((function(e){}))}}}},a.prototype.execute=function(e,t,r,n,i){var o=this;return this.data=e,this.input=t,r=this.getNewContext(r,n),this.reset(),this.progress=i,new Promise((function(n,i){if(!o.invalidLinkGraph&&o.validateTypes("dataIn",e)&&o.validateTypes("input",t)){for(var a=0;a<o.startingComposables.length;a++){var l=o.startingComposables[a];o.parameters[l]=o.mapDataIn(o.data,l,o.composables,sweva.libs)}o.executeFinishedCallback=function(e){if(e)sweva.ErrorManager.error(new s("Something unexpected happened: "+e,r,e)),i(sweva.ErrorManager.getLastError());else{var t=o.mapDataOut(o.output,sweva.libs);o.validateTypes("dataOut",t)?(!0===o.needsReloadingVisualization&&o.manager.sendDataToVisualization(t),n(t)):i(sweva.ErrorManager.getLastError())}},o.isReady?o.composableQueueExecution.apply(o,[r]):(o.wantsToExecute=!0,o.executeStarterCallback=function(){o.composableQueueExecution.apply(o,[r])})}else i(sweva.ErrorManager.getLastError())}))},t.exports=a},{"../../core/composables/composable.js":3,"../../core/composables/module.js":5,"../../core/errors/ExecutionError.js":7,"../../core/errors/definitionError.js":9}],5:[function(e,t,r){"use strict";var n=e("../../core/composables/composable.js"),i=(e("../../core/errors/definitionError.js"),e("../../core/errors/ExecutionError.js"));function o(e,t){this.manager=t,this.initialize(e),this.initializeFunction(e,"run",3,null),this.initializeProperty(e,"language","typescript"),this.initializeProperty(e,"source",null),this.initializeProperty(e,"binary",null),this.initializeProperty(e,"binaryHash",null),this.initializeFunction(e,"subscribe",3,null),this.initializeFunction(e,"onConnect",3,null),this.initializeFunction(e,"onSubscription",3,null),this.initializeFunction(e,"onMessageReceived",4,null)}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.lastReturnedData=null,o.prototype.callService=function(e,t){var r=this;return new Promise((function(n,i){e.then((function(e){n(r.response(e,t,sweva.libs))})).catch((function(e){"function"==typeof r.requestError?n(r.requestError(e,t,sweva.libs)):i(e)}))}))},o.prototype.callSubscription=function(e,t,r,n){var i=this;return new Promise((function(o,s){if(!1!==e){var a=e;r.data.client=a,a.on("connect",(function(){i.onConnect(a,n,sweva.libs)})),null===i.lastReturnedData&&(i.lastReturnedData=t),a.on("message",(function(e,t){0!=r?i.mqtt_sweva_parameters=r:s(error),i.lastReturnedData=i.onMessageReceived(i.lastReturnedData,e,t,sweva.libs),i.manager.onModuleUpdate(i)}))}o(i.onSubscription(t,n,sweva.libs)).catch((function(e){"function"==typeof i.requestError?o(i.requestError(response,n,sweva.libs)):s(e)}))}))},o.prototype.execute=function(e,t,r,n,o,s){var a=this;return console.log("context ==="),console.log(r),console.log("Module to be executed ="),console.log(a),r=this.getNewContext(r,n),null==t&&(t={}),new Promise((function(l,c){if(a.validateTypes("dataIn",e)&&a.validateTypes("input",t))console.log("Input data for "+n+": "),console.log(e),null!=a.source&&(console.log("EXECUTE "+a.name+"["+n+"] USING: "+sweva.runners[a.language].name),sweva.runners[a.language].exec(a,e,t).then((e=>{console.log("Result data for "+n+": "),console.log(e),"offloading"===e&&l("offloading"),a.validateTypes("dataOut",e)?(void 0!==s&&s(n,a.name,r,e),l(e)):c(sweva.ErrorManager.getLastError())})));else if("function"==typeof a.subscribe){var u;u=void 0===o.data.client&&a.subscribe(e,t,sweva.libs),a.callSubscription(u,e,o,t).then((function(e){a.validateTypes("dataOut",e)?(void 0!==s&&s(n,a.name,r),a.lastReturnedData=e,l(e)):c(sweva.ErrorManager.getLastError())})).catch((function(e){sweva.ErrorManager.error(new i("Something unexpected happened: "+e,r,e)),c(sweva.ErrorManager.getLastError())}))}else"function"==typeof a.request?a.callService(a.request(e,t,sweva.libs),t).then((function(e){a.validateTypes("dataOut",e)?(void 0!==s&&s(n,a.name,r),l(e)):c(sweva.ErrorManager.getLastError())})).catch((function(e){sweva.ErrorManager.error(new i("Something unexpected happened: "+e,r,e)),c(sweva.ErrorManager.getLastError())})):c(sweva.ErrorManager.getLastError())}))},t.exports=o},{"../../core/composables/composable.js":3,"../../core/errors/ExecutionError.js":7,"../../core/errors/definitionError.js":9}],6:[function(e,t,r){(function(r){(function(){var n,i=!1;try{window&&(n=window,i=!0)}catch(e){n=r}if(!n.sweva){n.sweva={},n.sweva.inBrowser=i,n.sweva.asyncmqtt=e("../../node_modules/async-mqtt");var o=e("../../node_modules/ajv/lib/ajv.js");n.sweva.Ajv=new o;var s=e("../../app/core/execution/composableLoader.js");n.sweva.ComposableLoader=new s(""),n.sweva.ExecutionManager=e("../../app/core/execution/executionManager.js");var a=e("../../app/core/errors/errorManager.js");n.sweva.ErrorManager=new a;var l=e("../../app/core/swevaScript/swevaScript.js");n.sweva.SwevaScript=new l;var c=e("../../app/core/runners/assemblyScriptRunner.js");n.sweva.runners={};var u=new c;n.sweva.runners[u.id]=u}t.exports=n.sweva}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../app/core/errors/errorManager.js":10,"../../app/core/execution/composableLoader.js":12,"../../app/core/execution/executionManager.js":13,"../../app/core/runners/assemblyScriptRunner.js":20,"../../app/core/swevaScript/swevaScript.js":22,"../../node_modules/ajv/lib/ajv.js":23,"../../node_modules/async-mqtt":58}],7:[function(e,t,r){"use strict";var n=e("../../core/errors/swevaError.js");function i(e,t,r){n.call(this,e,t,r),this.name="ExecutionError"}i.prototype=Object.create(n.prototype),t.exports=i},{"../../core/errors/swevaError.js":11}],8:[function(e,t,r){"use strict";var n=e("../../core/errors/definitionError.js");function i(e,t,r){n.call(this,e,t,r),this.name="CompileError"}i.prototype=Object.create(n.prototype),t.exports=i},{"../../core/errors/definitionError.js":9}],9:[function(e,t,r){"use strict";var n=e("../../core/errors/swevaError.js");function i(e,t,r){n.call(this,e,t,r),this.name="DefinitionError"}i.prototype=Object.create(n.prototype),t.exports=i},{"../../core/errors/swevaError.js":11}],10:[function(e,t,r){"use strict";function n(){this.queue=[]}n.prototype.clear=function(){this.queue=[]},n.prototype.error=function(e){return this.queue.push(e),console.log(e.toString()),console.log(e),e},n.prototype.getLog=function(){for(var e="",t=0;t<this.queue.length;t++)e+=this.queue[t].toString()+"\n";return e},n.prototype.getLastError=function(){return this.queue.length>0?this.queue[this.queue.length-1]:null},t.exports=n},{}],11:[function(e,t,r){"use strict";function n(e,t,r){if(this.name="SwevaError",this.message=e||"Default Message",this.stack=(new Error).stack,this.context=t,"undefined"!==r){if(this.faultyObject=r,"function"==typeof r)this.faultyObject=r.toString();else if("object"==typeof r)for(var n in r)r.hasOwnProperty(n)&&(this.faultyObject[n]=r[n])}else this.faultyObject=null;this.time=Date.now(),console.error("Error in "+t+" created! Stacktrace:"),console.trace()}n.prototype=Object.create(Error.prototype,{constructor:{value:this.constructor,writable:!0,configurable:!0}}),n.prototype.getTime=function(){return new Date(this.time).toLocaleTimeString()},n.prototype.toString=function(){var e="";return e="object"==typeof this.faultyObject?JSON.stringify(this.faultyObject,null,4):this.faultyObject.toString(),"["+this.getTime()+"] SwevaError "+this.name+" in "+this.context+": "+this.message+"\n"+e},t.exports=n},{}],12:[function(e,t,r){"use strict";var n=e("../../core/composables/module.js"),i=e("../../core/composables/composition.js"),o=e("../../core/errors/definitionError.js");function s(e,t){this.basePath=e||"",this.suffix=t||"",this.composables={},this.waitingList={}}s.prototype.size=function(){return Object.keys(this.composables).length},s.prototype.get=function(e){return this.composables[e]},s.prototype.add=function(e,t){this.composables[e]=t},s.prototype.convertToObject=function(e,t){var r=e,n=this;for(var i in e)if(e.hasOwnProperty(i)){if("binary"===i&&!(e[i]instanceof Uint8Array)){let t=atob(e[i]);e[i]=new Uint8Array(t.split("").map((function(e){return e.charCodeAt(0)})))}if("source"!==i&&null!==e[i]&&"string"==typeof e[i][0])0===String(e[i][0]).trim().indexOf("function")&&(e[i]=sweva.SwevaScript.sanitize(e[i].join("\n"),(function(r){sweva.ErrorManager.error(new o('Could not sanitize function "'+i+'" when loading "'+t+'": '+r,t,n.convertJsonToCode(e)))})));"object"==typeof e[i]&&(e[i]=this.convertToObject(e[i],t))}return r},s.prototype.getDefaultModule=function(){return"{\n    type: 'module',\n    name: 'module1',\n    description: 'A simple module template.',\n    dataInNames: ['in'],\n    dataInSchema: {},\n    dataOutNames:['result'],\n    dataOutSchema: {},\n    inputNames: ['input'],\n    inputSchema: {},\n    request: function (data, input, libs) {\n        return libs.axios.get('http://localhost:8080/example/calc/add/');\n    },\n    response: function (response, input, libs) {\n        return { result:response.data }\n    }    \n}"},s.prototype.getDefaultComposition=function(){return"{\n    type: 'composition',\n    name: 'composition1',\n    dataInNames: [],\n    dataInSchema: {},\n    dataOutNames:['result'],\n    dataOutSchema: {},\n    inputNames: [],\n    inputSchema: {},\n    mapDataIn: function (data, composableName, composables, libs) {\n        if (data.hasOwnProperty(composableName)) {\n            return libs.get(data, composableName);\n        }\n        return null;\n    },\n    mapDataOut: function (output, libs) {\n        return output;\n    },\n    mapInput: function (input, moduleName, modules, libs) {\n        if (input.hasOwnProperty(moduleName)) {\n            return libs.get(input, moduleName);\n        }\n        return null;\n    }\n}"},s.prototype.convertCodeToJson=function(e){for(var t="",r=e.split(/\r?\n/),n=new RegExp(/^\s*(\w)+\s*:\s*function/),i=new RegExp(/^\s*(\w)+\s*/),o=!1,s=!1,a=0,l=!1,c=0;c<r.length;c++){var u=r[c].trim();if(!o)if(l&&u.indexOf(":")>=0&&(l=!1,t+=",\n"),n.test(u)){o=!0;var p=u.indexOf("function"),f=u.slice(0,p);null!=(d=i.exec(f))&&(f=f.slice(0,d.index)+'"'+f.slice(d.index,d.index+d[0].length)+'"'+f.slice(d.index+d[0].length)),t+=f=f.replace(/'/g,'"'),t+='["'+u.slice(p)+'",\n',s=!0}else{var d;null!=(d=i.exec(u))&&(u=u.slice(0,d.index)+'"'+u.slice(d.index,d.index+d[0].length)+'"'+u.slice(d.index+d[0].length)),t+=(u=u.replace(/'/g,'"'))+"\n"}if(o){for(var h=!1,m=0;m<u.length;m++){var g=u[m];'"'==g?(h=!h,u=u.slice(0,m)+"\\"+u.slice(m),m++):"'"!=g||h?"{"!=g||h?"}"!=g||h||a--:a++:h=!0}s?s=!1:(u=u.replace("\\n","\\\\n"),0==a?(u.length>0&&u.indexOf(",")>=u.length-1&&(u=u.slice(0,u.length-1)),t+='"'+u+'"\n'):t+='"'+u+'",\n'),0==a&&(o=!1,s=!1,t+="]\n",l=!0)}}return 0!==t.indexOf("{")?"{"+t+"}":t},s.prototype.convertJsonToCode=function(e){function t(e){for(var t="",r=0;r<e;r++)t+=" ";return t}return"{\n"+function e(r,n,i){for(var o="",s=t(n*i),a=Object.keys(r),l=0;l<a.length;l++){var c=a[l];if(o+=s+(c.indexOf(" ")>=0?"'"+c+"'":c)+": ","string"==typeof r[c])o+="'"+r[c]+"'";else if("object"==typeof r[c])if(Array.isArray(r[c])){var u="";if(r[c].length>0&&"string"==typeof r[c][0]&&0==r[c][0].trim().indexOf("function")){for(var p=0,f=0;f<r[c].length;f++){var d=r[c][f].trim();0==d.indexOf("}")&&--p<0&&(p=0),u+=(0==f?"":s)+t(i*p)+d+(f>=r[c].length-1?"":"\n"),d.length>0&&d.indexOf("{")==d.length-1&&p++}o+=u+s}else{for(f=0;f<r[c].length;f++){var h=r[c][f];u+=s+t(i),u+="string"==typeof h?"'"+h+"'":"object"==typeof h?"{\n"+e(r[c],n+1,i)+s+"}":h,f<r[c].length-1&&(u+=","),u+="\n"}o+="[\n"+u+s+"]"}}else o+="{\n"+e(r[c],n+1,i)+s+"}";else o+="'"+r[c]+"'";l<a.length-1&&(o+=","),o+="\n"}return o}(e,1,4)+"}"},s.prototype.assignLoadedComposables=function(e,t,r,n){if(this.composables[e]=t,null!=r&&"string"==typeof n&&(r[n]=t),this.waitingList.hasOwnProperty(e)){for(var i=0;i<this.waitingList[e].length;i++){this.waitingList[e][i].assignTo[this.waitingList[e][i].prop]=t}delete this.waitingList[e]}},s.prototype.load=function(e,t,r){var o=this;return new Promise((function(s,a){if(o.composables.hasOwnProperty(e))!0===o.composables[e]?(null!=t&&"string"==typeof r&&(o.waitingList.hasOwnProperty(e)||(o.waitingList[e]=[]),o.waitingList[e].push({assignTo:t,prop:r})),s(o.composables[e])):(null!=t&&(t[r]=o.composables[e]),s(o.composables[e]));else{o.composables[e]=!0;var l=o.basePath+e+o.suffix;sweva.axios.get(l).then((function(a){var c,u=o.convertToObject(a.data,l),p=new Promise((c=u,function(e,t){e(c)}));if(u.hasOwnProperty("extends")){var f=u.extends;p=new Promise(function(e,t){return function(r,n){o.load(e).then((function(e){r(e.extendWith(t))}))}}(f,u))}p.then((function(a){console.log("loaded "+a.name),"module"==a.type?(a=new n(a),o.assignLoadedComposables(e,a,t,r),s(a)):(a=new i(a),o.assignLoadedComposables(e,a,t,r),a.loadComposables().then((function(){s(a)})))}))})).catch((function(t){a(o.basePath+e+o.suffix)}))}}))},s.prototype.clear=function(){this.composables={},this.waitingList={}},t.exports=s},{"../../core/composables/composition.js":4,"../../core/composables/module.js":5,"../../core/errors/definitionError.js":9}],13:[function(e,t,r){"use strict";var n=e("../../core/errors/ExecutionError.js"),i=e("../../core/composables/module.js"),o=e("../../core/composables/composition.js");let s=e("../network/potentialOffloadingTarget.js"),a=e("../network/dataProcessingDevice.js"),l=new Peer("",{host:"localhost",port:9e3,path:"/discoveryNetwork"});console.log("offloadingOutput$ Connection to the SWeVA P2P network successful!"),l.on("connection",(e=>{e.on("data",(t=>{if("peer"===t){let t="offloadingOutput$ Potential Offloading Target from device = "+e.peer;console.log(t),s()}}))}));let c=[0,0,0],u=[0,0,!1],p={},f={};function d(e){this.name="string"==typeof e?e:"ExecutionManager",this.modulesTotal=1,this.modulesDone=0,this.progressCallback=null,this.updateVisualizationNotifier=null,this.reexecutionListeners=[]}d.setODList=function(e){c=e},d.getODList=function(){return c},d.setORList=function(e){u=e},d.getORList=function(){return u},d.setInitialIntermediatePipeline=function(e){for(let t in e.composables)e.composables.hasOwnProperty(t)&&delete e.composables[t].manager;p=e,console.log("Initializing intermediate pipeline =",p)},d.getListOfPeers=function(){return new Promise((e=>{l.listAllPeers((t=>{const r=t.filter((e=>e!==l.id)).map((e=>e.toString()));e(r)}))}))},d.prototype.onProgress=function(e){this.progressCallback=e},d.prototype.onMQTTDataRecieved=function(e){this.updateVisualizationNotifier=e},d.prototype.sendDataToVisualization=function(e){null!==this.updateVisualizationNotifier&&this.updateVisualizationNotifier(e)},d.prototype.addReexecutionListener=function(e,t){if(0!==this.reexecutionListeners.length){for(var r in this.reexecutionListeners)this.reexecutionListeners[r].module_name===t&&this.reexecutionListeners.splice(r,1);this.reexecutionListeners.push({callback:e,module_name:t})}else!1!==t&&this.reexecutionListeners.push({callback:e,module_name:t})},d.prototype.onModuleUpdate=function(e){for(var t in this.reexecutionListeners)this.reexecutionListeners[t].module_name===e.mqtt_sweva_parameters.module_name&&this.reexecutionListeners[t].callback(e)},d.prototype.setup=function(e,t){function r(e){if(void 0===e.composables)return 1;var t=0;for(var n in e.composables)e.composables.hasOwnProperty(n)&&(t+=r(e.composables[n]));return t}var s=[];this.composables={},this.isReady=!1,this.wantsToExecute=!1,Array.isArray(e)||(e=[e]);for(var a=[],l=0;l<e.length;l++){var c=e[l];"string"==typeof c?(a.push(c),s.push(sweva.ComposableLoader.load(c,this.composables,c))):(void 0!==t&&t||(c=sweva.ComposableLoader.convertToObject(c,"JSON")),"module"===c.type?(this.composables[c.name]=new i(c,this),sweva.ComposableLoader.add(c.name,this.composables[c.name])):(this.composables[c.name]=new o(c,this),sweva.ComposableLoader.add(c.name,this.composables[c.name]),s.push(this.composables[c.name].loadComposables())),a.push(c.name))}var u=this;Promise.all(s).then((function(){for(var t=0,n=0;n<e.length;n++)t+=r(sweva.ComposableLoader.get(a[n]));u.modulesTotal=t,u.modulesDone=0,u.isReady=!0,console.log("all loaded"),u.wantsToExecute&&(u.wantsToExecute=!1,u.executeCallback())})).catch((function(e){sweva.ErrorManager.error(new n("Could not load all modules: "+e,u.name,e))}))},d.prototype.progressUpdate=function(e,t,r,n){if(console.log("offloadingOutput$ Finished executing ",e),"offloading"===n){console.log("OFFLOADING flag catched in Exec manager !");for(let e in p.composables){p.composables.hasOwnProperty(e)&&delete p.composables[e].manager;const t=p.composables[e];for(let e in t)null===t[e]&&delete t[e]}p=JSON.stringify(p),f=JSON.stringify(f),i={intermediatePipeline:p,intermediatePipelineResults:f},console.log("offloadingOutput$ broadcasting to discovery network...."),a(i),l.listAllPeers((e=>{e.filter((e=>e!==l.id)).forEach((e=>{const t=l.connect(e);t.on("open",(()=>{t.send("peer")})),t.on("error",(t=>{console.error("Error discovering Peer : "+e),console.error(t)}))}))}))}var i;if(0!==Object.keys(p).length){let t=p.links,r=n.out;if(t.hasOwnProperty(e)){console.log("Cheesecake !");let n=Object.entries(t[e].out)[0];console.log(n),f[n[0]]={num:r},console.log(f),delete p.composables[e]}else console.log("croissant !"),f[e]={out:r},delete p.composables[e];if(null!==this.progressCallback){this.modulesDone++;var o=this.modulesDone/+this.modulesTotal;this.progressCallback((100*o).toFixed(0))}}},d.prototype.execute=function(e,t){var r=[],i=this;return console.log("///////////// Exec Manager inputs //////////////"),console.log("data"),console.log(e),console.log("input"),console.log(t),console.log("self"),console.log(i),console.log("intermediate Pipeline"),console.log(p),console.log("///////////////////////////"),new Promise((function(o,s){var a=function(r,o,s,a){return function(){var l=!1;for(var c in 1===Object.keys(r).length&&(l=!0),r)r.hasOwnProperty(c)&&(l?o.push(r[c].execute(e,t,"",c,i.progressUpdate.bind(i))):o.push(r[c].execute(e[c],t[c]||{},"",c,i.progressUpdate.bind(i))));Promise.all(o).then((function(e){if(console.log("all promises resolved"),l)return s(e[0]);s(e)})).catch((function(e){if(l)return s(e);sweva.ErrorManager.error(new n("Something unexpected happened: "+e,this.name,e)),a(e)}))}};i.isReady?a(i.composables,r,o,s)():(i.wantsToExecute=!0,i.executeCallback=a(i.composables,r,o,s))}))},d.prototype.run=d.prototype.execute,t.exports=d},{"../../core/composables/composition.js":4,"../../core/composables/module.js":5,"../../core/errors/ExecutionError.js":7,"../network/dataProcessingDevice.js":15,"../network/potentialOffloadingTarget.js":16}],14:[function(e,t,r){function n(){this.functions={}}n.prototype.loadTestSync=function(){this.functions.test={async:!1,languageSpecific:{typescript:{parameterSig:"url: string",returnSig:"string"}},func:function(e){return e+e}}},n.prototype.loadLogger=function(){this.functions.log={description:"Log the text to the browser console",async:!1,languageSpecific:{typescript:{parameterSig:"text: string",returnSig:"void"}},func:function(e){console.log(e)}}},n.prototype.loadHTTP=function(){this.functions.httpRequest={description:"Send a HTTP(S) request using the fetch api. Returns status=-1 on timeout!",async:!0,languageSpecific:{typescript:{parameterSig:"url: string, headers:string = null | null, method:string = 'GET' | null, body:string = null | null, cache:string = 'no-store' | null, timeout:i32 = 5000",returnSig:"text: string, status: int"}},func:async function(e,t,r,n,i,o){let s={};null!=t&&(s.headers=t),null!=r&&(s.method=r),null!=n&&(s.body=n),s.cache=null!=i?i:"no-store";let a=new AbortController,l=setTimeout((()=>a.abort()),o);s.signal=a.signal;try{let t=await fetch(e,s);return clearTimeout(l),console.log("RESPONSE:"),console.log(t),[await t.text(),t.status]}catch(e){return["TIMEOUT",-1]}}}},t.exports=n},{}],15:[function(e,t,r){let n=e("../offloading/offloadingTarget.js");t.exports=function(e){let t={},r={},i=!1,o=function(e,t=(()=>{})){let r=new Peer(e,{host:"localhost",port:9001,path:"/offloadingNetwork"});return r.on("open",(function(e){console.log("offloadingOutput$ My peer ID is = "+e),t()})),r.on("error",(function(e){console.log("Error: "+e)})),r.on("disconnected",(function(e){console.log("peer ID "+e+" disconnected"),t()})),r}("source",(()=>{o.on("connection",(s=>{r[s.peer]=!1,console.log("offloadingOutput$ connected to peer = "+s.peer),console.log(r),s.on("data",(a=>{if(Array.isArray(a)&&a.length>0&&"dmi"===a[a.length-1]){if(console.log("received DMI from: ",s.peer),console.log(a),r[s.peer]=!0,console.log(r),t[s.peer]=a,i=Object.values(r).every((e=>!0===e)),console.log(i),i)return function(){console.log("entered processMsgs functions");let r=n(t);if(null===r)console.log("offloadingOutput$ There is no suitable offloading peer available ! Offload to the cloud...");else{console.log("offloadingOutput$ chosen potID for offloading = "+r);let t=o.connect(r);t.on("open",(()=>{console.log("offloadingOutput$ connection opened with chosen POT !"),console.log("SENT PIPELINE = ",e),console.log("Type of PIPELINE = ",typeof e),t.send(e)})),t.on("data",(e=>{console.log("Pipeline result: "),console.log(e),console.log("offloadingOutput$ Offloaded Result =");let t=JSON.stringify(e);t="offloadingOutput$ "+t,console.log(t)}))}}()}else console.log("Error encountered while receiving the dmi")}))}))}))}},{"../offloading/offloadingTarget.js":19}],16:[function(e,t,r){let n=e("../offloading/availableOffloadingResources");t.exports=function(){let e=function(e,t=(()=>{})){let r=new Peer(e,{host:"localhost",port:9001,path:"/offloadingNetwork"});return r.on("open",(function(e){console.log("offloadingOutput$ My peer ID is = "+e),t()})),r.on("error",(function(e){console.log("Error: "+e)})),r.on("disconnected",(function(e){console.log("peer ID "+e+" disconnected"),t()})),r}("",(()=>{e.on("connection",(e=>{console.log("offloadingOutput$ I am chosen by Source Peer !"),e.on("data",(t=>{console.log("Data received from Source = ",t),console.log("offloadingOutput$ Processing offloaded pipeline ..."),async function(e){console.log("entered processPipeline is POT ..."),console.log(e);let{intermediatePipeline:t,intermediatePipelineResults:r}=e;console.log("pipeline = ",t),console.log("pipeline inputs = ",r);let n=JSON.parse(t),i=JSON.parse(r);console.log("pipeline = ",n),console.log("pipeline inputs = ",i);try{let e=new sweva.ExecutionManager;e.setup(n);let t=await e.execute(i,{});return console.log("OUTPUT offloaded msg = ",t),t}catch(e){return console.log("Error encountered while executing the offloaded pipeline = ",e,"\nPlease offload to the cloud"),"Error encountered while executing the offloaded pipeline. Please offload to the cloud"}}(t).then((t=>{console.log("OFFLOADING RESULT = "),console.log(t),console.log("offloadingOutput$ Finished processing the offloaded pipeline"),e.send(t),console.log("offloadingOutput$ Result sent to offloading source peer")})).catch((e=>{console.error(e)}))}))}));const t=e.connect("source");t.on("open",(()=>{console.log("offloadingOutput$ connected to peer = "+t.peer);let e=sweva.ExecutionManager.getORList();console.log("orList GET in potentialOffloadingTarget = ",e),n(e).then((e=>{console.log("result is =",e),e.push("dmi"),console.log(e),t.send(e)})).catch((e=>{console.error(e)}))}))}))}},{"../offloading/availableOffloadingResources":17}],17:[function(e,t,r){(function(r){(function(){t.exports=async function(t){if(0===t[0]||0===t[1])return[0,0,0,!1];let n=0,i=0,o=0,s=!1,a=[];if("undefined"!=typeof window){i=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100;let e=await navigator.getBattery();o=100*e.level,s=e.charging,console.log("memUsage = ",i,"battery = ",o,"isCharging = ",s)}else{let a=e("systeminformation");await Promise.all([a.currentLoad(),a.mem(),a.battery()]).then((([e,a,l])=>{let c=r.memoryUsage();if(i=c.rss/a.available*100,n=e.avgLoad,o=l.percent,s=l.acConnected,n>t[0])return[0,0,0,!1]})).catch((e=>{console.log("Error occurred extracting metrics in the NodeJS environment. ERROR = "+e)}))}return i>t[0]||o<t[1]||s!==t[2]?(console.log("offloadingOutput$ Peer not strong enough for the offloaded task"),[0,0,0,!1]):(a.push(n,100-i,o,s),console.log("offloadingOutput$ Peer is strong enough to process the offloaded task"),a)}}).call(this)}).call(this,e("_process"))},{_process:181,systeminformation:267}],18:[function(e,t,r){(function(r){(function(){t.exports=async function(t){if(0===t[0]||0===t[1]||0===t[2])return!0;let n=0,i=0,o=0,s=!1;if("undefined"!=typeof window){i=performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100;let e=await navigator.getBattery();o=100*e.level}else{let t=e("systeminformation");await Promise.all([t.currentLoad(),t.mem(),t.battery()]).then((([e,t,s])=>{let a=r.memoryUsage();i=a.rss/t.available*100,n=e.avgLoad,o=s.percent,console.log("cpu = ",n,"mem = ",i,"battery = ",o)})).catch((e=>{console.log("Error occurred extracting metrics in the NodeJS environment. ERROR = "+e)}))}return n>t[0]?(console.log("offloadingOutput$ Monitoring = CPU limit exceeded"),s=!0):i>t[1]?(console.log("offloadingOutput$ Monitoring = Memory limit exceeded"),s=!0):o<t[2]&&(console.log("offloadingOutput$ Monitoring = Battery limit exceeded"),s=!0),s}}).call(this)}).call(this,e("_process"))},{_process:181,systeminformation:267}],19:[function(e,t,r){function n(e){let t=1-e[0],r=e[1],n=0;return e[3]||(n=100-e[2]),t+r-n}t.exports=function(e){let t=null,r=0;for(let i in e){let o=n(e[i]);console.log("PEER = "+i+" DPOD = "+o),o>r&&(r=o,t=i)}return console.log("offloadingOutput$ best POT is = ",t),t}},{}],20:[function(e,t,r){"use strict";var n=e("../../../node_modules/as-bind/dist/as-bind.cjs.js"),i=e("../../core/runners/runner.js"),o=e("../../core/compilers/assemblyScriptCompiler.js"),s=(e("../../core/composables/composable.js"),e("../../core/errors/ExecutionError.js")),a=e("../../core/errors/ExecutionError.js"),l=e("../../core/execution/supportLibrary.js");function c(){this.supportLib=new l,this.supportLib.loadHTTP(),this.supportLib.loadLogger(),this.supportLib.loadTestSync(),this.compiler=new o(this.supportLib)}c.prototype.getHTMLDescription=function(){let e="Find the official AssemblyScript documentation on <a href='https://www.assemblyscript.org/introduction.html' target='_blank'>assemblyscript.org</a>.\nThe exported <b>run</b> function will be called with the parameters as data inputs and returned data as an output called <b>out</b>. User inputs have to be prefixed with <b>input_</b> and be the first parameters.\nAdditional outputs are generated for exported global variables. This allows returning values resulting from asynchronous callbacks.\nIf the <b>run</b> function has the return type \"void\" no default output is generated.\n";return e+="\n"+this.compiler.supportLibraryDocumentation,e.replaceAll("\n","<br>"),e},c.prototype=Object.create(i.prototype),c.prototype.constructor=c,c.prototype.name="TypeScript (using AssemblyScript)",c.prototype.id="typescript",c.prototype.prepare=async function(e,t=[]){let r=null;if(!e.binary||0===e.binary.length||e.binaryHash!==this.calculateBinaryHash(e.binary)){e.binaryHash=null;let t=await this.compiler.compile(e);if(console.log("compilerResult"),console.log(t),"offloading"===t)return console.log("offloading intercepted in ASCRunner.prepare()"),"offloading";e.binary=t.binaryData,e.binaryHash=this.calculateBinaryHash(e.binary),r=t.definitionData}const i=await n.instantiate(e.binary,{module:this.generateFunctionDescription(t)});return null!=r&&this.createDataSchema(e,i,r),i},c.prototype.generateFunctionDescription=function(e){let t={};for(let r in this.supportLib.functions){let n,i=this.supportLib.functions[r];n=i.async?function(...t){let n=t[0];t.shift(),e.push({promise:i.func(...t),params:t,funcName:r,callbackName:n})}:i.func,t["lib."+r]=n}return t},c.prototype.exec=async function(e,t,r){let n=[],i=await this.prepare(e,n);if(console.log("instance"),console.log(i),"offloading"===i)return console.log("offloading intercepted in ASCRunner.exec()"),"offloading";console.log("module prepared= "),console.log(e);let o=[];e.inputNames.length>0&&(o=o.concat(this.findParamAssignment(e.inputNames,r,e.context))),e.dataInNames.length>0&&(o=o.concat(this.findParamAssignment(e.dataInNames,t,e.context))),console.log("Module source code input"),console.log(o);let l=i.exports.run(...o);for(console.log("returnValue = "),console.log(l);n.length>0;){console.log("Remaining Callback: "),console.log(n[0]);let t=null;try{t=await n[0].promise}catch(t){throw new s("Error in support function "+n[0].funcName+" with parameters "+n[0].params+"!",e.context)}if(null!==t){let r=i.typeDescriptor.exportedFunctions[n[0].callbackName];if(!r)throw new a("Callback function with name "+n[0].callbackName+" not found!",e.context);try{if(null!=n[0].callbackName&&""!==n[0].callbackName){let e=r.parameters.length,o=t.slice(0,e);console.log(i.typeDescriptor.exportedFunctions[n[0].callbackName]);let s=i.exports[n[0].callbackName](...o);s&&console.log("Callback return: "+s)}}catch(r){throw new s("Error while calling callback function "+n[0].callbackName+" with parameters '"+t+"'!",e.context)}}n.shift()}return this.collectOutputData(i,l)},c.prototype.collectOutputData=function(e,t){let r={};void 0!==t&&(r.out=t),console.log("AsBind"),console.log(n),console.log("moduleInstance"),console.log(e);for(let t in e.exports)e.exports[t]instanceof WebAssembly.Global&&!t.startsWith("__")&&(r[t]=e.exports[this.compiler.internalGetterPrefix+t]());return console.log("result"),console.log(r),r},c.prototype.findParamAssignment=function(e,t,r){let n=[];for(let i in e){let o=!1;if(void 0!==t&&null!=t)for(let r in t)e[i]===r&&(n.push(t[r]),o=!0);if(!o)throw new a('Mismatch between received and expected parameters!\nExpected "'+e[i]+'", but not contained in received parameters: '+JSON.stringify(t),r)}return n},c.prototype.parseAssemblyScriptVariableNames=function(e){let t=Array(),r=e.split("\n");for(let e in r)if(0===r[e].indexOf("export function run")){let n=r[e].substring(r[e].indexOf("(")+1,r[e].indexOf(")")).split(", ");for(let e in n){let r=n[e].substring(0,n[e].indexOf(":"));r.length>0&&t.push(r)}}return t},c.prototype.createDataSchema=function(e,t,r){let n=t.typeDescriptor.exportedFunctions.run;if(void 0===n)throw new a("Missing entrypoint: exported function named run is required, as an entrypoint.",e.context);let i=this.parseAssemblyScriptVariableNames(r);if(n.parameters.length!==i.length)throw new a("Parameter length mismatch! Parameters could not be parsed fully!",e.context);e.dataInNames=[],e.inputNames=[],e.dataInSchema={type:"object",properties:{}},e.inputSchema={type:"object",properties:{}};for(let t in n.parameters)i[t].startsWith("input_")?(e.inputNames.push(i[t]),e.inputSchema.properties[i[t]]={type:n.parameters[t]}):(e.dataInNames.push(i[t]),e.dataInSchema.properties[i[t]]={type:n.parameters[t]});e.dataOutNames=[],e.dataOutSchema={type:"object",properties:{}};for(let r in t.exports)t.exports[r]instanceof WebAssembly.Global&&!r.startsWith("__")&&(e.dataOutNames.push(r),e.dataOutSchema.properties[r]={type:t.typeDescriptor.exportedFunctions[this.compiler.internalGetterPrefix+r]});if("void"!==n.returnType){if(e.dataOutNames.includes("out"))throw new a("Duplicate parameter called 'out'! Do not use 'out' as a name for exported variables!",e.context);e.dataOutNames.push("out"),e.dataOutSchema.properties.out={type:n.returnType}}},t.exports=c},{"../../../node_modules/as-bind/dist/as-bind.cjs.js":57,"../../core/compilers/assemblyScriptCompiler.js":1,"../../core/composables/composable.js":3,"../../core/errors/ExecutionError.js":7,"../../core/execution/supportLibrary.js":14,"../../core/runners/runner.js":21}],21:[function(e,t,r){"use strict";function n(){this.setupCompleted=!1}n.prototype.exec=function(e,t,r){},n.prototype.prepare=function(e){},n.prototype.name="Abstract Runner",n.prototype.id="abstract_runner",n.prototype.getHTMLDescription=function(){},n.prototype.calculateBinaryHash=function(e){let t=0;for(let r in e)t=(t<<8)-t+e[r];return t},n.prototype.createDataSchema=function(e){},t.exports=n},{}],22:[function(e,t,r){"use strict";var n=e("../../../node_modules/js-tokens/index.js");function i(){this.forbiddenList={arguments:!0,callee:!0,caller:!0,constructor:!0,eval:!0,prototype:!0,stack:!0,unwatch:!0,valueOf:!0,watch:!0,__proto__:!0,__parent__:!0,this:!0,window:!0,document:!0,"[":!0,"]":!0,Function:!0,with:!0,uneval:!0,toSource:!0,setTimeout:!0,setInterval:!0},this.allowedGlobals={Math:!0,console:!0,true:!0,false:!0}}i.prototype.verify=function(e){try{var t=e.match(n)}catch(e){return{valid:!1,error:e.message}}for(var r=0;r<t.length;r++){var i=t[r].trim();if(i.length>0&&this.forbiddenList.hasOwnProperty(i))return{valid:!1,error:"Invalid usage of "+i}}return{valid:!0,error:""}},i.prototype.get=function(e,t){if("string"==typeof t){if(!e.window&&!{arguments:!0,callee:!0,caller:!0,constructor:!0,eval:!0,prototype:!0,stack:!0,unwatch:!0,valueOf:!0,watch:!0,__proto__:!0,__parent__:!0,this:!0,window:!0,document:!0,"[":!0,"]":!0,Function:!0,with:!0,uneval:!0,toSource:!0,setTimeout:!0,setInterval:!0}.hasOwnProperty(t))return e[t]}else if("number"==typeof t)return e[t];return console.error("Illegal property name: "+t),null},i.prototype.set=function(e,t,r){"string"==typeof t?e.window||{arguments:!0,callee:!0,caller:!0,constructor:!0,eval:!0,prototype:!0,stack:!0,unwatch:!0,valueOf:!0,watch:!0,__proto__:!0,__parent__:!0,this:!0,window:!0,document:!0,"[":!0,"]":!0,Function:!0,with:!0,uneval:!0,toSource:!0,setTimeout:!0,setInterval:!0}.hasOwnProperty(t)?console.error("Illegal property name: "+t):e[t]=r:"number"==typeof t&&(e[t]=r)},i.prototype.sanitize=function(e,t){var r="",n=this.verify(e);if(n.valid){var i=this.allowedGlobals,o=Object.keys(window).filter((function(e){return!i.hasOwnProperty(e)})).join(","),s=/function\s*\(([^()]*)\)\s\{((.|\n)*)\}/gim.exec(e);if(s){var a='"use strict"; var '+o+";"+s[2]+";";return new Function(s[1].split(","),a)}r="Not a valid JS function"}else r=n.error;return"function"==typeof t&&t(r),null},t.exports=i},{"../../../node_modules/js-tokens/index.js":157}],23:[function(e,t,r){"use strict";var n=e("./compile"),i=e("./compile/resolve"),o=e("./cache"),s=e("./compile/schema_obj"),a=e("json-stable-stringify"),l=e("./compile/formats");t.exports=function t(r){if(!(this instanceof t))return new t(r);var f=this;this.opts=r||{},this._schemas={},this._refs={},this._formats=l(this.opts.format),this._cache=this.opts.cache||new o,this._loadingSchemas={},this.validate=d,this.compile=h,this.compileAsync=function(e,t){var r;try{r=_(e)}catch(e){return void setTimeout((function(){t(e)}))}if(r.validate)setTimeout((function(){t(null,r.validate)}));else{if("function"!=typeof f.opts.loadSchema)throw new Error("options.loadSchema should be a function");m(e,t,!0)}},this.addSchema=g,this.addMetaSchema=y,this.validateSchema=v,this.getSchema=b,this.removeSchema=function(e){switch(typeof e){case"string":var t=w(e);f._cache.del(t.jsonStr),delete f._schemas[e],delete f._refs[e];break;case"object":var r=a(e);f._cache.del(r);var n=e.id;n&&(n=i.normalizeId(n),delete f._refs[n])}},this.addFormat=O,this.errorsText=x,this._compile=S,function(){if(!1!==f.opts.meta){y(e("./refs/json-schema-draft-04.json"),c,!0),f._refs["http://json-schema.org/schema"]=c}var t=f.opts.schemas;if(!t)return;if(Array.isArray(t))g(t);else for(var r in t)g(t[r],r)}(),this.opts.formats&&function(){for(var e in f.opts.formats){O(e,f.opts.formats[e])}}();function d(e,t){var r;if("string"==typeof e){if(!(r=b(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=_(e);r=n.validate||S(n)}var i=r(t);return f.errors=r.errors,i}function h(e){var t=_(e);return t.validate||S(t)}function m(e,t,r){var n;try{n=h(e)}catch(r){return void(r.missingSchema?function(r){var n=r.missingSchema;if(f._refs[n]||f._schemas[n])return t(new Error("Schema "+n+" is loaded but"+r.missingRef+"cannot be resolved"));var i=f._loadingSchemas[n];i?"function"==typeof i?f._loadingSchemas[n]=[i,o]:i[i.length]=o:(f._loadingSchemas[n]=o,f.opts.loadSchema(n,(function(e,t){var r=f._loadingSchemas[n];if(delete f._loadingSchemas[n],"function"==typeof r)r(e,t);else for(var i=0;i<r.length;i++)r[i](e,t)})));function o(r,i){if(r)t(r);else{if(!f._refs[n]&&!f._schemas[n])try{g(i,n)}catch(e){return void t(e)}m(e,t)}}}(r):i(r))}function i(e,n){r?setTimeout((function(){t(e,n)})):t(e,n)}i(null,n)}function g(e,t,r,n){if(Array.isArray(e))for(var o=0;o<e.length;o++)g(e[o]);else E(t=i.normalizeId(t||e.id)),(f._schemas[t]=_(e,r)).meta=n}function y(e,t,r){g(e,t,r,!0)}function v(e){var t=e.$schema||c,r=f._formats.uri;f._formats.uri="function"==typeof r?p:u;var n=d(t,e);return f._formats.uri=r,n}function b(e){var t=w(e);switch(typeof t){case"object":return t.validate||S(t);case"string":return b(t)}}function w(e){return e=i.normalizeId(e),f._schemas[e]||f._refs[e]}function _(e,t){if("object"!=typeof e)throw new Error("schema should be object");var r=a(e),n=f._cache.get(r);if(n)return n;var o=i.normalizeId(e.id);if(o&&E(o),!(t||!1===f.opts.validateSchema||v(e))){var l="schema is invalid:"+x();if("log"!=f.opts.validateSchema)throw new Error(l);console.error(l)}var c=i.ids.call(f,e),u=new s({id:o,schema:e,localRefs:c,jsonStr:r});return"#"!=o[0]&&(f._refs[o]=u),f._cache.put(r,u),u}function S(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,o;e.compiling=!0;var r,i=f.opts.removeAdditional;i&&e.meta&&(f.opts.removeAdditional=!1);try{r=n.call(f,e.schema,t,e.localRefs)}finally{e.compiling=!1,i&&(f.opts.removeAdditional=i)}return e.validate=r,e.refs=r.refs,e.refVal=r.refVal,e.root=r.root,r;function o(){var t=e.validate,r=t.apply(null,arguments);return o.errors=t.errors,r}}function x(e,t){if(!(e=e||f.errors))return"No errors";var r=(t=t||{}).separator||", ",n=t.dataVar||"data";return e.reduce((function(e,t){return t?e+n+t.dataPath+" "+t.message+r:e}),"").slice(0,-r.length)}function O(e,t){"string"==typeof t&&(t=new RegExp(t)),f._formats[e]=t}function E(e){if(f._schemas[e]||f._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}};var c="http://json-schema.org/draft-04/schema",u=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i;function p(e){return u.test(e)}},{"./cache":24,"./compile":28,"./compile/formats":27,"./compile/resolve":29,"./compile/schema_obj":31,"./refs/json-schema-draft-04.json":56,"json-stable-stringify":158}],24:[function(e,t,r){"use strict";var n=t.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]}},{}],25:[function(e,t,r){"use strict";t.exports={$ref:e("../dotjs/ref"),anyOf:e("../dotjs/anyOf"),format:e("../dotjs/format"),maxLength:e("../dotjs/maxLength"),minItems:e("../dotjs/minItems"),minimum:e("../dotjs/minimum"),oneOf:e("../dotjs/oneOf"),required:e("../dotjs/required"),dependencies:e("../dotjs/dependencies"),items:e("../dotjs/items"),maxProperties:e("../dotjs/maxProperties"),minLength:e("../dotjs/minLength"),multipleOf:e("../dotjs/multipleOf"),pattern:e("../dotjs/pattern"),uniqueItems:e("../dotjs/uniqueItems"),allOf:e("../dotjs/allOf"),enum:e("../dotjs/enum"),maxItems:e("../dotjs/maxItems"),maximum:e("../dotjs/maximum"),minProperties:e("../dotjs/minProperties"),not:e("../dotjs/not"),properties:e("../dotjs/properties"),validate:e("../dotjs/validate")}},{"../dotjs/allOf":33,"../dotjs/anyOf":34,"../dotjs/dependencies":35,"../dotjs/enum":36,"../dotjs/format":37,"../dotjs/items":38,"../dotjs/maxItems":39,"../dotjs/maxLength":40,"../dotjs/maxProperties":41,"../dotjs/maximum":42,"../dotjs/minItems":43,"../dotjs/minLength":44,"../dotjs/minProperties":45,"../dotjs/minimum":46,"../dotjs/multipleOf":47,"../dotjs/not":48,"../dotjs/oneOf":49,"../dotjs/pattern":50,"../dotjs/properties":51,"../dotjs/ref":52,"../dotjs/required":53,"../dotjs/uniqueItems":54,"../dotjs/validate":55}],26:[function(e,t,r){"use strict";t.exports=function e(t,r){if(t===r)return!0;var n,i=Array.isArray(t),o=Array.isArray(r);if(i&&o){if(t.length!=r.length)return!1;for(n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(i!=o)return!1;if(t&&r&&"object"==typeof t&&"object"==typeof r){var s=Object.keys(t);if(s.length!==Object.keys(r).length)return!1;for(n=0;n<s.length;n++)if(void 0===r[s[n]])return!1;for(n=0;n<s.length;n++)if(!e(t[s[n]],r[s[n]]))return!1;return!0}return!1}},{}],27:[function(e,t,r){"use strict";var n=e("./util"),i=/^\d\d\d\d-(\d\d)-(\d\d)$/,o=[0,31,29,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/,a=/^[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?(\.[a-z](?:(?:[-0-9a-z]{0,61})?[0-9a-z])?)*$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:\#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i;function c(e){return e="full"==e?"full":"fast",n.copy(c[e])}function u(e){var t=e.match(i);if(!t)return!1;var r=+t[1],n=+t[2];return r>=1&&r<=12&&n>=1&&n<=o[r]}t.exports=c,c.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t ][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)?(?:\:|\/)\/?[^\s]*$/i,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f},c.full={date:u,"date-time":function(e){var t=e.toLowerCase().split("t");if(!u(t[0]))return!1;var r=t[1].match(s);if(!r)return!1;var n=r[1],i=r[2],o=r[3];return n<=23&&i<=59&&o<=59},uri:function(e){return p.test(e)&&l.test(e)},email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&a.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f};var p=/\/|\:/;function f(e){try{return new RegExp(e),!0}catch(e){return!1}}},{"./util":32}],28:[function(require,module,exports){"use strict";var resolve=require("./resolve"),util=require("./util"),equal=require("./equal");try{var beautify=require("js-beautify").js_beautify}catch(e){}var RULES=require("./rules"),validateGenerator=require("../dotjs/validate");function compile(schema,root,localRefs,baseId){var self=this,refVal=[void 0],refs={},patterns=[],patternsHash={};root=root||{schema:schema,refVal:refVal,refs:refs};var formats=this._formats;return localCompile(schema,root,localRefs,baseId);function localCompile(_schema,_root,localRefs,baseId){var isRoot=!_root||_root&&_root.schema==_schema;if(_root.schema!=root.schema)return compile.call(self,_schema,_root,localRefs,baseId);var validateCode=validateGenerator({isTop:!0,schema:_schema,isRoot:isRoot,baseId:baseId,root:_root,schemaPath:"",errorPath:'""',RULES:RULES,validate:validateGenerator,util:util,resolve:resolve,resolveRef:resolveRef,usePattern:usePattern,opts:self.opts,formats:formats}),validate;if(validateCode=refsCode(refVal)+patternsCode(patterns)+validateCode,self.opts.beautify){var opts=!0===self.opts.beautify?{indent_size:2}:self.opts.beautify;beautify?validateCode=beautify(validateCode,opts):console.error('"npm install js-beautify" to use beautify option')}return eval(validateCode),refVal[0]=validate,validate.schema=_schema,validate.errors=null,validate.refs=refs,validate.refVal=refVal,validate.root=isRoot?validate:_root,validate}function resolveRef(e,t,r){t=resolve.url(e,t);var n,i,o=refs[t];if(void 0!==o)return resolvedRef(n=refVal[o],i="refVal["+o+"]");if(!r){var s=root.refs[t];if(void 0!==s)return resolvedRef(n=root.refVal[s],i=addLocalRef(t,n))}i=addLocalRef(t);var a=resolve.call(self,localCompile,root,t);if(!a){var l=localRefs&&localRefs[t];l&&(a=resolve.inlineRef(l,self.opts.inlineRefs)?l:compile.call(self,l,root,localRefs,e))}return a?(replaceLocalRef(t,a),resolvedRef(a,i)):void 0}function addLocalRef(e,t){var r=refVal.length;return refVal[r]=t,refs[e]=r,"refVal"+r}function replaceLocalRef(e,t){var r=refs[e];refVal[r]=t}function resolvedRef(e,t){return"object"==typeof e?{schema:e,code:t}:t}function usePattern(e){var t=patternsHash[e];return void 0===t&&(t=patternsHash[e]=patterns.length,patterns[t]=e),"pattern"+t}}function patternsCode(e){return _arrCode(e,patternCode)}function patternCode(e,t){return"var pattern"+e+" = new RegExp("+util.toQuotedString(t[e])+");"}function refsCode(e){return _arrCode(e,refCode)}function refCode(e,t){return t[e]?"var refVal"+e+" = refVal["+e+"];":""}function _arrCode(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}module.exports=compile;var ucs2length=util.ucs2length},{"../dotjs/validate":55,"./equal":26,"./resolve":29,"./rules":30,"./util":32}],29:[function(e,t,r){"use strict";var n=e("url"),i=e("./equal"),o=e("./util"),s=e("./schema_obj");function a(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return a.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return d(n.schema,this.opts.inlineRefs)?n.schema:n.validate||this._compile(n);var i,o,c,u=l.call(this,t,r);return u&&(i=u.schema,t=u.root,c=u.baseId),i instanceof s?o=i.validate||e.call(this,i.schema,t,void 0,c):i&&(o=d(i,this.opts.inlineRefs)?i:e.call(this,i,t,void 0,c)),o}function l(e,t){var r=n.parse(t,!1,!0),i=v(r),o=y(e.schema.id);if(i!==o){var a=w(i),l=this._refs[a];if("string"==typeof l)return c.call(this,e,l,r);if(l instanceof s)l.validate||this._compile(l),e=l;else if((l=this._schemas[a])instanceof s){if(l.validate||this._compile(l),a==w(t))return{schema:l,root:e,baseId:o};e=l}if(!e.schema)return;o=y(e.schema.id)}return p.call(this,r,o,e.schema,e)}function c(e,t,r){var n=l.call(this,e,t);if(n){var i=n.schema,o=n.baseId;return e=n.root,i.id&&(o=_(o,i.id)),p.call(this,r,o,i,e)}}t.exports=a,a.normalizeId=w,a.fullPath=y,a.url=_,a.ids=function(e){var t=w(e.id),r={};return function e(t,o,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)e.call(this,t[a],o+"/"+a,s);else if(t&&"object"==typeof t){if("string"==typeof t.id){var l=s=s?n.resolve(s,t.id):w(t.id),c=this._refs[l];if("string"==typeof c&&(c=this._refs[c]),c&&c.schema){if(!i(t,c.schema))throw new Error('id "'+l+'" resolves to more than one schema')}else if(l!=w(o))if("#"==l[0]){if(r[l]&&!i(t,r[l]))throw new Error('id "'+l+'" resolves to more than one schema');r[l]=t}else this._refs[l]=o}for(var u in t)e.call(this,t[u],o+"/"+g(u),s)}}.call(this,e,y(t,!1),t),r},a.inlineRef=d;var u=o.toHash(["properties","patternProperties","enum"]);function p(e,t,r,n){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var i=e.hash.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(!(r=r[s=decodeURIComponent(s).replace(/~1/g,"/").replace(/~0/g,"~")]))break;if(r.id&&!u[s]&&(t=_(t,r.id)),r.$ref){var a=_(t,r.$ref),c=l.call(this,n,a);c&&(r=c.schema,n=c.root)}}}return r&&r!=n.schema?{schema:r,root:n,baseId:t}:void 0}}var f=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(e,t){return void 0===t?h(e):t?m(e)<=t:void 0}function h(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!h(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!h(t))return!1}return!0}function m(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if("object"==typeof(t=e[n])&&(r+=m(t)),r==1/0)return 1/0}else for(var i in e){if("$ref"==i)return 1/0;if(f[i])r++;else if("object"==typeof(t=e[i])&&(r+=m(t)+1),r==1/0)return 1/0}return r}function g(e){return e=e.replace(/~/g,"~0").replace(/\//g,"~1"),encodeURIComponent(e)}function y(e,t){return!1!==t&&(e=w(e)),v(n.parse(e,!1,!0))}function v(e){return(e.protocol||"")+(e.protocol?"//":"")+(e.host||"")+(e.path||"")+"#"}var b=/#\/?$/;function w(e){return e?e.replace(b,""):""}function _(e,t){return t=w(t),n.resolve(e,t)}},{"./equal":26,"./schema_obj":31,"./util":32,url:233}],30:[function(e,t,r){"use strict";var n=e("./_rules"),i=e("./util"),o=t.exports=[{type:"number",rules:["maximum","minimum","multipleOf"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","properties"]},{rules:["$ref","enum","not","anyOf","oneOf","allOf"]}];o.all=["type","additionalProperties","patternProperties"],o.forEach((function(e){e.rules=e.rules.map((function(e){return o.all.push(e),{keyword:e,code:n[e]}}))})),o.all=i.toHash(o.all)},{"./_rules":25,"./util":32}],31:[function(e,t,r){"use strict";var n=e("./util");t.exports=function(e){n.copy(e,this)}},{"./util":32}],32:[function(e,t,r){"use strict";function n(e,t,r){var n=r?" !== ":" === ",i=r?" || ":" && ",o=r?"!":"",s=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+i+"typeof "+t+n+'"object"'+i+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+i+s+"("+t+" % 1))";default:return"typeof "+t+n+'"'+e+'"'}}function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}t.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t){if(1===e.length)return n(e[0],t,!0);var r="",o=i(e);for(var s in o.array&&o.object&&(r=o.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)r+=(r?" && ":"")+n(s,t,!0);return r},toHash:i,getProperty:a,escapeQuotes:l,ucs2length:function(e){var t,r=0,n=e.length,i=0;for(;i<n;)r++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<n&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function(e){return e.replace(c,"").replace(u,"").replace(p,"if (!($1))")},cleanUpVarErrors:function(e){var t=e.match(f);return t&&2===t.length?e.replace(d,"").replace("return errors === 0;","validate.errors = null; return true;"):e},schemaHasRules:function(e,t){for(var r in e)if(t[r])return!0},stableStringify:e("json-stable-stringify"),toQuotedString:h,getPathExpr:function(e,t,r,n){return m(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=h(r?"/"+t.replace(/~/g,"~0").replace(/\//g,"~1"):a(t));return m(e,n)}};var o=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function a(e){return o.test(e)?"."+e:"['"+e.replace(s,"\\$&")+"']"}function l(e){return e.replace(s,"\\$&")}var c=/else\s*{\s*}/g,u=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,p=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var f=/[^v\.]errors/g,d=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g;function h(e){return"'"+l(e)+"'"}function m(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}},{"json-stable-stringify":158}],33:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel,e.schema.allOf),n=e.schemaPath+".allOf",i=!e.opts.allErrors,o=e.util.copy(e),s="";o.level++;var a=r;if(a)for(var l,c=-1,u=a.length-1;c<u;)l=a[c+=1],e.util.schemaHasRules(l,e.RULES.all)&&(o.schema=l,o.schemaPath=n+"["+c+"]",t+=" "+e.validate(o)+" ",i&&(t+=" if (valid"+o.level+") { ",s+="}"));return i&&(t+=" "+s.slice(0,-1)),t=e.util.cleanUpCode(t)}},{}],34:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.anyOf,o=e.schemaPath+".anyOf",s=!e.opts.allErrors,a="data"+(n||""),l="valid"+r,c="errs"+r,u=e.util.copy(e),p="";u.level++;var f=i.every((function(t){return e.util.schemaHasRules(t,e.RULES.all)}));if(f){t+=" var "+c+" = errors; var "+l+" = false;  ";var d=e.compositeRule;e.compositeRule=u.compositeRule=!0;var h=i;if(h)for(var m,g=-1,y=h.length-1;g<y;)m=h[g+=1],u.schema=m,u.schemaPath=o+"["+g+"]",t+=" "+e.validate(u)+" "+l+" = "+l+" || valid"+u.level+"; if (!"+l+") { ",p+="}";e.compositeRule=u.compositeRule=d,t+=" "+p+" if (!"+l+") {  var err =   { keyword: 'anyOf', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match some schema in anyOf' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else { errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } "),t=e.util.cleanUpCode(t)}else s&&(t+=" if (true) { ");return t}},{}],35:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.dependencies,o=e.schemaPath+".dependencies",s=!e.opts.allErrors,a="data"+(n||""),l="errs"+r,c=e.util.copy(e),u="";c.level++;var p={},f={};for(m in i){var d=i[m],h=Array.isArray(d)?f:p;h[m]=d}for(var m in t+="var "+l+" = errors;",f){t+=" if ("+a+e.util.getProperty(m)+" !== undefined) { ",t+=" if ( ";var g=h=f[m];if(g)for(var y,v=-1,b=g.length-1;v<b;)y=g[v+=1],v&&(t+=" || "),t+=" "+a+e.util.getProperty(y)+" === undefined ";t+=") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'dependencies', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should have ",1==h.length?t+="property "+e.util.escapeQuotes(h[0]):t+="properties "+e.util.escapeQuotes(h.join(", ")),t+=" when property "+e.util.escapeQuotes(m)+" is present' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { n: "+h.length+", deps: '",1==h.length?t+=""+e.util.escapeQuotes(h[0]):t+=""+e.util.escapeQuotes(h.join(", ")),t+="', property: '"+e.util.escapeQuotes(m)+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'dependencies', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should have ",1==h.length?t+="property "+e.util.escapeQuotes(h[0]):t+="properties "+e.util.escapeQuotes(h.join(", ")),t+=" when property "+e.util.escapeQuotes(m)+" is present' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { n: "+h.length+", deps: '",1==h.length?t+=""+e.util.escapeQuotes(h[0]):t+=""+e.util.escapeQuotes(h.join(", ")),t+="', property: '"+e.util.escapeQuotes(m)+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" }   ",s&&(u+="}",t+=" else { "),t+=" }"}for(var m in p){d=p[m];e.util.schemaHasRules(d,e.RULES.all)&&(t+=" valid"+c.level+" = true; if ("+a+"['"+m+"'] !== undefined) { ",c.schema=d,c.schemaPath=o+e.util.getProperty(m),t+=" "+e.validate(c)+" }  ",s&&(t+=" if (valid"+c.level+") { ",u+="}"))}return s&&(t+="   "+u+" if ("+l+" == errors) {"),t=e.util.cleanUpCode(t)}},{}],36:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=(e.schema.enum,e.schemaPath+".enum"),o=!e.opts.allErrors,s="data"+(n||""),a="valid"+r,l="i"+r;return t+="var enumSchema"+r+" = validate.schema"+i+" , "+a+" = false;for (var "+l+"=0; "+l+"<enumSchema"+r+".length; "+l+"++) if (equal("+s+", enumSchema"+r+"["+l+"])) { "+a+" = true; break; } if (!"+a+") {  ",!e.compositeRule&&o?(t+=" validate.errors = [ { keyword: 'enum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be equal to one of values' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'enum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be equal to one of values' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" }",o&&(t+=" else { "),t}},{}],37:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.format,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||""),s=e.formats[n];return!1!==e.opts.format&&s?(t+=" if (!   ",t+="function"==typeof s?" formats"+e.util.getProperty(n)+" ("+o+") ":" formats"+e.util.getProperty(n)+" .test("+o+") ",t+=") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'format', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match format "+e.util.escapeQuotes(n)+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'format', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match format "+e.util.escapeQuotes(n)+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } ",i&&(t+=" else { ")):i&&(t+=" if (true) { "),t}},{}],38:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.items,o=e.schemaPath+".items",s=!e.opts.allErrors,a="data"+(n||""),l="valid"+r,c="errs"+r,u=e.util.copy(e),p="";u.level++;var f="data"+(u.dataLevel=e.dataLevel+1);if(t+="var "+c+" = errors;var "+l+";",Array.isArray(i)){var d=e.schema.additionalItems;!1===d&&(t+=" "+l+" = "+a+".length <= "+i.length+";  if (!"+l+") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'additionalItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+i.length+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: false "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'additionalItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+i.length+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: false "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" }  ",s&&(p+="}",t+=" else { "));var h=i;if(h)for(var m,g=-1,y=h.length-1;g<y;)if(m=h[g+=1],e.util.schemaHasRules(m,e.RULES.all)){t+=" valid"+u.level+" = true; if ("+a+".length > "+g+") { ",u.schema=m,u.schemaPath=o+"["+g+"]",u.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var v=a+"["+g+"]",b=e.validate(u);e.util.varOccurences(b,f)<2?t+=" "+e.util.varReplace(b,f,v)+" ":t+=" var "+f+" = "+v+"; "+b+" ",t+=" }  ",s&&(t+=" if (valid"+u.level+") { ",p+="}")}if("object"==typeof d&&e.util.schemaHasRules(d,e.RULES.all)){u.schema=d,u.schemaPath=e.schemaPath+".additionalItems",t+=" valid"+u.level+" = true; if ("+a+".length > "+i.length+") {  for (var i"+r+" = "+i.length+"; i"+r+" < "+a+".length; i"+r+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,"i"+r,e.opts.jsonPointers,!0);v=a+"[i"+r+"]",b=e.validate(u);e.util.varOccurences(b,f)<2?t+=" "+e.util.varReplace(b,f,v)+" ":t+=" var "+f+" = "+v+"; "+b+" ",s&&(t+=" if (!valid"+u.level+") break; "),t+=" } }  ",s&&(t+=" if (valid"+u.level+") { ",p+="}")}}else if(e.util.schemaHasRules(i,e.RULES.all)){u.schema=i,u.schemaPath=o,t+="  for (var i"+r+" = 0; i"+r+" < "+a+".length; i"+r+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,"i"+r,e.opts.jsonPointers,!0);v=a+"[i"+r+"]",b=e.validate(u);e.util.varOccurences(b,f)<2?t+=" "+e.util.varReplace(b,f,v)+" ":t+=" var "+f+" = "+v+"; "+b+" ",s&&(t+=" if (!valid"+u.level+") break; "),t+=" }  ",s&&(t+=" if (valid"+u.level+") { ",p+="}")}return s&&(t+=" "+p+" if ("+c+" == errors) {"),t=e.util.cleanUpCode(t)}},{}],39:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.maxItems,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if ("+o+".length > "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'maxItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+n+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'maxItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+n+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],40:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.maxLength,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if ( ",!1===e.opts.unicode?t+=" "+o+".length ":t+=" ucs2length("+o+") ",t+=" > "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'maxLength', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be longer than "+n+" characters' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'maxLength', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be longer than "+n+" characters' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],41:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.maxProperties,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if (Object.keys("+o+").length > "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'maxProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+n+" properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'maxProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have more than "+n+" properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],42:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.maximum,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||""),s=!0===e.schema.exclusiveMaximum,a=s?"<":"<=";return t+="if ("+o+" "+(s?">=":">")+" "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'maximum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be "+a+" "+n+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { condition: '"+a+" "+n+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'maximum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be "+a+" "+n+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { condition: '"+a+" "+n+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],43:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.minItems,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if ("+o+".length < "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'minItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have less than "+n+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'minItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have less than "+n+" items' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],44:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.minLength,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if ( ",!1===e.opts.unicode?t+=" "+o+".length ":t+=" ucs2length("+o+") ",t+=" < "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'minLength', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be shorter than "+n+" characters' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'minLength', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be shorter than "+n+" characters' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],45:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.minProperties,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return t+="if (Object.keys("+o+").length < "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'minProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have less than "+n+" properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'minProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have less than "+n+" properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],46:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.minimum,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||""),s=!0===e.schema.exclusiveMinimum,a=s?">":">=";return t+="if ("+o+" "+(s?"<=":"<")+" "+n+") {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'minimum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be "+a+" "+n+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { condition: '"+a+" "+n+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'minimum', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be "+a+" "+n+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+n+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { condition: '"+a+" "+n+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],47:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.multipleOf,o=(e.schemaPath,!e.opts.allErrors),s="data"+(n||"");return t+="var division"+r+" = "+s+" / "+i+";if ("+s+" / "+i+" !== parseInt(division"+r+")) {  ",!e.compositeRule&&o?(t+=" validate.errors = [ { keyword: 'multipleOf', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be multiple of "+i+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'multipleOf', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be multiple of "+i+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",o&&(t+=" else { "),t}},{}],48:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.not,o=e.schemaPath+".not",s=!e.opts.allErrors,a="data"+(n||""),l="errs"+r,c=e.util.copy(e);if(c.level++,e.util.schemaHasRules(i,e.RULES.all)){c.schema=i,c.schemaPath=o,t+=" var "+l+" = errors;  ";var u=e.compositeRule;e.compositeRule=c.compositeRule=!0,t+=" "+e.validate(c)+"  ",e.compositeRule=c.compositeRule=u,t+=" if (valid"+c.level+") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'not', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be valid' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'not', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be valid' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } else { errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   { keyword: 'not', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT be valid' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s&&(t+=" if (false) { ");return t}},{}],49:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.oneOf,o=e.schemaPath+".oneOf",s=!e.opts.allErrors,a="data"+(n||""),l="valid"+r,c="errs"+r,u=e.util.copy(e),p="";u.level++,t+="var "+c+" = errors;var prevValid"+r+" = false;var "+l+" = false; ";var f=e.compositeRule;e.compositeRule=u.compositeRule=!0;var d=i;if(d)for(var h,m=-1,g=d.length-1;m<g;)h=d[m+=1],e.util.schemaHasRules(h,e.RULES.all)?(u.schema=h,u.schemaPath=o+"["+m+"]",t+=" "+e.validate(u)+" "):t+=" var valid"+u.level+" = true; ",m&&(t+=" if (valid"+u.level+" && prevValid"+r+") "+l+" = false; else { ",p+="}"),t+=" if (valid"+u.level+") "+l+" = prevValid"+r+" = true;";return e.compositeRule=u.compositeRule=f,t+=p+"if (!"+l+") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'oneOf', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match exactly one schema in oneOf' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'oneOf', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match exactly one schema in oneOf' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} else { errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t}},{}],50:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.pattern,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");return new RegExp(n),t+="if (! "+e.usePattern(n)+".test("+o+") ) {  ",!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: 'pattern', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match pattern \""+e.util.escapeQuotes(n)+"\"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'pattern', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should match pattern \""+e.util.escapeQuotes(n)+"\"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+="} ",i&&(t+=" else { "),t}},{}],51:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.properties,o=e.schemaPath+".properties",s=!e.opts.allErrors,a="data"+(n||""),l="errs"+r,c=e.util.copy(e),u="";c.level++;var p="data"+(c.dataLevel=e.dataLevel+1),f=Object.keys(i||{}),d=e.schema.patternProperties||{},h=Object.keys(d),m=e.schema.additionalProperties,g=f.length||h.length,y=!1===m,v="object"==typeof m&&Object.keys(m).length,b=e.opts.removeAdditional,w=y||v||b,_=e.util.toHash(e.schema.required||[]);if(t+="var "+l+" = errors;var valid"+c.level+" = true;",w){if(t+=" for (var key"+r+" in "+a+") { ",g){if(t+=" var isAdditional"+r+" = !(false ",f.length)if(f.length>5)t+=" || validate.schema"+o+"[key"+r+"] ";else{var S=f;if(S)for(var x=-1,O=S.length-1;x<O;)j=S[x+=1],t+=" || key"+r+" == "+e.util.toQuotedString(j)+" "}if(h.length){var E=h;if(E)for(var C=-1,P=E.length-1;C<P;)F=E[C+=1],t+=" || "+e.usePattern(F)+".test(key"+r+") "}t+=" ); if (isAdditional"+r+") { "}if("all"==b)t+=" delete "+a+"[key"+r+"]; ";else{var I=e.errorPath;if(e.errorPath=e.util.getPathExpr(e.errorPath,"key"+r,e.opts.jsonPointers),y)b?t+=" delete "+a+"[key"+r+"]; ":(t+=" valid"+c.level+" = false;  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'additionalProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have additional properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: false "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }]; return false; "):(t+="  var err =   { keyword: 'additionalProperties', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have additional properties' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: false "),e.opts.verbose&&(t+=" , data: "+a+" "),t+="  }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),s&&(t+=" break; "));else if(v)if("failing"==b){t+=" var "+l+" = errors;  ";var k=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=m,c.schemaPath=e.schemaPath+".additionalProperties",c.errorPath=e.errorPath;var L=a+"[key"+r+"]",T=e.validate(c);e.util.varOccurences(T,p)<2?t+=" "+e.util.varReplace(T,p,L)+" ":t+=" var "+p+" = "+L+"; "+T+" ",t+=" if (!valid"+c.level+") { errors = "+l+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+a+"[key"+r+"]; }  ",e.compositeRule=c.compositeRule=k}else{c.schema=m,c.schemaPath=e.schemaPath+".additionalProperties",c.errorPath=e.errorPath;L=a+"[key"+r+"]",T=e.validate(c);e.util.varOccurences(T,p)<2?t+=" "+e.util.varReplace(T,p,L)+" ":t+=" var "+p+" = "+L+"; "+T+" ",s&&(t+=" if (!valid"+c.level+") break; ")}e.errorPath=I}g&&(t+=" } "),t+=" }  ",s&&(t+=" if (valid"+c.level+") { ",u+="}")}if(f.length){var A=f;if(A)for(var j,M=-1,R=A.length-1;M<R;){var D=i[j=A[M+=1]];if(e.util.schemaHasRules(D,e.RULES.all)){c.schema=D;var N=e.util.getProperty(j);L=a+N;c.schemaPath=o+N,c.errorPath=e.util.getPath(e.errorPath,j,e.opts.jsonPointers);T=e.validate(c);if(e.util.varOccurences(T,p)<2){T=e.util.varReplace(T,p,L);var V=L}else{V=p;t+=" var "+p+" = "+L+"; "}if(_[j]){t+=" if ("+V+" === undefined) { valid"+c.level+" = false; ";I=e.errorPath;var U=e.util.escapeQuotes(j);e.errorPath=e.util.getPath(I,j,e.opts.jsonPointers),!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+U+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+U+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),e.errorPath=I,t+=" } else { "}else t+=s?" if ("+V+" === undefined) { valid"+c.level+" = true; } else { ":" if ("+V+" !== undefined) { ";t+=" "+T+" } "}s&&(t+=" if (valid"+c.level+") { ",u+="}")}}var B=h;if(B)for(var F,W=-1,q=B.length-1;W<q;){D=d[F=B[W+=1]];if(e.util.schemaHasRules(D,e.RULES.all)){c.schema=D,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(F),t+=" for (var key"+r+" in "+a+") { if ("+e.usePattern(F)+".test(key"+r+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,"key"+r,e.opts.jsonPointers);L=a+"[key"+r+"]",T=e.validate(c);e.util.varOccurences(T,p)<2?t+=" "+e.util.varReplace(T,p,L)+" ":t+=" var "+p+" = "+L+"; "+T+" ",s&&(t+=" if (!valid"+c.level+") break; "),t+=" } ",s&&(t+=" else valid"+c.level+" = true; "),t+=" }  ",s&&(t+=" if (valid"+c.level+") { ",u+="}")}}return s&&(t+=" "+u+" if ("+l+" == errors) {"),t=e.util.cleanUpCode(t)}},{}],52:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=(e.level,e.dataLevel),n=e.schema.$ref,i=(e.schemaPath,!e.opts.allErrors),o="data"+(r||"");if("#"==n||"#/"==n)e.isRoot?(t+="  if (! validate("+o+", (dataPath || '')",'""'!=e.errorPath&&(t+=" + "+e.errorPath),t+=") ) { if (vErrors === null) vErrors = validate.errors; else vErrors = vErrors.concat(validate.errors); errors = vErrors.length; } ",i&&(t+=" else { ")):(t+="  if (! root.refVal[0]("+o+", (dataPath || '')",'""'!=e.errorPath&&(t+=" + "+e.errorPath),t+=") ) { if (vErrors === null) vErrors = root.refVal[0].errors; else vErrors = vErrors.concat(root.refVal[0].errors); errors = vErrors.length; } ",i&&(t+=" else { "));else{var s=e.resolveRef(e.baseId,n,e.isRoot);if(void 0===s){var a="can't resolve reference "+n+" from id "+e.baseId;if("fail"==e.opts.missingRefs)console.log(a),!e.compositeRule&&i?(t+=" validate.errors = [ { keyword: '$ref', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(n)+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: '$ref', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(n)+"' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+e.util.toQuotedString(n)+" "),e.opts.verbose&&(t+=" , data: "+o+" "),e.opts.i18n&&(t+=", params: { escaped: '"+e.util.escapeQuotes(n)+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),i&&(t+=" if (false) { ");else{if("ignore"!=e.opts.missingRefs){var l=new Error(a);throw l.missingRef=e.resolve.url(e.baseId,n),l.missingSchema=e.resolve.normalizeId(e.resolve.fullPath(l.missingRef)),l}console.log(a),i&&(t+=" if (true) { ")}}else if("string"==typeof s)t+="  if (! "+s+"("+o+", (dataPath || '')",'""'!=e.errorPath&&(t+=" + "+e.errorPath),t+=") ) { if (vErrors === null) vErrors = "+s+".errors; else vErrors = vErrors.concat("+s+".errors); errors = vErrors.length; } ",i&&(t+=" else { ");else{var c=e.util.copy(e);c.level++,c.schema=s.schema,c.schemaPath="";var u=e.validate(c);/validate\.schema/.test(u)?t+=" var rootSchema"+c.level+" = validate.schema; validate.schema = "+s.code+"; "+u+" validate.schema = rootSchema"+c.level+"; ":t+=" "+u+" ",i&&(t+=" if (valid"+c.level+") { ")}}return t}},{}],53:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.required,o=e.schemaPath+".required",s=!e.opts.allErrors,a="data"+(n||""),l="valid"+r;if(e.schema.properties&&Object.keys(e.schema.properties).length){var c=[],u=i;if(u)for(var p=-1,f=u.length-1;p<f;){w=u[p+=1];var d=e.schema.properties[w];d&&e.util.schemaHasRules(d,e.RULES.all)||(c[c.length]=w)}}else c=i;if(c.length){var h=e.errorPath;if(s)if(t+=" var missing"+r+"; ",c.length<=20){t+=" if ( ";var m=c;if(m)for(var g=-1,y=m.length-1;g<y;){w=m[g+=1],g&&(t+=" || "),t+=" ( "+a+(S=e.util.getProperty(w))+" === undefined && (missing"+r+" = "+e.util.toQuotedString(e.opts.jsonPointers?w:S)+") ) "}t+=") { ";var v="' + "+(x="missing"+r)+" + '";e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(h,x,!0):h+" + "+x,!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } else { "}else{t+="  var schema"+r+" = validate.schema"+o+"; ";v="' + \"'\" + "+(x="schema"+r+"["+(g="i"+r)+"]")+" + \"'\" + '";e.errorPath=e.util.getPathExpr(h,x,e.opts.jsonPointers),t+=" for (var "+g+" = 0; "+g+" < schema"+r+".length; "+g+"++) { var "+l+" = "+a+"[schema"+r+"["+g+"]] !== undefined; if (!"+l+") break; }  if (!"+l+") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } else { "}else if(c.length<=20){var b=c;if(b){g=-1;for(var w,_=b.length-1;g<_;){w=b[g+=1];var S=e.util.getProperty(w);v=e.util.escapeQuotes(S);e.errorPath=e.util.getPath(h,w,e.opts.jsonPointers),t+=" if ("+a+S+" === undefined) {  var err =   { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}else{t+="  var schema"+r+" = validate.schema"+o+"; ";var x;v="' + \"'\" + "+(x="schema"+r+"["+(g="i"+r)+"]")+" + \"'\" + '";e.errorPath=e.util.getPathExpr(h,x,e.opts.jsonPointers),t+=" for (var "+g+" = 0; "+g+" < schema"+r+".length; "+g+"++) { if ("+a+"[schema"+r+"["+g+"]] === undefined) {  var err =   { keyword: 'required', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'is a required property' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: validate.schema"+o+" "),e.opts.verbose&&(t+=" , data: "+a+" "),e.opts.i18n&&(t+=", params: { missingProperty: '"+v+"' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } "}e.errorPath=h}else s&&(t+=" if (true) {");return t}},{}],54:[function(e,t,r){"use strict";t.exports=function(e){var t=" ",r=e.level,n=e.dataLevel,i=e.schema.uniqueItems,o=(e.schemaPath,!e.opts.allErrors),s="data"+(n||""),a="valid"+r;return i&&!1!==e.opts.uniqueItems?(t+=" var "+a+" = true; if ("+s+".length > 1) { var i = "+s+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+s+"[i], "+s+"[j])) { "+a+" = false; break outer; } } } } if (!"+a+") {  ",!e.compositeRule&&o?(t+=" validate.errors = [ { keyword: 'uniqueItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),e.opts.i18n&&(t+=", params: { i: i, j: j }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'uniqueItems', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: "+i+" "),e.opts.verbose&&(t+=" , data: "+s+" "),e.opts.i18n&&(t+=", params: { i: i, j: j }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } ",o&&(t+=" else { ")):o&&(t+=" if (true) { "),t}},{}],55:[function(e,t,r){"use strict";t.exports=function(e){var t="";if(e.isTop){var r=e.isTop,n=e.level=0,i=(e.dataLevel=0,"data");e.rootId=e.resolve.fullPath(e.root.schema.id),e.baseId=e.baseId||e.rootId,delete e.isTop,t+=" validate = function (data, dataPath) { 'use strict'; var vErrors = null; ",t+=" var errors = 0;     "}else{n=e.level,i="data"+(e.dataLevel||"");e.schema.id&&(e.baseId=e.resolve.url(e.baseId,e.schema.id)),t+=" var errs_"+n+" = errors;"}var o="valid"+n,s=!e.opts.allErrors,a="",l="",c=e.schema.type,u=e.RULES;if(u)for(var p,f=-1,d=u.length-1;f<d;)if(_(p=u[f+=1])){p.type&&(t+=" if ("+e.util.checkDataType(p.type,i)+") { ");var h=p.rules;if(h)for(var m,g=-1,y=h.length-1;g<y;)S(m=h[g+=1])&&(t+=" "+m.code(e)+" ",s&&(a+="}"));if(s&&(t+=" "+a+" ",a=""),p.type&&(t+=" } ",c&&c===p.type)){var v=!0;t+=" else {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'type', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=b?""+c.join(","):""+c,t+="' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: ",t+=b?"['"+c.join("','")+"']":"'"+c+"'"),e.opts.verbose&&(t+=" , data: "+i+" "),e.opts.i18n&&(t+=", params: { type: '",t+=b?""+c.join(","):""+c,t+="' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'type', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=b?""+c.join(","):""+c,t+="' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: ",t+=b?"['"+c.join("','")+"']":"'"+c+"'"),e.opts.verbose&&(t+=" , data: "+i+" "),e.opts.i18n&&(t+=", params: { type: '",t+=b?""+c.join(","):""+c,t+="' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" } "}s&&(t+=" if (errors === ",t+=r?"0":"errs_"+n,t+=") { ",l+="}")}if(c&&!v){e.schemaPath;var b=Array.isArray(c),w=b?"checkDataTypes":"checkDataType";t+=" if ("+e.util[w](c,i,!0)+") {  ",!e.compositeRule&&s?(t+=" validate.errors = [ { keyword: 'type', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=b?""+c.join(","):""+c,t+="' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: ",t+=b?"['"+c.join("','")+"']":"'"+c+"'"),e.opts.verbose&&(t+=" , data: "+i+" "),e.opts.i18n&&(t+=", params: { type: '",t+=b?""+c.join(","):""+c,t+="' }"),t+=" }]; return false; "):(t+="  var err =   { keyword: 'type', dataPath: (dataPath || '') + "+e.errorPath+" ",!1!==e.opts.messages&&(t+=" , message: 'should be ",t+=b?""+c.join(","):""+c,t+="' "),(e.opts.verbose||e.opts.i18n)&&(t+=" , schema: ",t+=b?"['"+c.join("','")+"']":"'"+c+"'"),e.opts.verbose&&(t+=" , data: "+i+" "),e.opts.i18n&&(t+=", params: { type: '",t+=b?""+c.join(","):""+c,t+="' }"),t+=" }; if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "),t+=" }"}function _(e){for(var t=0;t<e.rules.length;t++)if(S(e.rules[t]))return!0}function S(t){return void 0!==e.schema[t.keyword]||"properties"==t.keyword&&(!1===e.schema.additionalProperties||"object"==typeof e.schema.additionalProperties||e.schema.patternProperties&&Object.keys(e.schema.patternProperties).length)}return s&&(t+=" "+l+" "),r?(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       ",t+=" }"):t+=" var "+o+" = errors === errs_"+n+";",t=e.util.cleanUpCode(t),r&&s&&(t=e.util.cleanUpVarErrors(t)),t}},{}],56:[function(e,t,r){t.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n="undefined"!=typeof BigUint64Array,i=Symbol(),o=new TextDecoder("utf-16le",{fatal:!0});function s(e,t){let r=new Uint32Array(e)[t+-4>>>2]>>>1;const n=new Uint16Array(e,t,r);if(r<=192)return String.fromCharCode(...n);try{return o.decode(n)}catch(e){let t="",i=0;for(;r-i>1024;)t+=String.fromCharCode(...n.subarray(i,i+=1024));return t+String.fromCharCode(...n.subarray(i))}}function a(e){const t={};function r(e,t){return e?s(e.buffer,t):"<yet unknown>"}const n=e.env=e.env||{};return n.abort=n.abort||function(e,i,o,s){const a=t.memory||n.memory;throw Error(`abort: ${r(a,e)} at ${r(a,i)}:${o}:${s}`)},n.trace=n.trace||function(e,i,...o){const s=t.memory||n.memory;console.log(`trace: ${r(s,e)}${i?" ":""}${o.slice(0,i).join(", ")}`)},n.seed=n.seed||Date.now,e.Math=e.Math||Math,e.Date=e.Date||Date,t}const l=function(){throw Error("Operation requires compiling with --exportRuntime")};function c(e,t){const r=t.exports,i=r.memory,o=r.table,a=r.__new||l,c=r.__pin||l,u=r.__unpin||l,p=r.__collect||l,f=r.__rtti_base,d=f?function(e){return e[f>>>2]}:l;function m(e){const t=function(e){const t=new Uint32Array(i.buffer);if((e>>>=0)>=d(t))throw Error(`invalid id: ${e}`);return t[(f+4>>>2)+2*e]}(e);if(!(7&t))throw Error(`not an array: ${e}, flags=${t}`);return t}function g(e){const t=new Uint32Array(i.buffer);if((e>>>=0)>=d(t))throw Error(`invalid id: ${e}`);return t[(f+4>>>2)+2*e+1]}function y(e){return 31-Math.clz32(e>>>6&31)}function v(e,t,r){const n=i.buffer;if(r)switch(e){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(n);case 1:return new(t?Int16Array:Uint16Array)(n);case 2:return new(t?Int32Array:Uint32Array)(n);case 3:return new(t?BigInt64Array:BigUint64Array)(n)}throw Error(`unsupported align: ${e}`)}function b(e){const t=new Uint32Array(i.buffer),r=m(t[e+-8>>>2]),n=y(r);let o=4&r?e:t[e+4>>>2];const s=2&r?t[e+12>>>2]:t[o+-4>>>2]>>>n;return v(n,2048&r,4096&r).subarray(o>>>=n,o+s)}function w(e,t,r){return new e(_(e,t,r))}function _(e,t,r){const n=i.buffer,o=new Uint32Array(n),s=o[r+4>>>2];return new e(n,s,o[s+-4>>>2]>>>t)}function S(t,r,n){e[`__get${r}`]=w.bind(null,t,n),e[`__get${r}View`]=_.bind(null,t,n)}return e.__new=a,e.__pin=c,e.__unpin=u,e.__collect=p,e.__newString=function(e){if(null==e)return 0;const t=e.length,r=a(t<<1,1),n=new Uint16Array(i.buffer);for(var o=0,s=r>>>1;o<t;++o)n[s+o]=e.charCodeAt(o);return r},e.__newArrayBuffer=function(e){if(null==e)return 0;const t=new Uint8Array(e),r=a(t.length,0);return new Uint8Array(i.buffer).set(t,r),r},e.__getString=function(e){if(!e)return null;const t=i.buffer;if(1!==new Uint32Array(t)[e+-8>>>2])throw Error(`not a string: ${e}`);return s(t,e)},e.__newArray=function(e,t){const r=m(e),n=y(r),o=t.length,s=a(o<<n,4&r?e:0);let l;if(4&r)l=s;else{c(s);const t=a(2&r?16:12,e);u(s);const p=new Uint32Array(i.buffer);p[t+0>>>2]=s,p[t+4>>>2]=s,p[t+8>>>2]=o<<n,2&r&&(p[t+12>>>2]=o),l=t}const p=v(n,2048&r,4096&r);if(16384&r)for(let e=0;e<o;++e){const r=t[e];p[(s>>>n)+e]=r}else p.set(t,s>>>n);return l},e.__getArrayView=b,e.__getArray=function(e){const t=b(e),r=t.length,n=new Array(r);for(let e=0;e<r;e++)n[e]=t[e];return n},e.__getArrayBuffer=function(e){const t=i.buffer,r=new Uint32Array(t)[e+-4>>>2];return t.slice(e,e+r)},[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach((e=>{S(e,e.name,31-Math.clz32(e.BYTES_PER_ELEMENT))})),n&&[BigUint64Array,BigInt64Array].forEach((e=>{S(e,e.name.slice(3),3)})),e.__instanceof=function(e,t){const r=new Uint32Array(i.buffer);let n=r[e+-8>>>2];if(n<=d(r))do{if(n==t)return!0;n=g(n)}while(n);return!1},e.memory=e.memory||i,e.table=e.table||o,h(r,e)}function u(e){return"undefined"!=typeof Response&&e instanceof Response}function p(e){return e instanceof WebAssembly.Module}async function f(e,t={}){if(u(e=await e))return d(e,t);const r=p(e)?e:await WebAssembly.compile(e),n=a(t),i=await WebAssembly.instantiate(r,t);return{module:r,instance:i,exports:c(n,i)}}async function d(e,t={}){if(!WebAssembly.instantiateStreaming)return f(u(e=await e)?e.arrayBuffer():e,t);const r=a(t),n=await WebAssembly.instantiateStreaming(e,t),i=c(r,n.instance);return{...n,exports:i}}function h(e,t={}){const r=e.__argumentsLength?t=>{e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||(()=>{});for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;const o=e[n];let s=n.split("."),a=t;for(;s.length>1;){let e=s.shift();Object.prototype.hasOwnProperty.call(a,e)||(a[e]={}),a=a[e]}let l=s[0],c=l.indexOf("#");if(c>=0){const t=l.substring(0,c),s=a[t];if(void 0===s||!s.prototype){const e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf(){return this[i]}},e.wrap=function(t){return Object.create(e.prototype,{[i]:{value:t,writable:!1}})},s&&Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t)))),a[t]=e}if(l=l.substring(c+1),a=a[t].prototype,/^(get|set):/.test(l)){if(!Object.prototype.hasOwnProperty.call(a,l=l.substring(4))){let t=e[n.replace("set:","get:")],r=e[n.replace("get:","set:")];Object.defineProperty(a,l,{get(){return t(this[i])},set(e){r(this[i],e)},enumerable:!0})}}else"constructor"===l?(a[l]=(...e)=>(r(e.length),o(...e))).original=o:(a[l]=function(...e){return r(e.length),o(this[i],...e)}).original=o}else/^(get|set):/.test(l)?Object.prototype.hasOwnProperty.call(a,l=l.substring(4))||Object.defineProperty(a,l,{get:e[n.replace("set:","get:")],set:e[n.replace("get:","set:")],enumerable:!0}):"function"==typeof o&&o!==r?(a[l]=(...e)=>(r(e.length),o(...e))).original=o:a[l]=o}return t}var m={instantiate:f,instantiateSync:function(e,t={}){const r=p(e)?e:new WebAssembly.Module(e),n=a(t),i=new WebAssembly.Instance(r,t);return{module:r,instance:i,exports:c(n,i)}},instantiateStreaming:d,demangle:h};function g(e,t,r){return t}function y(e,t,r){return e.exports[`__get${function(e){return e.startsWith("~lib/typedarray/")?((e=e.slice("~lib/typedarray/".length)).startsWith("Big")&&(e=e.slice(3)),e):e}(r)}View`](t)}function v(e,t,r){return e.exports.__newArray(e.getTypeId(r),t)}function b(e){if(!e.startsWith("~lib/array/Array"))throw Error(`${JSON.stringify(e)} is not an array type`);return e.slice("~lib/array/Array<".length,-1)}const w=new Map([["void",{ascToJs:g,jsToAsc:g}],[/^(i|u|f)(8|16|32|64)|[ui]size|bool|externref$/,{ascToJs:g,jsToAsc:g}],["~lib/string/String",{ascToJs:function(e,t,r){return e.exports.__getString(t)},jsToAsc:function(e,t,r){return e.exports.__newString(t)}}],["~lib/typedarray/Int8Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Int16Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Int32Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Uint8Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Uint16Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Uint32Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Int64Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Uint64Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Uint8ClampedArray",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Float32Array",{ascToJs:y,jsToAsc:v}],["~lib/typedarray/Float64Array",{ascToJs:y,jsToAsc:v}],["~lib/arraybuffer/ArrayBuffer",{ascToJs:function(e,t,r){return e.exports.__getArrayBuffer(t)},jsToAsc:function(e,t,r){const n=e.exports.__new(t.byteLength,e.getTypeId(r));return new Uint8Array(e.exports.memory.buffer,n,t.byteLength).set(new Uint8Array(t)),n}}],[/^~lib\/array\/Array<.+>$/,{ascToJs:function(e,t,r){const n=b(r),i=S(n);return e.exports.__getArray(t).map((t=>i.ascToJs(e,t,n)))},jsToAsc:function(e,t,r){const n=b(r),i=S(n),o=t.map((t=>i.jsToAsc(e,t,n)));return e.exports.__newArray(e.getTypeId(r),o)}}]]),_=new Set;function S(e){for(const[t,r]of w)if("string"!=typeof t){if(t.test(e))return r}else if(t===e)return r;return _.has(e)||(console.warn(`No converter for ${JSON.stringify(e)}, using pass-through`),_.add(e)),{ascToJs:g,jsToAsc:g}}function x(e){var t;return null===(t=S(e))||void 0===t?void 0:t.ascToJs}function O(e){var t;return null===(t=S(e))||void 0===t?void 0:t.jsToAsc}function E(e,t,r){const n=r.parameters.map(x),i=O(r.returnType);return function(...o){if(o.length!=n.length)throw Error(`Expected ${n.length} arguments, got ${o.length}`);const s=o.map(((t,i)=>n[i](e,t,r.parameters[i]))),a=t(...s);return i(e,a,r.returnType)}}function C(e,t,r){const n=r.parameters.map(O),i=x(r.returnType);return(...o)=>{if(o.length!=n.length)throw Error(`Expected ${n.length} arguments, got ${o.length}`);const s=[],a=o.map(((t,i)=>{const o=n[i](e,t,r.parameters[i]);return o!==t&&(e.exports.__pin(o),s.push(o)),o})),l=t(...a);return s.forEach((t=>e.exports.__unpin(t))),i(e,l,r.returnType)}}function P(e,{depth:t=Number.POSITIVE_INFINITY}={}){return t<=0||!e||"object"!=typeof e?e:Object.fromEntries(Object.entries(e).map((([e,r])=>[e,P(r,{depth:t-1})])))}function I(e){const t=WebAssembly.Module.customSections(e,"as-bind_bindings"),r=new TextDecoder("utf8").decode(new Uint8Array(t[0]));try{return JSON.parse(r)}catch(e){throw Error(`Couldn’t decode type descriptor: ${e.message}`)}}class k{constructor(){this.unboundExports={},this.exports={},this.importObject={}}getTypeId(e){if(e in this.typeDescriptor.typeIds)return this.typeDescriptor.typeIds[e].id;throw Error(`Unknown type ${JSON.stringify(e)}`)}getTypeSize(e){if(e in this.typeDescriptor.typeIds)return this.typeDescriptor.typeIds[e].byteSize;throw Error(`Unknown type ${JSON.stringify(e)}`)}_validate(){if(!WebAssembly.Module.exports(this.module).find((e=>"__new"===e.name)))throw Error("The AssemblyScript wasm module was not built with --exportRuntime, which is required.");if(1!==WebAssembly.Module.customSections(this.module,"as-bind_bindings").length)throw new Error("The AssemblyScript wasm module was not built with the as-bind transform.")}async _instantiate(e,t){this.module=await async function(e){if(e=await Promise.resolve(e),"undefined"!=typeof Response&&e instanceof Response){if(WebAssembly.compileStreaming)return WebAssembly.compileStreaming(e);e=await e.arrayBuffer()}return WebAssembly.compile(e)}(e),this._validate(),this.typeDescriptor=I(this.module),this._instantiateBindImportFunctions(t),this.loadedModule=await async function(e,t){return m.instantiate(e,t)}(this.module,this.importObject),this._instantiateBindUnboundExports()}_instantiateSync(e,t){this.module=new WebAssembly.Module(e),this._validate(),this.typeDescriptor=I(this.module),this._instantiateBindImportFunctions(t),this.loadedModule=function(e,t){return m.instantiateSync(e,t)}(this.module,this.importObject),this._instantiateBindUnboundExports()}_instantiateBindImportFunctions(e){this.importObject=P(e,{depth:2});for(const[t,r]of Object.entries(this.typeDescriptor.importedFunctions))for(const[n,i]of Object.entries(r))this.importObject[t][`__asbind_unbound_${n}`]=e[t][n],this.importObject[t][n]=E(this,e[t][n],i)}_instantiateBindUnboundExports(){const e=this.loadedModule.exports;this.exports=P(e,{depth:1});for(const[t,r]of Object.entries(this.typeDescriptor.exportedFunctions))this.exports[t]=C(this,e[t],r)}}r.converters=w,r.instantiate=async function(e,t){let r=new k;return await r._instantiate(e,t),r},r.instantiateSync=function(e,t){let r=new k;return r._instantiateSync(e,t),r},r.version="0.8.1"},{}],58:[function(e,t,r){"use strict";var n=e("mqtt");e("in-array"),n.MqttClient.prototype;function i(e){this._client=e}function o(e,t){return function(r,n){r?t(r):e(n)}}t.exports={connect:function(e,t){return new i(n.connect(e,t))},AsyncClient:i},i.prototype={set handleMessage(e){this._client.handleMessage=e},get handleMessage(){return this._client.handleMessage}},["publish","subscribe","unsubscribe","unsubscribe","end"].forEach((function(e){i.prototype[e]=function(){for(var t=this._client,r=[],n=arguments.length,i=0;i<n;i++)r.push(arguments[i]);return new Promise((function(n,i){r.push(o(n,i)),t[e].apply(t,r)}))}})),["emit","addListener","on","once","removeListener","removeAllListeners","setMaxListeners","getMaxListeners","listeners","listenerCount"].forEach((function(e){i.prototype[e]=function(){var t=this._client;return t[e].apply(t,arguments)}}))},{"in-array":151,mqtt:170}],59:[function(e,t,r){(function(e){(function(){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof n[r[t]]&&(e[e.length]=r[t]);return e}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,r){"use strict";r.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=c(e),s=n[0],a=n[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),u=0,p=a>0?s-4:s;for(r=0;r<p;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[u++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(u(e,a,a+s>l?l:a+s));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],61:[function(e,t,r){var n=e("readable-stream/duplex"),i=e("util"),o=e("safe-buffer").Buffer;function s(e){if(!(this instanceof s))return new s(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);n.call(this)}i.inherits(s,n),s.prototype._offset=function(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},s.prototype.append=function(e){var t=0;if(o.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof s)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(o.from(e)));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},s.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},s.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(e){return this.slice(e,e+1)[0]},s.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,r,n){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof n||n>this.length)&&(n=this.length),r>=this.length)return e||o.alloc(0);if(n<=0)return e||o.alloc(0);var i,s,a=!!e,l=this._offset(r),c=n-r,u=c,p=a&&t||0,f=l[1];if(0===r&&n==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,p),p+=this._bufs[s].length;return e}if(u<=this._bufs[l[0]].length-f)return a?this._bufs[l[0]].copy(e,t,f,f+u):this._bufs[l[0]].slice(f,f+u);for(a||(e=o.allocUnsafe(c)),s=l[0];s<this._bufs.length;s++){if(!(u>(i=this._bufs[s].length-f))){this._bufs[s].copy(e,p,f,f+u),p+=i;break}this._bufs[s].copy(e,p,f),p+=i,u-=i,f&&(f=0)}return e.length>p?e.slice(0,p):e},s.prototype.shallowSlice=function(e,t){e=e||0,t=t||this.length,e<0&&(e+=this.length),t<0&&(t+=this.length);var r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0==n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!=r[1]&&(i[0]=i[0].slice(r[1])),new s(i)},s.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},s.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var e=0,t=new s;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){s.prototype[t]=function(r){return this.slice(r,r+e[t])[t](0)}}(t)}(),t.exports=s},{"readable-stream/duplex":186,"safe-buffer":199,util:238}],62:[function(e,t,r){},{}],63:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{dup:62}],64:[function(e,t,r){(function(t){(function(){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var t=e("base64-js"),n=e("ieee754");r.Buffer=s,r.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},r.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return a(e,t,r)}function a(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|f(e,t),n=o(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(B(e,ArrayBuffer)||e&&B(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=s.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return s.from(n,t,r);var i=function(e){if(s.isBuffer(e)){var t=0|p(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||F(e.length)?o(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),o(e<0?0:0|p(e))}function u(e){for(var t=e.length<0?0:0|p(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||B(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:N(e).length;t=(""+t).toLowerCase(),i=!0}}function d(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),F(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var p=!0,f=0;f<l;f++)if(c(e,o+f)!==c(t,f)){p=!1;break}if(p)return o}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(F(a))return s;e[r+s]=a}return s}function v(e,t,r,n){return U(N(t,e.length-r),e,r,n)}function b(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return U(V(t),e,r,n)}function S(e,t,r,n){return U(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function x(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function O(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,l,c=e[i],u=null,p=c>239?4:c>223?3:c>191?2:1;if(i+p<=r)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,p=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=p}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,r){return a(e,t,r)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),B(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=s.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(B(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,n,i){if(B(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),l=Math.min(o,a),c=this.slice(n,i),u=e.slice(t,r),p=0;p<l;++p)if(c[p]!==u[p]){o=c[p],a=u[p];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=D(e[o]);return i}function k(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||A(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function M(e,t,r,i,o){return t=+t,r>>>=0,o||A(e,0,r,8),n.write(e,t,r,i,52,8),r+8}s.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||T(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||T(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);T(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);T(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=s.isBuffer(e)?e:s.from(e,n),l=a.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=a[o%l]}return this};var R=/[^+/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function B(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":60,buffer:64,ieee754:150}],65:[function(e,t,r){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],66:[function(e,t,r){"use strict";var n=e("get-intrinsic"),i=e("./"),o=i(n("String.prototype.indexOf"));t.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?i(r):r}},{"./":67,"get-intrinsic":144}],67:[function(e,t,r){"use strict";var n=e("function-bind"),i=e("get-intrinsic"),o=i("%Function.prototype.apply%"),s=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(s,o),l=i("%Object.getOwnPropertyDescriptor%",!0),c=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}t.exports=function(e){var t=a(n,s,arguments);if(l&&c){var r=l(t,"length");r.configurable&&c(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var p=function(){return a(n,o,arguments)};c?c(t.exports,"apply",{value:p}):t.exports.apply=p},{"function-bind":143,"get-intrinsic":144}],68:[function(e,t,r){(function(e){(function(){var r=function(){"use strict";function t(r,i,o,s){"object"==typeof i&&(o=i.depth,s=i.prototype,i.filter,i=i.circular);var a=[],l=[],c=void 0!==e;return void 0===i&&(i=!0),void 0===o&&(o=1/0),function r(o,u){if(null===o)return null;if(0==u)return o;var p,f;if("object"!=typeof o)return o;if(t.__isArray(o))p=[];else if(t.__isRegExp(o))p=new RegExp(o.source,n(o)),o.lastIndex&&(p.lastIndex=o.lastIndex);else if(t.__isDate(o))p=new Date(o.getTime());else{if(c&&e.isBuffer(o))return p=new e(o.length),o.copy(p),p;void 0===s?(f=Object.getPrototypeOf(o),p=Object.create(f)):(p=Object.create(s),f=s)}if(i){var d=a.indexOf(o);if(-1!=d)return l[d];a.push(o),l.push(p)}for(var h in o){var m;f&&(m=Object.getOwnPropertyDescriptor(f,h)),m&&null==m.set||(p[h]=r(o[h],u-1))}return p}(r,o)}function r(e){return Object.prototype.toString.call(e)}function n(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=r,t.__isDate=function(e){return"object"==typeof e&&"[object Date]"===r(e)},t.__isArray=function(e){return"object"==typeof e&&"[object Array]"===r(e)},t.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===r(e)},t.__getRegExpFlags=n,t}();"object"==typeof t&&t.exports&&(t.exports=r)}).call(this)}).call(this,e("buffer").Buffer)},{buffer:64}],69:[function(e,t,r){function n(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===n(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===n(e)},r.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("buffer").Buffer.isBuffer},{buffer:64}],70:[function(e,t,r){"use strict";var n,i=e("type/value/is"),o=e("type/value/ensure"),s=e("type/plain-function/ensure"),a=e("es5-ext/object/copy"),l=e("es5-ext/object/normalize-options"),c=e("es5-ext/object/map"),u=Function.prototype.bind,p=Object.defineProperty,f=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=o(t)&&s(t.value);return delete(n=a(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&f.call(this,e)?i:(t.value=u.call(i,r.resolveContext?r.resolveContext(this):this),p(this,e,t),this[e])},n},t.exports=function(e){var t=l(arguments[1]);return i(t.resolveContext)&&s(t.resolveContext),c(e,(function(e,r){return n(r,e,t)}))}},{"es5-ext/object/copy":95,"es5-ext/object/map":103,"es5-ext/object/normalize-options":104,"type/plain-function/ensure":227,"type/value/ensure":231,"type/value/is":232}],71:[function(e,t,r){"use strict";var n=e("type/value/is"),i=e("type/plain-function/is"),o=e("es5-ext/object/assign"),s=e("es5-ext/object/normalize-options"),a=e("es5-ext/string/#/contains"),l=t.exports=function(e,t){var r,i,l,c,u;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],n(e)?(r=a.call(e,"c"),i=a.call(e,"e"),l=a.call(e,"w")):(r=l=!0,i=!1),u={value:t,configurable:r,enumerable:i,writable:l},c?o(s(c),u):u};l.gs=function(e,t,r){var l,c,u,p;return"string"!=typeof e?(u=r,r=t,t=e,e=null):u=arguments[3],n(t)?i(t)?n(r)?i(r)||(u=r,r=void 0):r=void 0:(u=t,t=r=void 0):t=void 0,n(e)?(l=a.call(e,"c"),c=a.call(e,"e")):(l=!0,c=!1),p={get:t,set:r,configurable:l,enumerable:c},u?o(s(u),p):p}},{"es5-ext/object/assign":92,"es5-ext/object/normalize-options":104,"es5-ext/string/#/contains":111,"type/plain-function/is":228,"type/value/is":232}],72:[function(e,t,r){(function(r,n){(function(){var i=e("readable-stream"),o=e("end-of-stream"),s=e("inherits"),a=e("stream-shift"),l=n.from&&n.from!==Uint8Array.from?n.from([0]):new n([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},u=function(e,t){return function(r){r?function(e,t){e._autoDestroy&&e.destroy(t)}(e,"premature close"===r.message?null:r):t&&!e._ended&&e.end()}},p=function(e,t,r){if(!(this instanceof p))return new p(e,t,r);i.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};s(p,i.Duplex),p.obj=function(e,t,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new p(e,t,r)},p.prototype.cork=function(){1==++this._corked&&this.emit("cork")},p.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},p.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,n=o(e,{writable:!0,readable:!1},u(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&r.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),n()},this.uncork()}else this.end()},p.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,r=this,n=o(e,{writable:!1,readable:!0},u(this)),s=function(){r._forward()},a=function(){r.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",s),this._readable2.on("end",a),this._unread=function(){r._readable2.removeListener("readable",s),r._readable2.removeListener("end",a),n()},this._forward()}},p.prototype._read=function(){this._drained=!0,this._forward()},p.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=a(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},p.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;r.nextTick((function(){t._destroy(e)}))}},p.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},p.prototype._write=function(e,t,r){return this.destroyed?r():this._corked?c(this,this._write.bind(this,e,t,r)):e===l?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:r()):r()},p.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){var r,n;r=t._forwardEnd&&t._writable,n=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},r?r._writableState&&r._writableState.finished?n():r._writableState?r.end(n):(r.end(),n()):n()}))},p.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(l),i.Writable.prototype.end.call(this,r))},t.exports=p}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:181,buffer:64,"end-of-stream":73,inherits:152,"readable-stream":197,"stream-shift":219}],73:[function(e,t,r){(function(r){(function(){var n=e("once"),i=function(){},o=function(e,t,s){if("function"==typeof t)return o(e,null,t);t||(t={}),s=n(s||i);var a=e._writableState,l=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,p=!1,f=function(){e.writable||d()},d=function(){u=!1,c||s.call(e)},h=function(){c=!1,u||s.call(e)},m=function(t){s.call(e,t?new Error("exited with error code: "+t):null)},g=function(t){s.call(e,t)},y=function(){r.nextTick(v)},v=function(){if(!p)return(!c||l&&l.ended&&!l.destroyed)&&(!u||a&&a.ended&&!a.destroyed)?void 0:s.call(e,new Error("premature close"))},b=function(){e.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!a&&(e.on("end",f),e.on("close",f)):(e.on("complete",d),e.on("abort",y),e.req?b():e.on("request",b)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",m),e.on("end",h),e.on("finish",d),!1!==t.error&&e.on("error",g),e.on("close",y),function(){p=!0,e.removeListener("complete",d),e.removeListener("abort",y),e.removeListener("request",b),e.req&&e.req.removeListener("finish",d),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",d),e.removeListener("exit",m),e.removeListener("end",h),e.removeListener("error",g),e.removeListener("close",y)}};t.exports=o}).call(this)}).call(this,e("_process"))},{_process:181,once:177}],74:[function(e,t,r){"use strict";var n=e("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}t.exports=n},{"get-intrinsic":144}],75:[function(e,t,r){"use strict";var n=e("../../object/valid-value");t.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":110}],76:[function(e,t,r){"use strict";var n=e("../../number/is-nan"),i=e("../../number/to-pos-integer"),o=e("../../object/valid-value"),s=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,l=Math.abs,c=Math.floor;t.exports=function(e){var t,r,u,p;if(!n(e))return s.apply(this,arguments);for(r=i(o(this).length),u=arguments[1],t=u=isNaN(u)?0:u>=0?c(u):i(this.length)-c(l(u));t<r;++t)if(a.call(this,t)&&(p=this[t],n(p)))return t;return-1}},{"../../number/is-nan":86,"../../number/to-pos-integer":90,"../../object/valid-value":110}],77:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":78,"./shim":79}],78:[function(e,t,r){"use strict";t.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],79:[function(e,t,r){"use strict";var n=e("es6-symbol").iterator,i=e("../../function/is-arguments"),o=e("../../function/is-function"),s=e("../../number/to-pos-integer"),a=e("../../object/valid-callable"),l=e("../../object/valid-value"),c=e("../../object/is-value"),u=e("../../string/is-string"),p=Array.isArray,f=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,r,m,g,y,v,b,w,_,S,x=arguments[1],O=arguments[2];if(e=Object(l(e)),c(x)&&a(x),this&&this!==Array&&o(this))t=this;else{if(!x){if(i(e))return 1!==(y=e.length)?Array.apply(null,e):((g=new Array(1))[0]=e[0],g);if(p(e)){for(g=new Array(y=e.length),r=0;r<y;++r)g[r]=e[r];return g}}g=[]}if(!p(e))if(void 0!==(_=e[n])){for(b=a(_).call(e),t&&(g=new t),w=b.next(),r=0;!w.done;)S=x?f.call(x,O,w.value,r):w.value,t?(d.value=S,h(g,r,d)):g[r]=S,w=b.next(),++r;y=r}else if(u(e)){for(y=e.length,t&&(g=new t),r=0,m=0;r<y;++r)S=e[r],r+1<y&&(v=S.charCodeAt(0))>=55296&&v<=56319&&(S+=e[++r]),S=x?f.call(x,O,S,m):S,t?(d.value=S,h(g,m,d)):g[m]=S,++m;y=m}if(void 0===y)for(y=s(e.length),t&&(g=new t(y)),r=0;r<y;++r)S=x?f.call(x,O,e[r],r):e[r],t?(d.value=S,h(g,r,d)):g[r]=S;return t&&(d.value=null,g.length=y),g}},{"../../function/is-arguments":80,"../../function/is-function":81,"../../number/to-pos-integer":90,"../../object/is-value":99,"../../object/valid-callable":109,"../../object/valid-value":110,"../../string/is-string":114,"es6-symbol":128}],80:[function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());t.exports=function(e){return n.call(e)===i}},{}],81:[function(e,t,r){"use strict";var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(e){return"function"==typeof e&&i(n.call(e))}},{}],82:[function(e,t,r){"use strict";t.exports=function(){}},{}],83:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":84,"./shim":85}],84:[function(e,t,r){"use strict";t.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},{}],85:[function(e,t,r){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],86:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":87,"./shim":88}],87:[function(e,t,r){"use strict";t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},{}],88:[function(e,t,r){"use strict";t.exports=function(e){return e!=e}},{}],89:[function(e,t,r){"use strict";var n=e("../math/sign"),i=Math.abs,o=Math.floor;t.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},{"../math/sign":83}],90:[function(e,t,r){"use strict";var n=e("./to-integer"),i=Math.max;t.exports=function(e){return i(0,n(e))}},{"./to-integer":89}],91:[function(e,t,r){"use strict";var n=e("./valid-callable"),i=e("./valid-value"),o=Function.prototype.bind,s=Function.prototype.call,a=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(r,c){var u,p=arguments[2],f=arguments[3];return r=Object(i(r)),n(c),u=a(r),f&&u.sort("function"==typeof f?o.call(f,r):void 0),"function"!=typeof e&&(e=u[e]),s.call(e,u,(function(e,n){return l.call(r,e)?s.call(c,p,r[e],e,r,n):t}))}}},{"./valid-callable":109,"./valid-value":110}],92:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":93,"./shim":94}],93:[function(e,t,r){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],94:[function(e,t,r){"use strict";var n=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var r,s,a,l=o(arguments.length,2);for(e=Object(i(e)),a=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},s=1;s<l;++s)n(t=arguments[s]).forEach(a);if(void 0!==r)throw r;return e}},{"../keys":100,"../valid-value":110}],95:[function(e,t,r){"use strict";var n=e("../array/from"),i=e("./assign"),o=e("./valid-value");t.exports=function(e){var t=Object(o(e)),r=arguments[1],s=Object(arguments[2]);if(t!==e&&!r)return t;var a={};return r?n(r,(function(t){(s.ensure||t in e)&&(a[t]=e[t])})):i(a,e),a}},{"../array/from":77,"./assign":92,"./valid-value":110}],96:[function(e,t,r){"use strict";var n,i,o,s,a=Object.create;e("./set-prototype-of/is-implemented")()||(n=e("./set-prototype-of/shim")),t.exports=n?1!==n.level?a:(i={},o={},s={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(e){o[e]="__proto__"!==e?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(i,o),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return a(null===e?i:e,t)}):a},{"./set-prototype-of/is-implemented":107,"./set-prototype-of/shim":108}],97:[function(e,t,r){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":91}],98:[function(e,t,r){"use strict";var n=e("./is-value"),i={function:!0,object:!0};t.exports=function(e){return n(e)&&i[typeof e]||!1}},{"./is-value":99}],99:[function(e,t,r){"use strict";var n=e("../function/noop")();t.exports=function(e){return e!==n&&null!==e}},{"../function/noop":82}],100:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":101,"./shim":102}],101:[function(e,t,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],102:[function(e,t,r){"use strict";var n=e("../is-value"),i=Object.keys;t.exports=function(e){return i(n(e)?Object(e):e)}},{"../is-value":99}],103:[function(e,t,r){"use strict";var n=e("./valid-callable"),i=e("./for-each"),o=Function.prototype.call;t.exports=function(e,t){var r={},s=arguments[2];return n(t),i(e,(function(e,n,i,a){r[n]=o.call(t,s,e,n,i,a)})),r}},{"./for-each":97,"./valid-callable":109}],104:[function(e,t,r){"use strict";var n=e("./is-value"),i=Array.prototype.forEach,o=Object.create,s=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=o(null);return i.call(arguments,(function(e){n(e)&&s(Object(e),t)})),t}},{"./is-value":99}],105:[function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create;t.exports=function(e){var t=i(null);return n.call(arguments,(function(e){t[e]=!0})),t}},{}],106:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":107,"./shim":108}],107:[function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},{}],108:[function(e,t,r){"use strict";var n,i,o,s,a=e("../is-object"),l=e("../valid-value"),c=Object.prototype.isPrototypeOf,u=Object.defineProperty,p={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(e,t){if(l(e),null===t||a(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=(i=function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}(),i?(2===i.level?i.set?(s=i.set,o=function(e,t){return s.call(n(e,t),t),e}):o=function(e,t){return n(e,t).__proto__=t,e}:o=function e(t,r){var i;return n(t,r),(i=c.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,i&&u(e.nullPolyfill,"__proto__",p),t},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null),e("../create")},{"../create":96,"../is-object":98,"../valid-value":110}],109:[function(e,t,r){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],110:[function(e,t,r){"use strict";var n=e("./is-value");t.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":99}],111:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":112,"./shim":113}],112:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},{}],113:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],114:[function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},{}],115:[function(e,t,r){"use strict";var n,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),s=e("d"),a=e("es6-symbol"),l=e("./"),c=Object.defineProperty;n=t.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",s("",t))},i&&i(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:s((function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e}))}),c(n.prototype,a.toStringTag,s("c","Array Iterator"))},{"./":118,d:71,"es5-ext/object/set-prototype-of":106,"es5-ext/string/#/contains":111,"es6-symbol":128}],116:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/valid-callable"),o=e("es5-ext/string/is-string"),s=e("./get"),a=Array.isArray,l=Function.prototype.call,c=Array.prototype.some;t.exports=function(e,t){var r,u,p,f,d,h,m,g,y=arguments[2];if(a(e)||n(e)?r="array":o(e)?r="string":e=s(e),i(t),p=function(){f=!0},"array"!==r)if("string"!==r)for(u=e.next();!u.done;){if(l.call(t,y,u.value,p),f)return;u=e.next()}else for(h=e.length,d=0;d<h&&(m=e[d],d+1<h&&(g=m.charCodeAt(0))>=55296&&g<=56319&&(m+=e[++d]),l.call(t,y,m,p),!f);++d);else c.call(e,(function(e){return l.call(t,y,e,p),f}))}},{"./get":117,"es5-ext/function/is-arguments":80,"es5-ext/object/valid-callable":109,"es5-ext/string/is-string":114}],117:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),i=e("es5-ext/string/is-string"),o=e("./array"),s=e("./string"),a=e("./valid-iterable"),l=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof a(e)[l]?e[l]():n(e)?new o(e):i(e)?new s(e):new o(e)}},{"./array":115,"./string":120,"./valid-iterable":121,"es5-ext/function/is-arguments":80,"es5-ext/string/is-string":114,"es6-symbol":128}],118:[function(e,t,r){"use strict";var n,i=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),s=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),l=e("d"),c=e("d/auto-bind"),u=e("es6-symbol"),p=Object.defineProperty,f=Object.defineProperties;t.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");f(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,f(n.prototype,o({_next:l((function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:l((function(){return this._createResult(this._next())})),_createResult:l((function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}})),_resolve:l((function(e){return this.__list__[e]})),_unBind:l((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:l((function(){return"[object "+(this[u.toStringTag]||"Object")+"]"}))},c({_onAdd:l((function(e){e>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(t,r){t>=e&&(this.__redo__[r]=++t)}),this),this.__redo__.push(e)):p(this,"__redo__",l("c",[e])))})),_onDelete:l((function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(e))&&this.__redo__.splice(t,1),this.__redo__.forEach((function(t,r){t>e&&(this.__redo__[r]=--t)}),this)))})),_onClear:l((function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0}))}))),p(n.prototype,u.iterator,l((function(){return this})))},{d:71,"d/auto-bind":70,"es5-ext/array/#/clear":75,"es5-ext/object/assign":92,"es5-ext/object/valid-callable":109,"es5-ext/object/valid-value":110,"es6-symbol":128}],119:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/is-value"),o=e("es5-ext/string/is-string"),s=e("es6-symbol").iterator,a=Array.isArray;t.exports=function(e){return!!i(e)&&(!!a(e)||(!!o(e)||(!!n(e)||"function"==typeof e[s])))}},{"es5-ext/function/is-arguments":80,"es5-ext/object/is-value":99,"es5-ext/string/is-string":114,"es6-symbol":128}],120:[function(e,t,r){"use strict";var n,i=e("es5-ext/object/set-prototype-of"),o=e("d"),s=e("es6-symbol"),a=e("./"),l=Object.defineProperty;n=t.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),l(this,"__length__",o("",e.length))},i&&i(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:o((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:o((function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0))>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r}))}),l(n.prototype,s.toStringTag,o("c","String Iterator"))},{"./":118,d:71,"es5-ext/object/set-prototype-of":106,"es6-symbol":128}],121:[function(e,t,r){"use strict";var n=e("./is-iterable");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":119}],122:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Map:e("./polyfill")},{"./is-implemented":123,"./polyfill":127}],123:[function(e,t,r){"use strict";t.exports=function(){var e,t;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(!1===(t=e.entries().next()).done&&(!!t.value&&("raz"===t.value[0]&&"one"===t.value[1])))))))))))))}},{}],124:[function(e,t,r){"use strict";t.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},{}],125:[function(e,t,r){"use strict";t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":105}],126:[function(e,t,r){"use strict";var n,i=e("es5-ext/object/set-prototype-of"),o=e("d"),s=e("es6-iterator"),a=e("es6-symbol").toStringTag,l=e("./iterator-kinds"),c=Object.defineProperties,u=s.prototype._unBind;n=t.exports=function(e,t){if(!(this instanceof n))return new n(e,t);s.call(this,e.__mapKeysData__,e),t&&l[t]||(t="key+value"),c(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},i&&i(n,s),n.prototype=Object.create(s.prototype,{constructor:o(n),_resolve:o((function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]})),_unBind:o((function(){this.__values__=null,u.call(this)})),toString:o((function(){return"[object Map Iterator]"}))}),Object.defineProperty(n.prototype,a,o("c","Map Iterator"))},{"./iterator-kinds":125,d:71,"es5-ext/object/set-prototype-of":106,"es6-iterator":118,"es6-symbol":128}],127:[function(e,t,r){"use strict";var n,i=e("es5-ext/array/#/clear"),o=e("es5-ext/array/#/e-index-of"),s=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-callable"),l=e("es5-ext/object/valid-value"),c=e("d"),u=e("event-emitter"),p=e("es6-symbol"),f=e("es6-iterator/valid-iterable"),d=e("es6-iterator/for-of"),h=e("./lib/iterator"),m=e("./is-native-implemented"),g=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;t.exports=n=function(){var e,t,r,i=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return r=m&&s&&Map!==n?s(new Map,v(this)):this,null!=i&&f(i),y(r,{__mapKeysData__:c("c",e=[]),__mapValuesData__:c("c",t=[])}),i?(d(i,(function(r){var n=l(r)[0];r=r[1],-1===o.call(e,n)&&(e.push(n),t.push(r))}),r),r):r},m&&(s&&s(n,Map),n.prototype=Object.create(Map.prototype,{constructor:c(n)})),u(y(n.prototype,{clear:c((function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))})),delete:c((function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)})),entries:c((function(){return new h(this,"key+value")})),forEach:c((function(e){var t,r,n=arguments[1];for(a(e),r=(t=this.entries())._next();void 0!==r;)g.call(e,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=t._next()})),get:c((function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]})),has:c((function(e){return-1!==o.call(this.__mapKeysData__,e)})),keys:c((function(){return new h(this,"key")})),set:c((function(e,t){var r,n=o.call(this.__mapKeysData__,e);return-1===n&&(n=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[n]=t,r&&this.emit("_add",n,e),this})),size:c.gs((function(){return this.__mapKeysData__.length})),values:c((function(){return new h(this,"value")})),toString:c((function(){return"[object Map]"}))})),Object.defineProperty(n.prototype,p.iterator,c((function(){return this.entries()}))),Object.defineProperty(n.prototype,p.toStringTag,c("c","Map"))},{"./is-native-implemented":124,"./lib/iterator":126,d:71,"es5-ext/array/#/clear":75,"es5-ext/array/#/e-index-of":76,"es5-ext/object/set-prototype-of":106,"es5-ext/object/valid-callable":109,"es5-ext/object/valid-value":110,"es6-iterator/for-of":116,"es6-iterator/valid-iterable":121,"es6-symbol":128,"event-emitter":136}],128:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":129,"./polyfill":134,"ext/global-this":139}],129:[function(e,t,r){"use strict";var n=e("ext/global-this"),i={object:!0,symbol:!0};t.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&(!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag])}},{"ext/global-this":139}],130:[function(e,t,r){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],131:[function(e,t,r){"use strict";var n=e("d"),i=Object.create,o=Object.defineProperty,s=Object.prototype,a=i(null);t.exports=function(e){for(var t,r,i=0;a[e+(i||"")];)++i;return a[e+=i||""]=!0,o(s,t="@@"+e,n.gs(null,(function(e){r||(r=!0,o(this,t,n(e)),r=!1)}))),t}},{d:71}],132:[function(e,t,r){"use strict";var n=e("d"),i=e("ext/global-this").Symbol;t.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:n("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",i&&i.iterator||e("iterator")),match:n("",i&&i.match||e("match")),replace:n("",i&&i.replace||e("replace")),search:n("",i&&i.search||e("search")),species:n("",i&&i.species||e("species")),split:n("",i&&i.split||e("split")),toPrimitive:n("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:n("",i&&i.toStringTag||e("toStringTag")),unscopables:n("",i&&i.unscopables||e("unscopables"))})}},{d:71,"ext/global-this":139}],133:[function(e,t,r){"use strict";var n=e("d"),i=e("../../../validate-symbol"),o=Object.create(null);t.exports=function(e){return Object.defineProperties(e,{for:n((function(t){return o[t]?o[t]:o[t]=e(String(t))})),keyFor:n((function(e){var t;for(t in i(e),o)if(o[t]===e)return t}))})}},{"../../../validate-symbol":135,d:71}],134:[function(e,t,r){"use strict";var n,i,o,s=e("d"),a=e("./validate-symbol"),l=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),u=e("./lib/private/setup/standard-symbols"),p=e("./lib/private/setup/symbol-registry"),f=Object.create,d=Object.defineProperties,h=Object.defineProperty;if("function"==typeof l)try{String(l()),o=!0}catch(e){}else l=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return n(e)},t.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?l(t):(r=f(i.prototype),t=void 0===t?"":String(t),d(r,{__description__:s("",t),__name__:s("",c(t))}))},u(n),p(n),d(i.prototype,{constructor:s(n),toString:s("",(function(){return this.__name__}))}),d(n.prototype,{toString:s((function(){return"Symbol ("+a(this).__description__+")"})),valueOf:s((function(){return a(this)}))}),h(n.prototype,n.toPrimitive,s("",(function(){var e=a(this);return"symbol"==typeof e?e:e.toString()}))),h(n.prototype,n.toStringTag,s("c","Symbol")),h(i.prototype,n.toStringTag,s("c",n.prototype[n.toStringTag])),h(i.prototype,n.toPrimitive,s("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":131,"./lib/private/setup/standard-symbols":132,"./lib/private/setup/symbol-registry":133,"./validate-symbol":135,d:71,"ext/global-this":139}],135:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":130}],136:[function(e,t,r){"use strict";var n,i,o,s,a,l,c,u=e("d"),p=e("es5-ext/object/valid-callable"),f=Function.prototype.apply,d=Function.prototype.call,h=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var r,i;return p(t),i=this,n.call(this,e,r=function(){o.call(i,e,r),f.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s=function(e){var t,r,n,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)f.call(n,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];f.call(i,this,o)}},a={on:n=function(e,t){var r;return p(t),y.call(this,"__ee__")?r=this.__ee__:(r=v.value=h(null),m(this,"__ee__",v),v.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:i,off:o=function(e,t){var r,n,i,o;if(p(t),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:s},l={on:u(n),once:u(i),off:u(o),emit:u(s)},c=g({},l),t.exports=r=function(e){return null==e?h(c):g(Object(e),l)},r.methods=a},{d:71,"es5-ext/object/valid-callable":109}],137:[function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,r)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var i,o,s,a;if(c(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=g(l,c);for(r=0;r<c;++r)o(u[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,i,o,s;if(c(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},{}],138:[function(e,t,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],139:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":138,"./is-implemented":140}],140:[function(e,t,r){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],141:[function(e,t,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString;t.exports=function(e,t,r){if("[object Function]"!==i.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var s=0;s<o;s++)t.call(r,e[s],s,e);else for(var a in e)n.call(e,a)&&t.call(r,e[a],a,e)}},{}],142:[function(e,t,r){"use strict";var n="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,s="[object Function]";t.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==s)throw new TypeError(n+t);for(var r,a=i.call(arguments,1),l=function(){if(this instanceof r){var n=t.apply(this,a.concat(i.call(arguments)));return Object(n)===n?n:this}return t.apply(e,a.concat(i.call(arguments)))},c=Math.max(0,t.length-a.length),u=[],p=0;p<c;p++)u.push("$"+p);if(r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(l),t.prototype){var f=function(){};f.prototype=t.prototype,r.prototype=new f,f.prototype=null}return r}},{}],143:[function(e,t,r){"use strict";var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":142}],144:[function(e,t,r){"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var c=function(){throw new s},u=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(e){return c}}}():c,p=e("has-symbols")(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},h="undefined"==typeof Uint8Array?n:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?f(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":h,"%TypeError%":s,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=f(i.prototype))}return m[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=e("function-bind"),b=e("has"),w=v.call(Function.call,Array.prototype.concat),_=v.call(Function.apply,Array.prototype.splice),S=v.call(Function.call,String.prototype.replace),x=v.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,C=function(e){var t=x(e,0,1),r=x(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return S(e,O,(function(e,t,r,i){n[n.length]=r?S(i,E,"$1"):t||e})),n},P=function(e,t){var r,n=e;if(b(y,n)&&(n="%"+(r=y[n])[0]+"%"),b(m,n)){var o=m[n];if(o===d&&(o=g(n)),void 0===o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');var r=C(e),n=r.length>0?r[0]:"",o=P("%"+n+"%",t),a=o.name,c=o.value,u=!1,p=o.alias;p&&(n=p[0],_(r,w([0,1],p)));for(var f=1,d=!0;f<r.length;f+=1){var h=r[f],g=x(h,0,1),y=x(h,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&d||(u=!0),b(m,a="%"+(n+="."+h)+"%"))c=m[a];else if(null!=c){if(!(h in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&f+1>=r.length){var v=l(c,h);c=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:c[h]}else d=b(c,h),c=c[h];d&&!u&&(m[a]=c)}}return c}},{"function-bind":143,has:148,"has-symbols":145}],145:[function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=e("./shams");t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},{"./shams":146}],146:[function(e,t,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},{}],147:[function(e,t,r){"use strict";var n=e("has-symbols/shams");t.exports=function(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":146}],148:[function(e,t,r){"use strict";var n=e("function-bind");t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":143}],149:[function(e,t,r){var n=e("http"),i=e("url"),o=t.exports;for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s]);function a(e){if("string"==typeof e&&(e=i.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}o.request=function(e,t){return e=a(e),n.request.call(this,e,t)},o.get=function(e,t){return e=a(e),n.get.call(this,e,t)}},{http:200,url:233}],150:[function(e,t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,c=l>>1,u=-7,p=r?i-1:0,f=r?-1:1,d=e[t+p];for(p+=f,o=d&(1<<-u)-1,d>>=-u,u+=a;u>0;o=256*o+e[t+p],p+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+p],p+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=c}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+p>=1?f/l:f*Math.pow(2,1-p))*l>=2&&(s++,l/=2),s+p>=u?(a=0,s=u):s+p>=1?(a=(t*l-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+d]=255&s,d+=h,s/=256,c-=8);e[r+d-h]|=128*m}},{}],151:[function(e,t,r){
/*!
 * in-array <https://github.com/jonschlinkert/in-array>
 *
 * Copyright (c) 2014 Jon Schlinkert, contributors.
 * Licensed under the MIT License
 */
"use strict";t.exports=function(e,t){var r,n=(e=e||[]).length;for(r=0;r<n;r++)if(e[r]===t)return!0;return!1}},{}],152:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],153:[function(e,t,r){"use strict";var n=e("has-tostringtag/shams")(),i=e("call-bind/callBound")("Object.prototype.toString"),o=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s},{"call-bind/callBound":66,"has-tostringtag/shams":147}],154:[function(e,t,r){"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=e("has-tostringtag/shams")(),l=Object.getPrototypeOf;t.exports=function(e){if("function"!=typeof e)return!1;if(s.test(o.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}},{"has-tostringtag/shams":147}],155:[function(e,t,r){(function(r){(function(){"use strict";var n=e("foreach"),i=e("available-typed-arrays"),o=e("call-bind/callBound"),s=o("Object.prototype.toString"),a=e("has-tostringtag/shams")(),l="undefined"==typeof globalThis?r:globalThis,c=i(),u=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},p=o("String.prototype.slice"),f={},d=e("es-abstract/helpers/getOwnPropertyDescriptor"),h=Object.getPrototypeOf;a&&d&&h&&n(c,(function(e){var t=new l[e];if(Symbol.toStringTag in t){var r=h(t),n=d(r,Symbol.toStringTag);if(!n){var i=h(r);n=d(i,Symbol.toStringTag)}f[e]=n.get}}));t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!a||!(Symbol.toStringTag in e)){var t=p(s(e),8,-1);return u(c,t)>-1}return!!d&&function(e){var t=!1;return n(f,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":59,"call-bind/callBound":66,"es-abstract/helpers/getOwnPropertyDescriptor":74,foreach:141,"has-tostringtag/shams":147}],156:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],157:[function(e,t,r){t.exports=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|((?:0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?))|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]{1,6}\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-*\/%&|^]|<{1,2}|>{1,3}|!=?|={1,2})=?|[?:~]|[;,.[\](){}])|(\s+)|(^$|[\s\S])/g,t.exports.matchToToken=function(e){var t={type:"invalid",value:e[0]};return e[1]?(t.type="string",t.closed=!(!e[3]&&!e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}},{}],158:[function(e,t,r){var n="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var s,a="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},c=t.cmp&&(s=t.cmp,function(e){return function(t,r){var n={key:t,value:e[t]},i={key:r,value:e[r]};return s(n,i)}}),u=[];return function e(t,s,p,f){var d=r?"\n"+new Array(f+1).join(r):"",h=r?": ":":";if(p&&p.toJSON&&"function"==typeof p.toJSON&&(p=p.toJSON()),void 0!==(p=l.call(t,s,p))){if("object"!=typeof p||null===p)return n.stringify(p);if(i(p)){for(var m=[],g=0;g<p.length;g++){var y=e(p,g,p[g],f+1)||n.stringify(null);m.push(d+r+y)}return"["+m.join(",")+d+"]"}if(-1!==u.indexOf(p)){if(a)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(p);var v=o(p).sort(c&&c(p));for(m=[],g=0;g<v.length;g++){var b=e(p,s=v[g],p[s],f+1);if(b){var w=n.stringify(s)+h+b;m.push(d+r+w)}}return u.splice(u.indexOf(p),1),"{"+m.join(",")+d+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},{jsonify:159}],159:[function(e,t,r){r.parse=e("./lib/parse"),r.stringify=e("./lib/stringify")},{"./lib/parse":160,"./lib/stringify":161}],160:[function(e,t,r){var n,i,o,s,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},l=function(e){throw{name:"SyntaxError",message:e,at:n,text:o}},c=function(e){return e&&e!==i&&l("Expected '"+e+"' instead of '"+i+"'"),i=o.charAt(n),n+=1,i},u=function(){var e,t="";for("-"===i&&(t="-",c("-"));i>="0"&&i<="9";)t+=i,c();if("."===i)for(t+=".";c()&&i>="0"&&i<="9";)t+=i;if("e"===i||"E"===i)for(t+=i,c(),"-"!==i&&"+"!==i||(t+=i,c());i>="0"&&i<="9";)t+=i,c();if(e=+t,isFinite(e))return e;l("Bad number")},p=function(){var e,t,r,n="";if('"'===i)for(;c();){if('"'===i)return c(),n;if("\\"===i)if(c(),"u"===i){for(r=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)r=16*r+e;n+=String.fromCharCode(r)}else{if("string"!=typeof a[i])break;n+=a[i]}else n+=i}l("Bad string")},f=function(){for(;i&&i<=" ";)c()};s=function(){switch(f(),i){case"{":return function(){var e,t={};if("{"===i){if(c("{"),f(),"}"===i)return c("}"),t;for(;i;){if(e=p(),f(),c(":"),Object.hasOwnProperty.call(t,e)&&l('Duplicate key "'+e+'"'),t[e]=s(),f(),"}"===i)return c("}"),t;c(","),f()}}l("Bad object")}();case"[":return function(){var e=[];if("["===i){if(c("["),f(),"]"===i)return c("]"),e;for(;i;){if(e.push(s()),f(),"]"===i)return c("]"),e;c(","),f()}}l("Bad array")}();case'"':return p();case"-":return u();default:return i>="0"&&i<="9"?u():function(){switch(i){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}l("Unexpected '"+i+"'")}()}},t.exports=function(e,t){var r;return o=e,n=0,i=" ",r=s(),f(),i&&l("Syntax error"),"function"==typeof t?function e(r,n){var i,o,s=r[n];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=e(s,i))?s[i]=o:delete s[i]);return t.call(r,n,s)}({"":r},""):r}},{}],161:[function(e,t,r){var n,i,o,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function l(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,(function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function c(e,t){var r,s,a,u,p,f=n,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof o&&(d=o.call(t,e,d)),typeof d){case"string":return l(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(n+=i,p=[],"[object Array]"===Object.prototype.toString.apply(d)){for(u=d.length,r=0;r<u;r+=1)p[r]=c(r,d)||"null";return a=0===p.length?"[]":n?"[\n"+n+p.join(",\n"+n)+"\n"+f+"]":"["+p.join(",")+"]",n=f,a}if(o&&"object"==typeof o)for(u=o.length,r=0;r<u;r+=1)"string"==typeof(s=o[r])&&(a=c(s,d))&&p.push(l(s)+(n?": ":":")+a);else for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(a=c(s,d))&&p.push(l(s)+(n?": ":":")+a);return a=0===p.length?"{}":n?"{\n"+n+p.join(",\n"+n)+"\n"+f+"}":"{"+p.join(",")+"}",n=f,a}}t.exports=function(e,t,r){var s;if(n="",i="","number"==typeof r)for(s=0;s<r;s+=1)i+=" ";else"string"==typeof r&&(i=r);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return c("",{"":e})}},{}],162:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=t.exports;for(var o in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"reserved"},i.codes={},i.types){var s=i.types[o];i.codes[s]=o}function a(e){return[0,1,2].map((function(t){return[0,1].map((function(r){return[0,1].map((function(o){var s=new n(1);return s.writeUInt8(i.codes[e]<<i.CMD_SHIFT|(r?i.DUP_MASK:0)|t<<i.QOS_SHIFT|o,0,!0),s}))}))}))}i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.LENGTH_MASK=127,i.LENGTH_FIN_MASK=128,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=n.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=n.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=n.from([i.codes.connect<<i.CMD_SHIFT]),i.PUBLISH_HEADER=a("publish"),i.SUBSCRIBE_HEADER=a("subscribe"),i.UNSUBSCRIBE_HEADER=a("unsubscribe"),i.ACKS={unsuback:a("unsuback"),puback:a("puback"),pubcomp:a("pubcomp"),pubrel:a("pubrel"),pubrec:a("pubrec")},i.SUBACK_HEADER=n.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=n.from([3]),i.VERSION4=n.from([4]),i.QOS=[0,1,2].map((function(e){return n.from([e])})),i.EMPTY={pingreq:n.from([i.codes.pingreq<<4,0]),pingresp:n.from([i.codes.pingresp<<4,0]),disconnect:n.from([i.codes.disconnect<<4,0])}},{"safe-buffer":199}],163:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("./writeToStream"),o=e("events").EventEmitter;function s(){this._array=new Array(20),this._i=0}e("inherits")(s,o),s.prototype.write=function(e){return this._array[this._i++]=e,!0},s.prototype.concat=function(){var e,t,r=0,i=new Array(this._array.length),o=this._array,s=0;for(e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?i[e]=o[e].length:i[e]=n.byteLength(o[e]),r+=i[e];for(t=n.allocUnsafe(r),e=0;e<o.length&&void 0!==o[e];e++)"string"!=typeof o[e]?(o[e].copy(t,s),s+=i[e]):(t.write(o[e],s),s+=i[e]);return t},t.exports=function(e){var t=new s;return i(e,t),t.concat()}},{"./writeToStream":168,events:137,inherits:152,"safe-buffer":199}],164:[function(e,t,r){"use strict";r.parser=e("./parser"),r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":163,"./parser":167,"./writeToStream":168}],165:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i={};function o(e){var t=n.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}t.exports={cache:i,generateCache:function(){for(var e=0;e<65536;e++)i[e]=o(e)},generateNumber:o}},{"safe-buffer":199}],166:[function(e,t,r){t.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},{}],167:[function(e,t,r){"use strict";var n=e("bl"),i=e("inherits"),o=e("events").EventEmitter,s=e("./packet"),a=e("./constants");function l(){if(!(this instanceof l))return new l;this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(l,o),l.prototype._resetState=function(){this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0},l.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,this._stateCounter>=this._states.length&&(this._stateCounter=0);return this._list.length},l.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),this._list.consume(1),!0},l.prototype._parseLength=function(){for(var e,t=0,r=1,n=0,i=!0;t<5&&(n+=r*((e=this._list.readUInt8(t++))&a.LENGTH_MASK),r*=128,0!=(e&a.LENGTH_FIN_MASK));)if(this._list.length<=t){i=!1;break}return i&&(this.packet.length=n,this._list.consume(t)),i},l.prototype._parsePayload=function(){var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseMessageId();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":case"disconnect":break;default:this._emitError(new Error("Not supported"))}e=!0}return e},l.prototype._parseConnect=function(){var e,t,r,n,i,o,s={},l=this.packet;if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(l.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(l.protocolVersion=this._list.readUInt8(this._pos),3!==l.protocolVersion&&4!==l.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,s.will&&(l.will={},l.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),l.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),l.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,l.keepalive=this._parseNum(),-1===l.keepalive)return this._emitError(new Error("Packet too short"));if(null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(l.clientId=t,s.will){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(l.will.topic=r,null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));l.will.payload=n}if(s.username){if(null===(o=this._parseString()))return this._emitError(new Error("Cannot parse username"));l.username=o}if(s.password){if(null===(i=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));l.password=i}return l},l.prototype._parseConnack=function(){var e=this.packet;return this._list.length<2?null:(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),e.returnCode=this._list.readUInt8(this._pos),-1===e.returnCode?this._emitError(new Error("Cannot parse return code")):void 0)},l.prototype._parsePublish=function(){var e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));e.qos>0&&!this._parseMessageId()||(e.payload=this._list.slice(this._pos,e.length))},l.prototype._parseSubscribe=function(){var e,t,r=this.packet;if(1!==r.qos)return this._emitError(new Error("Wrong subscribe header"));if(r.subscriptions=[],this._parseMessageId())for(;this._pos<r.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=r.length)return this._emitError(new Error("Malformed Subscribe Payload"));t=this._list.readUInt8(this._pos++),r.subscriptions.push({topic:e,qos:t})}},l.prototype._parseSuback=function(){if(this.packet.granted=[],this._parseMessageId())for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},l.prototype._parseUnsubscribe=function(){var e=this.packet;if(e.unsubscriptions=[],this._parseMessageId())for(;this._pos<e.length;){var t;if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));e.unsubscriptions.push(t)}},l.prototype._parseUnsuback=function(){if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"))},l.prototype._parseMessageId=function(){var e=this.packet;return e.messageId=this._parseNum(),null!==e.messageId||(this._emitError(new Error("Cannot parse messageId")),!1)},l.prototype._parseString=function(e){var t,r=this._parseNum(),n=r+this._pos;return-1===r||n>this._list.length||n>this.packet.length?null:(t=this._list.toString("utf8",this._pos,n),this._pos+=r,t)},l.prototype._parseBuffer=function(){var e,t=this._parseNum(),r=t+this._pos;return-1===t||r>this._list.length||r>this.packet.length?null:(e=this._list.slice(this._pos,r),this._pos+=t,e)},l.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,e},l.prototype._newPacket=function(){return this.packet&&(this._list.consume(this.packet.length),this.emit("packet",this.packet)),this.packet=new s,!0},l.prototype._emitError=function(e){this.error=e,this.emit("error",e)},t.exports=l},{"./constants":162,"./packet":166,bl:61,events:137,inherits:152}],168:[function(e,t,r){"use strict";var n=e("./constants"),i=e("safe-buffer").Buffer,o=i.allocUnsafe(0),s=i.from([0]),a=e("./numbers"),l=e("process-nextick-args").nextTick,c=a.cache,u=a.generateNumber,p=a.generateCache,f=b,d=!0;function h(e,t){switch(t.cork&&(t.cork(),l(m,t)),d&&(d=!1,p()),e.cmd){case"connect":return function(e,t){var r=e||{},o=r.protocolId||"MQTT",s=r.protocolVersion||4,a=r.will,l=r.clean,c=r.keepalive||0,u=r.clientId||"",p=r.username,d=r.password;void 0===l&&(l=!0);var h=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return t.emit("error",new Error("Invalid protocolId")),!1;h+=o.length+2;if(3!==s&&4!==s)return t.emit("error",new Error("Invalid protocol version")),!1;h+=1;if("string"!=typeof u&&!i.isBuffer(u)||!u&&4!==s||!u&&!l){if(s<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*l==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else h+=u.length+2;if("number"!=typeof c||c<0||c>65535||c%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;h+=2;if(h+=1,a){if("object"!=typeof a)return t.emit("error",new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(h+=i.byteLength(a.topic)+2,a.payload&&a.payload){if(!(a.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof a.payload?h+=i.byteLength(a.payload)+2:h+=a.payload.length+2}else h+=2}var m=!1;if(null!=p){if(!x(p))return t.emit("error",new Error("Invalid username")),!1;m=!0,h+=i.byteLength(p)+2}if(null!=d){if(!m)return t.emit("error",new Error("Username is required to use password")),!1;if(!x(d))return t.emit("error",new Error("Invalid password")),!1;h+=S(d)+2}t.write(n.CONNECT_HEADER),y(t,h),_(t,o),t.write(4===s?n.VERSION4:n.VERSION3);var g=0;g|=null!=p?n.USERNAME_MASK:0,g|=null!=d?n.PASSWORD_MASK:0,g|=a&&a.retain?n.WILL_RETAIN_MASK:0,g|=a&&a.qos?a.qos<<n.WILL_QOS_SHIFT:0,g|=a?n.WILL_FLAG_MASK:0,g|=l?n.CLEAN_SESSION_MASK:0,t.write(i.from([g])),f(t,c),_(t,u),a&&(v(t,a.topic),_(t,a.payload));null!=p&&_(t,p);null!=d&&_(t,d);return!0}(e,t);case"connack":return function(e,t){var r=(e||{}).returnCode;if("number"!=typeof r)return t.emit("error",new Error("Invalid return code")),!1;return t.write(n.CONNACK_HEADER),y(t,2),t.write(e.sessionPresent?n.SESSIONPRESENT_HEADER:s),t.write(i.from([r]))}(e,t);case"publish":return function(e,t){var r=e||{},s=r.qos||0,a=r.retain?n.RETAIN_MASK:0,l=r.topic,c=r.payload||o,u=r.messageId,p=0;if("string"==typeof l)p+=i.byteLength(l)+2;else{if(!i.isBuffer(l))return t.emit("error",new Error("Invalid topic")),!1;p+=l.length+2}i.isBuffer(c)?p+=c.length:p+=i.byteLength(c);if(s&&"number"!=typeof u)return t.emit("error",new Error("Invalid messageId")),!1;s&&(p+=2);t.write(n.PUBLISH_HEADER[s][e.dup?1:0][a?1:0]),y(t,p),f(t,S(l)),t.write(l),s>0&&f(t,u);return t.write(c)}(e,t);case"puback":case"pubrec":case"pubrel":case"pubcomp":case"unsuback":return function(e,t){var r=e||{},i=r.cmd||"puback",o=r.messageId,s=r.dup&&"pubrel"===i?n.DUP_MASK:0,a=0;"pubrel"===i&&(a=1);if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;return t.write(n.ACKS[i][a][s][0]),y(t,2),f(t,o)}(e,t);case"subscribe":return function(e,t){var r=e||{},o=r.dup?n.DUP_MASK:0,s=r.messageId,a=r.subscriptions,l=0;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;l+=2;if("object"!=typeof a||!a.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var c=0;c<a.length;c+=1){var u=a[c].topic,p=a[c].qos;if("string"!=typeof u)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof p)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;l+=i.byteLength(u)+2+1}t.write(n.SUBSCRIBE_HEADER[1][o?1:0][0]),y(t,l),f(t,s);for(var d=!0,h=0;h<a.length;h++){var m=a[h],g=m.topic,b=m.qos;v(t,g),d=t.write(n.QOS[b])}return d}(e,t);case"suback":return function(e,t){var r=e||{},o=r.messageId,s=r.granted,a=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;a+=2;if("object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var l=0;l<s.length;l+=1){if("number"!=typeof s[l])return t.emit("error",new Error("Invalid qos vector")),!1;a+=1}return t.write(n.SUBACK_HEADER),y(t,a),f(t,o),t.write(i.from(s))}(e,t);case"unsubscribe":return function(e,t){var r=e||{},o=r.messageId,s=r.dup?n.DUP_MASK:0,a=r.unsubscriptions,l=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;l+=2;if("object"!=typeof a||!a.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var c=0;c<a.length;c+=1){if("string"!=typeof a[c])return t.emit("error",new Error("Invalid unsubscriptions")),!1;l+=i.byteLength(a[c])+2}t.write(n.UNSUBSCRIBE_HEADER[1][s?1:0][0]),y(t,l),f(t,o);for(var u=!0,p=0;p<a.length;p++)u=v(t,a[p]);return u}(e,t);case"pingreq":case"pingresp":case"disconnect":return function(e,t){return t.write(n.EMPTY[e.cmd])}(e,t);default:return t.emit("error",new Error("Unknown command")),!1}}function m(e){e.uncork()}Object.defineProperty(h,"cacheNumbers",{get:function(){return f===b},set:function(e){e?(c&&0!==Object.keys(c).length||(d=!0),f=b):(d=!1,f=w)}});var g={};function y(e,t){var r=g[t];r||(r=function(e){var t=0,r=0,n=i.allocUnsafe(function(e){return e>=0&&e<128?1:e>=128&&e<16384?2:e>=16384&&e<2097152?3:e>=2097152&&e<268435456?4:0}(e));do{t=e%128|0,(e=e/128|0)>0&&(t|=128),n.writeUInt8(t,r++)}while(e>0);return n}(t),t<16384&&(g[t]=r)),e.write(r)}function v(e,t){var r=i.byteLength(t);f(e,r),e.write(t,"utf8")}function b(e,t){return e.write(c[t])}function w(e,t){return e.write(u(t))}function _(e,t){"string"==typeof t?v(e,t):t?(f(e,t.length),e.write(t)):f(e,0)}function S(e){return e?e instanceof i?e.length:i.byteLength(e):0}function x(e){return"string"==typeof e||e instanceof i}t.exports=h},{"./constants":162,"./numbers":165,"process-nextick-args":180,"safe-buffer":199}],169:[function(e,t,r){(function(r,n){(function(){"use strict";var i=e("events"),o=e("./store"),s=e("end-of-stream"),a=e("mqtt-packet"),l=e("readable-stream").Writable,c=e("inherits"),u=e("reinterval"),p=e("./validations"),f=e("xtend"),d=n.setImmediate||function(e){r.nextTick(e)},h={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0};function m(e,t,r){e.emit("packetsend",t),!a.writeToStream(t,e.stream)&&r?e.stream.once("drain",r):r&&r()}function g(e,t,r){e.outgoingStore.put(t,(function(n){if(n)return r&&r(n);m(e,t,r)}))}function y(){}function v(e,t){var r,n=this;if(!(this instanceof v))return new v(e,t);for(r in this.options=t||{},h)void 0===this.options[r]?this.options[r]=h[r]:this.options[r]=t[r];this.options.clientId="string"==typeof this.options.clientId?this.options.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),this.streamBuilder=e,this.outgoingStore=this.options.outgoingStore||new o,this.incomingStore=this.options.incomingStore||new o,this.queueQoSZero=void 0===this.options.queueQoSZero||this.options.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this.on("connect",(function(){if(!this.disconnected){this.connected=!0;var e=this.outgoingStore.createStream();this.once("close",t),e.on("end",(function(){n.removeListener("close",t)})),e.on("error",(function(e){n.removeListener("close",t),n.emit("error",e)})),function t(){if(e){var r,i=e.read(1);i?n.disconnecting||n.reconnectTimer?e.destroy&&e.destroy():(r=n.outgoing[i.messageId],n.outgoing[i.messageId]=function(e,n){r&&r(e,n),t()},n._sendPacket(i)):e.once("readable",t)}}()}function t(){e.destroy(),e=null}})),this.on("close",(function(){this.connected=!1,clearTimeout(this.connackTimer)})),this.on("connect",this._setupPingTimer),this.on("connect",(function(){var e=this.queue;!function t(){var r,i=e.shift();i&&(r=i.packet,n._sendPacket(r,(function(e){i.cb&&i.cb(e),t()})))}()}));var s=!0;this.on("connect",(function(){!s&&this.options.clean&&Object.keys(this._resubscribeTopics).length>0&&(this.options.resubscribe?(this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)):this._resubscribeTopics={}),s=!1})),this.on("close",(function(){null!==n.pingTimer&&(n.pingTimer.clear(),n.pingTimer=null)})),this.on("close",this._setupReconnect),i.EventEmitter.call(this),this._setupStream()}c(v,i.EventEmitter),v.prototype._setupStream=function(){var e,t=this,n=new l,i=a.parser(this.options),o=null,c=[];function u(){r.nextTick(p)}function p(){var e=c.shift(),r=o;e?t._handlePacket(e,u):(o=null,r())}this._clearReconnect(),this.stream=this.streamBuilder(this),i.on("packet",(function(e){c.push(e)})),n._write=function(e,t,r){o=r,i.parse(e),p()},this.stream.pipe(n),this.stream.on("error",y),s(this.stream,this.emit.bind(this,"close")),(e=Object.create(this.options)).cmd="connect",m(this,e),i.on("error",this.emit.bind(this,"error")),this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){t._cleanUp(!0)}),this.options.connectTimeout)},v.prototype._handlePacket=function(e,t){switch(this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t()}},v.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},v.prototype.publish=function(e,t,r,n){var i;"function"==typeof r&&(n=r,r=null);if(r=f({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:r.qos,retain:r.retain,messageId:this._nextId(),dup:r.dup},r.qos){case 1:case 2:this.outgoing[i.messageId]=n||y,this._sendPacket(i);break;default:this._sendPacket(i,n)}return this},v.prototype.subscribe=function(){var e,t,r=Array.prototype.slice.call(arguments),n=[],i=r.shift(),o=i.resubscribe,s=r.pop()||y,a=r.pop(),l=this;if(delete i.resubscribe,"string"==typeof i&&(i=[i]),"function"!=typeof s&&(a=s,s=y),null!==(t=p.validateTopics(i)))return d(s,new Error("Invalid topic "+t)),this;if(this._checkDisconnecting(s))return this;var c={qos:0};if(a=f(c,a),Array.isArray(i)?i.forEach((function(e){(l._resubscribeTopics[e]<a.qos||!l._resubscribeTopics.hasOwnProperty(e)||o)&&n.push({topic:e,qos:a.qos})})):Object.keys(i).forEach((function(e){(l._resubscribeTopics[e]<i[e]||!l._resubscribeTopics.hasOwnProperty(e)||o)&&n.push({topic:e,qos:i[e]})})),e={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:this._nextId()},n.length){if(this.options.resubscribe){var u=[];n.forEach((function(e){l.options.reconnectPeriod>0&&(l._resubscribeTopics[e.topic]=e.qos,u.push(e.topic))})),l.messageIdToTopic[e.messageId]=u}return this.outgoing[e.messageId]=function(e,t){if(!e)for(var r=t.granted,i=0;i<r.length;i+=1)n[i].qos=r[i];s(e,n)},this._sendPacket(e),this}s(null,[])},v.prototype.unsubscribe=function(e,t){var r={cmd:"unsubscribe",qos:1,messageId:this._nextId()},n=this;return t=t||y,this._checkDisconnecting(t)||("string"==typeof e?r.unsubscriptions=[e]:"object"==typeof e&&e.length&&(r.unsubscriptions=e),this.options.resubscribe&&r.unsubscriptions.forEach((function(e){delete n._resubscribeTopics[e]})),this.outgoing[r.messageId]=t,this._sendPacket(r)),this},v.prototype.end=function(e,t){var r=this;function n(){r.disconnected=!0,r.incomingStore.close((function(){r.outgoingStore.close((function(){t&&t.apply(null,arguments),r.emit("end")}))})),r._deferredReconnect&&r._deferredReconnect()}function i(){r._cleanUp(e,d.bind(null,n))}return"function"==typeof e&&(t=e,e=!1),this.disconnecting||(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?this.once("outgoingEmpty",setTimeout.bind(null,i,10)):i()),this},v.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e];return delete this.outgoing[e],this.outgoingStore.del({messageId:e},(function(){t(new Error("Message removed"))})),this},v.prototype.reconnect=function(e){var t=this,r=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},v.prototype._reconnect=function(){this.emit("reconnect"),this._setupStream()},v.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0&&(this.reconnecting||(this.emit("offline"),this.reconnecting=!0),e.reconnectTimer=setInterval((function(){e._reconnect()}),e.options.reconnectPeriod))},v.prototype._clearReconnect=function(){this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},v.prototype._cleanUp=function(e,t){var r;t&&this.stream.on("close",t),e?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&Object.keys(r).forEach((function(e){"function"==typeof r[e]&&(r[e](new Error("Connection closed")),delete r[e])})),this.stream.destroy()):this._sendPacket({cmd:"disconnect"},d.bind(null,this.stream.end.bind(this.stream))),this.disconnecting||(this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(this.stream.removeListener("close",t),t())},v.prototype._sendPacket=function(e,t){if(this.connected){switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void g(this,e,t);default:return void m(this,e,t)}switch(e.qos){case 2:case 1:g(this,e,t);break;default:m(this,e,t)}}else 0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):e.qos>0?(t=this.outgoing[e.messageId],this.outgoingStore.put(e,(function(e){if(e)return t&&t(e)}))):t&&t(new Error("No connection to broker"))},v.prototype._setupPingTimer=function(){var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=u((function(){e._checkPing()}),1e3*this.options.keepalive))},v.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},v.prototype._checkPing=function(){this.pingResp?(this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):this._cleanUp(!0)},v.prototype._handlePingresp=function(){this.pingResp=!0},v.prototype._handleConnack=function(e){var t=e.returnCode;if(clearTimeout(this.connackTimer),0===t)this.reconnecting=!1,this.emit("connect",e);else if(t>0){var r=new Error("Connection refused: "+["","Unacceptable protocol version","Identifier rejected","Server unavailable","Bad username or password","Not authorized"][t]);r.code=t,this.emit("error",r)}},v.prototype._handlePublish=function(e,t){t=void 0!==t?t:y;var r=e.topic.toString(),n=e.payload,i=e.qos,o=e.messageId,s=this;switch(i){case 2:this.incomingStore.put(e,(function(e){if(e)return t(e);s._sendPacket({cmd:"pubrec",messageId:o},t)}));break;case 1:this.emit("message",r,n,e),this.handleMessage(e,(function(e){if(e)return t(e);s._sendPacket({cmd:"puback",messageId:o},t)}));break;case 0:this.emit("message",r,n,e),this.handleMessage(e,t)}},v.prototype.handleMessage=function(e,t){t()},v.prototype._handleAck=function(e){var t=e.messageId,r=e.cmd,n=null,i=this.outgoing[t],o=this;if(i){switch(r){case"pubcomp":case"puback":delete this.outgoing[t],this.outgoingStore.del(e,i);break;case"pubrec":n={cmd:"pubrel",qos:2,messageId:t},this._sendPacket(n);break;case"suback":if(delete this.outgoing[t],1===e.granted.length&&0!=(128&e.granted[0])){var s=this.messageIdToTopic[t];s&&s.forEach((function(e){delete o._resubscribeTopics[e]}))}i(null,e);break;case"unsuback":delete this.outgoing[t],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}},v.prototype._handlePubrel=function(e,t){t=void 0!==t?t:y;var r=e.messageId,n=this,i={cmd:"pubcomp",messageId:r};n.incomingStore.get(e,(function(r,o){r||"pubrel"===o.cmd?n._sendPacket(i,t):(n.emit("message",o.topic,o.payload,o),n.incomingStore.put(e,(function(e){if(e)return t(e);n.handleMessage(o,(function(e){if(e)return t(e);n._sendPacket(i,t)}))})))}))},v.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},v.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},t.exports=v}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./store":175,"./validations":176,_process:181,"end-of-stream":73,events:137,inherits:152,"mqtt-packet":164,"readable-stream":197,reinterval:198,xtend:258}],170:[function(e,t,r){(function(r){(function(){"use strict";var n=e("../client"),i=e("../store"),o=e("url"),s=e("xtend"),a={};function l(e,t){if("object"!=typeof e||t||(t=e,e=null),t=t||{},e){var r=o.parse(e,!0);if(null!=r.port&&(r.port=Number(r.port)),null===(t=s(r,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(function(e){var t;e.auth&&((t=e.auth.match(/^(.+):(.+)$/))?(e.username=t[1],e.password=t[2]):e.username=e.auth)}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!a[t.protocol]){var i=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs"].filter((function(e,t){return(!i||t%2!=0)&&"function"==typeof a[e]}))[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");return t.protocol&&(t.defaultProtocol=t.protocol),new n((function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a[t.protocol](e,t)}),t)}"browser"!==r.title?(a.mqtt=e("./tcp"),a.tcp=e("./tcp"),a.ssl=e("./tls"),a.tls=e("./tls"),a.mqtts=e("./tls")):(a.wx=e("./wx"),a.wxs=e("./wx")),a.ws=e("./ws"),a.wss=e("./ws"),t.exports=l,t.exports.connect=l,t.exports.MqttClient=n,t.exports.Store=i}).call(this)}).call(this,e("_process"))},{"../client":169,"../store":175,"./tcp":171,"./tls":172,"./ws":173,"./wx":174,_process:181,url:233,xtend:258}],171:[function(e,t,r){"use strict";var n=e("net");t.exports=function(e,t){var r,i;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",r=t.port,i=t.hostname,n.createConnection(r,i)}},{net:62}],172:[function(e,t,r){"use strict";var n=e("tls");t.exports=function(e,t){var r;function i(n){t.rejectUnauthorized&&e.emit("error",n),r.end()}return t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,(r=n.connect(t)).on("secureConnect",(function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",i)})),r.on("error",i),r}},{tls:62}],173:[function(e,t,r){(function(r){(function(){"use strict";var n=e("websocket-stream"),i=e("url"),o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],s="browser"===r.title;function a(e,t){var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),s||"wss"!==e.protocol||o.forEach((function(t){e.hasOwnProperty(t)&&!e.wsOptions.hasOwnProperty(t)&&(e.wsOptions[t]=e[t])}))}(t);var i=function(e,t){var r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}(t,e);return n(i,[r],t.wsOptions)}t.exports=s?function(e,t){if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var r=i.parse(document.URL);t.hostname=r.hostname,t.port||(t.port=r.port)}return a(e,t)}:function(e,t){return a(e,t)}}).call(this)}).call(this,e("_process"))},{_process:181,url:233,"websocket-stream":254}],174:[function(e,t,r){"use strict";var n=!1,i=[];function o(e){n?wx.sendSocketMessage({data:e.buffer||e}):i.push(e)}var s=e("websocket-stream");function a(e,t){var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);var a=function(e,t){var r="wxs"===e.protocol?"wss":"ws",n=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(n=r+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(t,e);return s(function(e,t){var r={OPEN:1,CLOSING:2,CLOSED:3,readyState:n?1:0,send:o,close:wx.closeSocket,onopen:null,onmessage:null,onclose:null,onerror:null};return wx.connectSocket({url:e,protocols:t}),wx.onSocketOpen((function(e){r.readyState=r.OPEN,n=!0;for(var t=0;t<i.length;t++)o(i[t]);i=[],r.onopen&&r.onopen.apply(r,arguments)})),wx.onSocketMessage((function(e){r.onmessage&&r.onmessage.apply(r,arguments)})),wx.onSocketClose((function(){r.onclose&&r.onclose.apply(r,arguments),r.readyState=r.CLOSED,n=!1})),wx.onSocketError((function(){r.onerror&&r.onerror.apply(r,arguments),r.readyState=r.CLOSED,n=!1})),r}(a,[r]))}t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");return a(e,t)}},{"websocket-stream":254}],175:[function(e,t,r){(function(r){(function(){"use strict";var n=e("xtend"),i=e("readable-stream").Readable,o={objectMode:!0},s={clean:!0},a=e("es6-map");function l(e){if(!(this instanceof l))return new l(e);this.options=e||{},this.options=n(s,e),this._inflights=new a}l.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},l.prototype.createStream=function(){var e=new i(o),t=!1,n=[],s=0;return this._inflights.forEach((function(e,t){n.push(e)})),e._read=function(){!t&&s<n.length?this.push(n[s++]):this.push(null)},e.destroy=function(){if(!t){var e=this;t=!0,r.nextTick((function(){e.emit("close")}))}},e},l.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},l.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},l.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=l}).call(this)}).call(this,e("_process"))},{_process:181,"es6-map":122,"readable-stream":197,xtend:258}],176:[function(e,t,r){"use strict";function n(e){for(var t=e.split("/"),r=0;r<t.length;r++)if("+"!==t[r]){if("#"===t[r])return r===t.length-1;if(-1!==t[r].indexOf("+")||-1!==t[r].indexOf("#"))return!1}return!0}t.exports={validateTopics:function(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!n(e[t]))return e[t];return null}}},{}],177:[function(e,t,r){var n=e("wrappy");function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}t.exports=n(i),t.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},{wrappy:257}],178:[function(e,t,r){r.endianness=function(){return"LE"},r.hostname=function(){return"undefined"!=typeof location?location.hostname:""},r.loadavg=function(){return[]},r.uptime=function(){return 0},r.freemem=function(){return Number.MAX_VALUE},r.totalmem=function(){return Number.MAX_VALUE},r.cpus=function(){return[]},r.type=function(){return"Browser"},r.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},r.networkInterfaces=r.getNetworkInterfaces=function(){return{}},r.arch=function(){return"javascript"},r.platform=function(){return"browser"},r.tmpdir=r.tmpDir=function(){return"/tmp"},r.EOL="\n",r.homedir=function(){return"/"}},{}],179:[function(e,t,r){(function(e){(function(){"use strict";function r(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var r,n="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(o+1,a):n=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var i={resolve:function(){for(var t,i="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var a;s>=0?a=arguments[s]:(void 0===t&&(t=e.cwd()),a=t),r(a),0!==a.length&&(i=a+"/"+i,o=47===a.charCodeAt(0))}return i=n(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(e){if(r(e),0===e.length)return".";var t=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!t)).length||t||(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return r(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];r(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,t){if(r(e),r(t),e===t)return"";if((e=i.resolve(e))===(t=i.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,s=o-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var l=t.length-a,c=s<l?s:l,u=-1,p=0;p<=c;++p){if(p===c){if(l>c){if(47===t.charCodeAt(a+p))return t.slice(a+p+1);if(0===p)return t.slice(a+p)}else s>c&&(47===e.charCodeAt(n+p)?u=p:0===p&&(u=0));break}var f=e.charCodeAt(n+p);if(f!==t.charCodeAt(a+p))break;47===f&&(u=p)}var d="";for(p=n+u+1;p<=o;++p)p!==o&&47!==e.charCodeAt(p)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(a+u):(a+=u,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(r(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?n?"/":".":n&&1===i?"//":e.slice(0,i)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');r(e);var n,i=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!s){i=n+1;break}}else-1===l&&(s=!1,l=n+1),a>=0&&(c===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=l))}return i===o?o=l:-1===o&&(o=e.length),e.slice(i,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){i=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(i,o)},extname:function(e){r(e);for(var t=-1,n=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===i&&(o=!1,i=a+1),46===l?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===i||0===s||1===s&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)},parse:function(e){r(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,i=e.charCodeAt(0),o=47===i;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,l=-1,c=!0,u=e.length-1,p=0;u>=n;--u)if(47!==(i=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===i?-1===s?s=u:1!==p&&(p=1):-1!==s&&(p=-1);else if(!c){a=u+1;break}return-1===s||-1===l||0===p||1===p&&s===l-1&&s===a+1?-1!==l&&(t.base=t.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(a,s),t.base=e.slice(a,l)),t.ext=e.slice(s,l)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,t.exports=i}).call(this)}).call(this,e("_process"))},{_process:181}],180:[function(e,t,r){(function(e){(function(){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this)}).call(this,e("_process"))},{_process:181}],181:[function(e,t,r){var n,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,u=[],p=!1,f=-1;function d(){p&&c&&(p=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!p){var e=l(d);p=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,p=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new m(e,t)),1!==u.length||p||l(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],182:[function(e,t,r){(function(e){(function(){!function(n){var i="object"==typeof r&&r&&!r.nodeType&&r,o="object"==typeof t&&t&&!t.nodeType&&t,s="object"==typeof e&&e;s.global!==s&&s.window!==s&&s.self!==s||(n=s);var a,l,c=2147483647,u=36,p=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function y(e){throw new RangeError(h[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function b(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(d,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function _(e){return v(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=u)e=m(e/35);return m(n+36*e/(e+38))}function O(e){var t,r,n,i,o,s,a,l,p,f,d,h=[],g=e.length,v=0,b=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),h.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(o=v,s=1,a=u;i>=g&&y("invalid-input"),((l=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:u)>=u||l>m((c-v)/s))&&y("overflow"),v+=l*s,!(l<(p=a<=w?1:a>=w+26?26:a-w));a+=u)s>m(c/(f=u-p))&&y("overflow"),s*=f;w=x(v-o,t=h.length+1,0==o),m(v/t)>c-b&&y("overflow"),b+=m(v/t),v%=t,h.splice(v++,0,b)}return _(h)}function E(e){var t,r,n,i,o,s,a,l,p,f,d,h,v,b,_,O=[];for(h=(e=w(e)).length,t=128,r=0,o=72,s=0;s<h;++s)(d=e[s])<128&&O.push(g(d));for(n=i=O.length,i&&O.push("-");n<h;){for(a=c,s=0;s<h;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>m((c-r)/(v=n+1))&&y("overflow"),r+=(a-t)*v,t=a,s=0;s<h;++s)if((d=e[s])<t&&++r>c&&y("overflow"),d==t){for(l=r,p=u;!(l<(f=p<=o?1:p>=o+26?26:p-o));p+=u)_=l-f,b=u-f,O.push(g(S(f+_%b,0))),l=m(_/b);O.push(g(S(l,0))),o=x(r,v,n==i),r=0,++n}++r,++t}return O.join("")}if(a={version:"1.4.1",ucs2:{decode:w,encode:_},decode:O,encode:E,toASCII:function(e){return b(e,(function(e){return f.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return b(e,(function(e){return p.test(e)?O(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return a}));else if(i&&o)if(t.exports==i)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);else n.punycode=a}(this)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var p,f,d,h,m=e[u].replace(a,"%20"),g=m.indexOf(r);g>=0?(p=m.substr(0,g),f=m.substr(g+1)):(p=m,f=""),d=decodeURIComponent(p),h=decodeURIComponent(f),n(s,d)?i(s[d])?s[d].push(h):s[d]=[s[d],h]:s[d]=h}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],184:[function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(n(s))+r;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[s]))})).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],185:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":183,"./encode":184}],186:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":187}],187:[function(e,t,r){"use strict";var n=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=p;var o=Object.create(e("core-util-is"));o.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");o.inherits(p,s);for(var l=i(a.prototype),c=0;c<l.length;c++){var u=l[c];p.prototype[u]||(p.prototype[u]=a.prototype[u])}function p(e){if(!(this instanceof p))return new p(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"./_stream_readable":189,"./_stream_writable":191,"core-util-is":69,inherits:152,"process-nextick-args":180}],188:[function(e,t,r){"use strict";t.exports=o;var n=e("./_stream_transform"),i=Object.create(e("core-util-is"));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=e("inherits"),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":190,"core-util-is":69,inherits:152}],189:[function(e,t,r){(function(r,n){(function(){"use strict";var i=e("process-nextick-args");t.exports=b;var o,s=e("isarray");b.ReadableState=v;e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,u=n.Uint8Array||function(){};var p=Object.create(e("core-util-is"));p.inherits=e("inherits");var f=e("util"),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var h,m=e("./internal/streams/BufferList"),g=e("./internal/streams/destroy");p.inherits(b,l);var y=["error","close","destroy","pause","resume"];function v(t,r){t=t||{};var n=r instanceof(o=o||e("./_stream_duplex"));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=e("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||e("./_stream_duplex"),!(this instanceof b))return new b(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function w(e,t,r,n,i){var o,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,O(e)}(e,s)):(i||(o=function(e,t){var r;n=t,c.isBuffer(n)||n instanceof u||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,t)),o?e.emit("error",o):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?_(e,s,t,!1):C(e,s)):_(e,s,t,!1))):n||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function _(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),C(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),w(this,e,t,!1,r)},b.prototype.unshift=function(e){return w(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return h||(h=e("string_decoder/").StringDecoder),this._readableState.decoder=new h(t),this._readableState.encoding=t,this};var S=8388608;function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){d("emit readable"),e.emit("readable"),L(e)}function C(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(P,e,t))}function P(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function I(e){d("readable nexttick read 0"),e.read(0)}function k(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&A(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&A(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,t);var l=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:b;function c(t,r){d("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",p),e.removeListener("error",g),e.removeListener("unpipe",c),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",m),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function u(){d("onend"),e.end()}o.endEmitted?i.nextTick(l):n.once("end",l),e.on("unpipe",c);var p=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",p);var f=!1;var h=!1;function m(t){d("ondata"),h=!1,!1!==e.write(t)||h||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==M(o.pipes,e))&&!f&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function g(t){d("onerror",t),b(),e.removeListener("error",g),0===a(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),b()}function v(){d("onfinish"),e.removeListener("close",y),b()}function b(){d("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=M(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&O(this):i.nextTick(I,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(k,e,t))}(this,e)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(d("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(d("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<y.length;o++)e.on(y[o],this.emit.bind(this,y[o]));return this._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=T}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":187,"./internal/streams/BufferList":192,"./internal/streams/destroy":193,"./internal/streams/stream":194,_process:181,"core-util-is":69,events:137,inherits:152,isarray:156,"process-nextick-args":180,"safe-buffer":195,"string_decoder/":196,util:62}],190:[function(e,t,r){"use strict";t.exports=s;var n=e("./_stream_duplex"),i=Object.create(e("core-util-is"));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){l(e,t,r)})):l(this,null,null)}function l(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(s,n),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},{"./_stream_duplex":187,"core-util-is":69,inherits:152}],191:[function(e,t,r){(function(r,n,i){(function(){"use strict";var o=e("process-nextick-args");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=v;var a,l=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;v.WritableState=y;var c=Object.create(e("core-util-is"));c.inherits=e("inherits");var u={deprecate:e("util-deprecate")},p=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,d=n.Uint8Array||function(){};var h,m=e("./internal/streams/destroy");function g(){}function y(t,r){a=a||e("./_stream_duplex"),t=t||{};var n=r instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,c=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===t.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),O(e,t))}(e,r,n,t,i);else{var s=S(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),n?l(w,e,r,s,i):w(e,r,s,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(a=a||e("./_stream_duplex"),!(h.call(v,this)||this instanceof a))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),p.call(this)}function b(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function w(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),O(e,t)}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,l=!0;r;)i[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;i.allBuffers=l,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,p=r.callback;if(b(e,t,!1,t.objectMode?1:c.length,c,u,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=S(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(x,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}c.inherits(v,p),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===v&&(e&&e._writableState instanceof y)}})):h=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=e,f.isBuffer(n)||n instanceof d);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(a||function(e,t,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,a,n,i,o);return l}(this,i,a,e,t,r)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":187,"./internal/streams/destroy":193,"./internal/streams/stream":194,_process:181,"core-util-is":69,inherits:152,"process-nextick-args":180,"safe-buffer":195,timers:221,"util-deprecate":235}],192:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,o=n.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=o,i=a,t.copy(r,i),a+=s.data.length,s=s.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":195,util:62}],193:[function(e,t,r){"use strict";var n=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(n.nextTick(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":180}],194:[function(e,t,r){t.exports=e("events").EventEmitter},{events:137}],195:[function(e,t,r){var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:64}],196:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=p,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":195}],197:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":187,"./lib/_stream_passthrough.js":188,"./lib/_stream_readable.js":189,"./lib/_stream_transform.js":190,"./lib/_stream_writable.js":191}],198:[function(e,t,r){"use strict";function n(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=n._interval),n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new n(arguments[0],arguments[1],e)}},{}],199:[function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=e("buffer"),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:64}],200:[function(e,t,r){(function(t){(function(){var n=e("./lib/request"),i=e("./lib/response"),o=e("xtend"),s=e("builtin-status-codes"),a=e("url"),l=r;l.request=function(e,r){e="string"==typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,l=e.hostname||e.host,c=e.port,u=e.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),e.url=(l?s+"//"+l:"")+(c?":"+c:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var p=new n(e);return r&&p.on("response",r),p},l.get=function(e,t){var r=l.request(e,t);return r.end(),r},l.ClientRequest=n,l.IncomingMessage=i.IncomingMessage,l.Agent=function(){},l.Agent.defaultMaxSockets=4,l.globalAgent=new l.Agent,l.STATUS_CODES=s,l.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":202,"./lib/response":203,"builtin-status-codes":65,url:233,xtend:258}],201:[function(e,t,r){(function(e){(function(){var t;function n(){if(void 0!==t)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest;try{t.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){t=null}}else t=null;return t}function i(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function o(e){return"function"==typeof e}r.fetch=o(e.fetch)&&o(e.ReadableStream),r.writableStream=o(e.WritableStream),r.abortController=o(e.AbortController),r.arraybuffer=r.fetch||i("arraybuffer"),r.msstream=!r.fetch&&i("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&i("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!n()&&o(n().overrideMimeType),t=null}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],202:[function(e,t,r){(function(r,n,i){(function(){var o=e("./capability"),s=e("inherits"),a=e("./response"),l=e("readable-stream"),c=a.IncomingMessage,u=a.readyStates;var p=t.exports=function(e){var t,r=this;l.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+i.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){r.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!o.abortController)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!o.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}r._mode=function(e,t){return o.fetch&&t?"fetch":o.mozchunkedarraybuffer?"moz-chunked-arraybuffer":o.msstream?"ms-stream":o.arraybuffer&&e?"arraybuffer":"text"}(t,n),r._fetchTimer=null,r._socketTimeout=null,r._socketTimer=null,r.on("finish",(function(){r._onFinish()}))};s(p,l.Writable),p.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===f.indexOf(r)&&(this._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts;"timeout"in t&&0!==t.timeout&&e.setTimeout(t.timeout);var i=e._headers,s=null;"GET"!==t.method&&"HEAD"!==t.method&&(s=new Blob(e._body,{type:(i["content-type"]||{}).value||""}));var a=[];if(Object.keys(i).forEach((function(e){var t=i[e].name,r=i[e].value;Array.isArray(r)?r.forEach((function(e){a.push([t,e])})):a.push([t,r])})),"fetch"===e._mode){var l=null;if(o.abortController){var c=new AbortController;l=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=n.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}n.fetch(e._opts.url,{method:e._opts.method,headers:a,body:s||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:l}).then((function(t){e._fetchResponse=t,e._resetTimers(!1),e._connect()}),(function(t){e._resetTimers(!0),e._destroyed||e.emit("error",t)}))}else{var p=e._xhr=new n.XMLHttpRequest;try{p.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}"responseType"in p&&(p.responseType=e._mode),"withCredentials"in p&&(p.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(p.timeout=t.requestTimeout,p.ontimeout=function(){e.emit("requestTimeout")}),a.forEach((function(e){p.setRequestHeader(e[0],e[1])})),e._response=null,p.onreadystatechange=function(){switch(p.readyState){case u.LOADING:case u.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(p.onprogress=function(){e._onXHRProgress()}),p.onerror=function(){e._destroyed||(e._resetTimers(!0),e.emit("error",new Error("XHR error")))};try{p.send(s)}catch(t){return void r.nextTick((function(){e.emit("error",t)}))}}}},p.prototype._onXHRProgress=function(){var e=this;e._resetTimers(!1),function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress(e._resetTimers.bind(e)))},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new c(e._xhr,e._fetchResponse,e._mode,e._resetTimers.bind(e)),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},p.prototype._write=function(e,t,r){this._body.push(e),r()},p.prototype._resetTimers=function(e){var t=this;n.clearTimeout(t._socketTimer),t._socketTimer=null,e?(n.clearTimeout(t._fetchTimer),t._fetchTimer=null):t._socketTimeout&&(t._socketTimer=n.setTimeout((function(){t.emit("timeout")}),t._socketTimeout))},p.prototype.abort=p.prototype.destroy=function(e){var t=this;t._destroyed=!0,t._resetTimers(!0),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort(),e&&t.emit("error",e)},p.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),l.Writable.prototype.end.call(this,e,t,r)},p.prototype.setTimeout=function(e,t){var r=this;t&&r.once("timeout",t),r._socketTimeout=e,r._resetTimers(!1)},p.prototype.flushHeaders=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":201,"./response":203,_process:181,buffer:64,inherits:152,"readable-stream":218}],203:[function(e,t,r){(function(t,n,i){(function(){var o=e("./capability"),s=e("inherits"),a=e("readable-stream"),l=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=r.IncomingMessage=function(e,r,n,s){var l=this;if(a.Readable.call(l),l._mode=n,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",(function(){t.nextTick((function(){l.emit("close")}))})),"fetch"===n){if(l._fetchResponse=r,l.url=r.url,l.statusCode=r.status,l.statusMessage=r.statusText,r.headers.forEach((function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)})),o.writableStream){var c=new WritableStream({write:function(e){return s(!1),new Promise((function(t,r){l._destroyed?r():l.push(i.from(e))?t():l._resumeFetch=t}))},close:function(){s(!0),l._destroyed||l.push(null)},abort:function(e){s(!0),l._destroyed||l.emit("error",e)}});try{return void r.body.pipeTo(c).catch((function(e){s(!0),l._destroyed||l.emit("error",e)}))}catch(e){}}var u=r.body.getReader();!function e(){u.read().then((function(t){l._destroyed||(s(t.done),t.done?l.push(null):(l.push(i.from(t.value)),e()))})).catch((function(e){s(!0),l._destroyed||l.emit("error",e)}))}()}else{if(l._xhr=e,l._pos=0,l.url=e.responseURL,l.statusCode=e.status,l.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===l.headers[r]&&(l.headers[r]=[]),l.headers[r].push(t[2])):void 0!==l.headers[r]?l.headers[r]+=", "+t[2]:l.headers[r]=t[2],l.rawHeaders.push(t[1],t[2])}})),l._charset="x-user-defined",!o.overrideMimeType){var p=l.rawHeaders["mime-type"];if(p){var f=p.match(/;\s*charset=([^;])(;|$)/);f&&(l._charset=f[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(e){var t=this,r=t._xhr,o=null;switch(t._mode){case"text":if((o=r.responseText).length>t._pos){var s=o.substr(t._pos);if("x-user-defined"===t._charset){for(var a=i.alloc(s.length),c=0;c<s.length;c++)a[c]=255&s.charCodeAt(c);t.push(a)}else t.push(s,t._charset);t._pos=o.length}break;case"arraybuffer":if(r.readyState!==l.DONE||!r.response)break;o=r.response,t.push(i.from(new Uint8Array(o)));break;case"moz-chunked-arraybuffer":if(o=r.response,r.readyState!==l.LOADING||!o)break;t.push(i.from(new Uint8Array(o)));break;case"ms-stream":if(o=r.response,r.readyState!==l.LOADING)break;var u=new n.MSStreamReader;u.onprogress=function(){u.result.byteLength>t._pos&&(t.push(i.from(new Uint8Array(u.result.slice(t._pos)))),t._pos=u.result.byteLength)},u.onload=function(){e(!0),t.push(null)},u.readAsArrayBuffer(o)}t._xhr.readyState===l.DONE&&"ms-stream"!==t._mode&&(e(!0),t.push(null))}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":201,_process:181,buffer:64,inherits:152,"readable-stream":218}],204:[function(e,t,r){"use strict";var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var l=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(l," ").concat(n," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],205:[function(e,t,r){(function(r){(function(){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var l=s[a];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":207,"./_stream_writable":209,_process:181,inherits:152}],206:[function(e,t,r){"use strict";t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":208,inherits:152}],207:[function(e,t,r){(function(r,n){(function(){"use strict";var i;t.exports=E,E.ReadableState=O;e("events").EventEmitter;var o=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,l=n.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var p,f,d,h=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,y=e("../errors").codes,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var S=m.errorOrDestroy,x=["error","close","destroy","pause","resume"];function O(t,r,n){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",n),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=e("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof i;this._readableState=new O(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function C(e,t,r,n,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?L(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,s);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),o)S(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?S(e,new _):P(e,s,t,!0);else if(s.ended)S(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):A(e,s)):P(e,s,t,!1)}else n||(s.reading=!1,A(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&L(e)),A(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),C(this,e,t,!1,r)},E.prototype.unshift=function(e){return C(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){p||(p=e("string_decoder/").StringDecoder);var r=new p(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(T,e))}function T(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(j,e,t))}function j(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){c("readable nexttick read 0"),e.read(0)}function D(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function V(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):L(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(r,t))),null===(n=e>0?V(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){S(this,new w("_read()"))},E.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",l),n.removeListener("end",g),n.removeListener("data",f),p=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function l(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",u);var p=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!p&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===o(e,"error")&&S(e,t)}function h(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",h),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",h),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?L(this):i.reading||r.nextTick(R,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(M,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(M,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(D,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=V,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return void 0===d&&(d=e("./internal/streams/from")),d(E,t,r)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":204,"./_stream_duplex":205,"./internal/streams/async_iterator":210,"./internal/streams/buffer_list":211,"./internal/streams/destroy":212,"./internal/streams/from":214,"./internal/streams/state":216,"./internal/streams/stream":217,_process:181,buffer:64,events:137,inherits:152,"string_decoder/":220,util:62}],208:[function(e,t,r){"use strict";t.exports=u;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",p)}function p(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":204,"./_stream_duplex":205,inherits:152}],209:[function(e,t,r){(function(r,n){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;t.exports=E,E.WritableState=O;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),l=e("buffer").Buffer,c=n.Uint8Array||function(){};var u,p=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,d=e("../errors").codes,h=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=p.errorOrDestroy;function x(){}function O(t,n,s){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof o),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(T,e,t),e._writableState.errorEmitted=!0,S(e,i)):(o(i),e._writableState.errorEmitted=!0,S(e,i),T(e,t))}(e,n,i,t,o);else{var s=k(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||I(e,n),i?r.nextTick(P,e,n,s,o):P(e,n,s,o)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(t){var r=this instanceof(o=o||e("./_stream_duplex"));if(!r&&!u.call(E,this))return new E(t);this._writableState=new O(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function C(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),T(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,C(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,p=r.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,u,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(L,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,a),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===E&&(e&&e._writableState instanceof O)}})):u=function(e){return e instanceof this},E.prototype.pipe=function(){S(this,new y)},E.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof c);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=x),o.ending?function(e,t){var n=new w;S(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(S(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,n,i,o);return c}(this,o,a,e,t,n)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":204,"./_stream_duplex":205,"./internal/streams/destroy":212,"./internal/streams/state":216,"./internal/streams/stream":217,_process:181,buffer:64,inherits:152,"util-deprecate":235}],210:[function(e,t,r){(function(r){(function(){"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),f=Symbol("stream");function d(e,t){return{value:e,done:t}}function h(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[u]=null,e[s]=null,e[a]=null,t(d(r,!1)))}}function m(e){r.nextTick(h,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(d(void 0,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(void 0,!0)):t[p](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[p])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(y,(i(t={},f,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,p,{value:function(e,t){var n=r[f].read();n?(r[u]=null,r[s]=null,r[a]=null,e(d(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[s]=null,r[a]=null,t(e)),void(r[l]=e)}var n=r[s];null!==n&&(r[u]=null,r[s]=null,r[a]=null,n(d(void 0,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":213,_process:181}],211:[function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=e("buffer").Buffer,a=e("util").inspect,l=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=i,n=a,s.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()},{buffer:64,util:62}],212:[function(e,t,r){(function(e){(function(){"use strict";function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:181}],213:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,s||o.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,p=!0,a||o.call(t)},d=function(e){o.call(t,e)},h=function(){var e;return s&&!p?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",u),t.on("abort",h),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",u),!1!==r.error&&t.on("error",d),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",h)}}},{"../../../errors":204}],214:[function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],215:[function(e,t,r){"use strict";var n;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(t,r,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;t.on("close",(function(){a=!0})),void 0===n&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var l=!1;return function(e){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function c(e){e()}function u(e,t){return e.pipe(t)}function p(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=p(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,r){var o=r<t.length-1;return l(e,o,r>0,(function(e){n||(n=e),e&&s.forEach(c),o||(s.forEach(c),i(n))}))}));return t.reduce(u)}},{"../../../errors":204,"./end-of-stream":213}],216:[function(e,t,r){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},{"../../../errors":204}],217:[function(e,t,r){arguments[4][194][0].apply(r,arguments)},{dup:194,events:137}],218:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":205,"./lib/_stream_passthrough.js":206,"./lib/_stream_readable.js":207,"./lib/_stream_transform.js":208,"./lib/_stream_writable.js":209,"./lib/internal/streams/end-of-stream.js":213,"./lib/internal/streams/pipeline.js":215}],219:[function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(function(e){if(e.buffer.length)return e.buffer.head?e.buffer.head.data.length:e.buffer[0].length;return e.length}(t)):null}},{}],220:[function(e,t,r){arguments[4][196][0].apply(r,arguments)},{dup:196,"safe-buffer":199}],221:[function(e,t,r){(function(t,n){(function(){var i=e("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},l=0;function c(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r.setImmediate="function"==typeof t?t:function(e){var t=l++,n=!(arguments.length<2)&&s.call(arguments,1);return a[t]=!0,i((function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))})),t},r.clearImmediate="function"==typeof n?n:function(e){delete a[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":181,timers:221}],222:[function(e,t,r){"use strict";var n=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},{"../prototype/is":229}],223:[function(e,t,r){"use strict";var n=e("../value/is"),i=e("../object/is"),o=e("../string/coerce"),s=e("./to-short-string"),a=function(e,t){return e.replace("%v",s(t))};t.exports=function(e,t,r){if(!i(r))throw new TypeError(a(t,e));if(!n(e)){if("default"in r)return r.default;if(r.isOptional)return null}var s=o(r.errorMessage);throw n(s)||(s=t),new TypeError(a(s,e))}},{"../object/is":226,"../string/coerce":230,"../value/is":232,"./to-short-string":225}],224:[function(e,t,r){"use strict";t.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},{}],225:[function(e,t,r){"use strict";var n=e("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;t.exports=function(e){var t=n(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(i,(function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},{"./safe-to-string":224}],226:[function(e,t,r){"use strict";var n=e("../value/is"),i={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!n(e)&&hasOwnProperty.call(i,typeof e)}},{"../value/is":232}],227:[function(e,t,r){"use strict";var n=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:n(e,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":223,"./is":228}],228:[function(e,t,r){"use strict";var n=e("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(e){return!!n(e)&&!i.test(o.call(e))}},{"../function/is":222}],229:[function(e,t,r){"use strict";var n=e("../object/is");t.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},{"../object/is":226}],230:[function(e,t,r){"use strict";var n=e("../value/is"),i=e("../object/is"),o=Object.prototype.toString;t.exports=function(e){if(!n(e))return null;if(i(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===o)return null}try{return""+e}catch(e){return null}}},{"../object/is":226,"../value/is":232}],231:[function(e,t,r){"use strict";var n=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:n(e,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":223,"./is":232}],232:[function(e,t,r){"use strict";t.exports=function(e){return null!=e}},{}],233:[function(e,t,r){"use strict";var n=e("punycode"),i=e("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=b,r.resolve=function(e,t){return b(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},r.format=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},r.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),p=["%","/","?",";","#"].concat(u),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=e("querystring");function b(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(a);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(a);if(b=b.trim(),!r&&1===e.split("#").length){var w=l.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=s.exec(b);if(_){var S=(_=_[0]).toLowerCase();this.protocol=S,b=b.substr(_.length)}if(r||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||_&&g[_]||(b=b.substr(2),this.slashes=!0)}if(!g[_]&&(x||_&&!y[_])){for(var O,E,C=-1,P=0;P<f.length;P++){-1!==(I=b.indexOf(f[P]))&&(-1===C||I<C)&&(C=I)}-1!==(E=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(O=b.slice(0,E),b=b.slice(E+1),this.auth=decodeURIComponent(O)),C=-1;for(P=0;P<p.length;P++){var I;-1!==(I=b.indexOf(p[P]))&&(-1===C||I<C)&&(C=I)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var L=this.hostname.split(/\./),T=(P=0,L.length);P<T;P++){var A=L[P];if(A&&!A.match(d)){for(var j="",M=0,R=A.length;M<R;M++)A.charCodeAt(M)>127?j+="x":j+=A[M];if(!j.match(d)){var D=L.slice(0,P),N=L.slice(P+1),V=A.match(h);V&&(D.push(V[1]),N.unshift(V[2])),N.length&&(b="/"+N.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+U,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[S])for(P=0,T=u.length;P<T;P++){var F=u[P];if(-1!==b.indexOf(F)){var W=encodeURIComponent(F);W===F&&(W=escape(F)),b=b.split(F).join(W)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,G)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var H=this.search||"";this.path=U+H}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(r[u]=e[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var p=Object.keys(e),f=0;f<p.length;f++){var d=p[f];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||b||r.host&&e.pathname,S=_,x=r.pathname&&r.pathname.split("/")||[],O=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(O&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),_=_&&(""===h[0]||""===x[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=h;else if(h.length)x||(x=[]),x.pop(),x=x.concat(h),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(O)r.hostname=r.host=x.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift());return r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=x.slice(-1)[0],C=(r.host||e.host||x.length>1)&&("."===E||".."===E)||""===E,P=0,I=x.length;I>=0;I--)"."===(E=x[I])?x.splice(I,1):".."===E?(x.splice(I,1),P++):P&&(x.splice(I,1),P--);if(!_&&!S)for(;P--;P)x.unshift("..");!_||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),C&&"/"!==x.join("/").substr(-1)&&x.push("");var k,L=""===x[0]||x[0]&&"/"===x[0].charAt(0);O&&(r.hostname=r.host=L?"":x.length?x.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift()));return(_=_||r.host&&x.length)&&!L&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":234,punycode:182,querystring:185}],234:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],235:[function(e,t,r){(function(e){(function(){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],236:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],237:[function(e,t,r){"use strict";var n=e("is-arguments"),i=e("is-generator-function"),o=e("which-typed-array"),s=e("is-typed-array");function a(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=a(Object.prototype.toString),p=a(Number.prototype.valueOf),f=a(String.prototype.valueOf),d=a(Boolean.prototype.valueOf);if(l)var h=a(BigInt.prototype.valueOf);if(c)var m=a(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===u(e)}function v(e){return"[object Set]"===u(e)}function b(e){return"[object WeakMap]"===u(e)}function w(e){return"[object WeakSet]"===u(e)}function _(e){return"[object ArrayBuffer]"===u(e)}function S(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function x(e){return"[object DataView]"===u(e)}function O(e){return"undefined"!=typeof DataView&&(x.working?x(e):e instanceof DataView)}r.isArgumentsObject=n,r.isGeneratorFunction=i,r.isTypedArray=s,r.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},r.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||O(e)},r.isUint8Array=function(e){return"Uint8Array"===o(e)},r.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},r.isUint16Array=function(e){return"Uint16Array"===o(e)},r.isUint32Array=function(e){return"Uint32Array"===o(e)},r.isInt8Array=function(e){return"Int8Array"===o(e)},r.isInt16Array=function(e){return"Int16Array"===o(e)},r.isInt32Array=function(e){return"Int32Array"===o(e)},r.isFloat32Array=function(e){return"Float32Array"===o(e)},r.isFloat64Array=function(e){return"Float64Array"===o(e)},r.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},r.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},y.working="undefined"!=typeof Map&&y(new Map),r.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),r.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),r.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),r.isWeakSet=function(e){return w(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),r.isArrayBuffer=S,x.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&x(new DataView(new ArrayBuffer(1),0,1)),r.isDataView=O;var E="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(e){return"[object SharedArrayBuffer]"===u(e)}function P(e){return void 0!==E&&(void 0===C.working&&(C.working=C(new E)),C.working?C(e):e instanceof E)}function I(e){return g(e,p)}function k(e){return g(e,f)}function L(e){return g(e,d)}function T(e){return l&&g(e,h)}function A(e){return c&&g(e,m)}r.isSharedArrayBuffer=P,r.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},r.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},r.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},r.isGeneratorObject=function(e){return"[object Generator]"===u(e)},r.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},r.isNumberObject=I,r.isStringObject=k,r.isBooleanObject=L,r.isBigIntObject=T,r.isSymbolObject=A,r.isBoxedPrimitive=function(e){return I(e)||k(e)||L(e)||T(e)||A(e)},r.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(S(e)||P(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(r,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},{"is-arguments":153,"is-generator-function":154,"is-typed-array":155,"which-typed-array":256}],238:[function(e,t,r){(function(t){(function(){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(l(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),a=n[r];r<o;a=n[++r])g(a)||!_(a)?s+=" "+a:s+=" "+l(a);return s},r.deprecate=function(e,n){if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return r.deprecate(e,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var o={},s=/^$/;if(t.env.NODE_DEBUG){var a=t.env.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}function l(e,t){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=l.styles[t];return r?"["+l.colors[r][0]+"m"+e+"["+l.colors[r][1]+"m":e}function u(e,t){return e}function p(e,t,n){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return v(i)||(i=p(e,i,n)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,t);if(o)return o;var s=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),x(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(t);if(0===s.length){if(O(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(x(t))return f(t)}var c,u="",_=!1,E=["{","}"];(h(t)&&(_=!0,E=["[","]"]),O(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return w(t)&&(u=" "+RegExp.prototype.toString.call(t)),S(t)&&(u=" "+Date.prototype.toUTCString.call(t)),x(t)&&(u=" "+f(t)),0!==s.length||_&&0!=t.length?n<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=_?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)k(t,String(s))?o.push(d(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,r,n,i,!0))})),o}(e,t,n,a,s):s.map((function(r){return d(e,t,n,a,r,_)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,E)):E[0]+u+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),k(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=g(r)?p(e,l.value,null):p(e,l.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return _(e)&&"[object RegExp]"===E(e)}function _(e){return"object"==typeof e&&null!==e}function S(e){return _(e)&&"[object Date]"===E(e)}function x(e){return _(e)&&("[object Error]"===E(e)||e instanceof Error)}function O(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(s.test(e)){var n=t.pid;o[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else o[e]=function(){};return o[e]},r.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.types=e("./support/types"),r.isArray=h,r.isBoolean=m,r.isNull=g,r.isNullOrUndefined=function(e){return null==e},r.isNumber=y,r.isString=v,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=b,r.isRegExp=w,r.types.isRegExp=w,r.isObject=_,r.isDate=S,r.types.isDate=S,r.isError=x,r.types.isNativeError=x,r.isFunction=O,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var L="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}r.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(L&&e[L]){var t;if("function"!=typeof(t=e[L]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),L&&Object.defineProperty(t,L,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},r.promisify.custom=L,r.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(s.bind(null,null,e))}),(function(e){t.nextTick(T.bind(null,e,s))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":236,"./support/types":237,_process:181,inherits:152}],239:[function(e,t,r){arguments[4][204][0].apply(r,arguments)},{dup:204}],240:[function(e,t,r){(function(r){(function(){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var l=s[a];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":242,"./_stream_writable":244,_process:181,inherits:152}],241:[function(e,t,r){arguments[4][206][0].apply(r,arguments)},{"./_stream_transform":243,dup:206,inherits:152}],242:[function(e,t,r){(function(r,n){(function(){"use strict";var i;t.exports=E,E.ReadableState=O;e("events").EventEmitter;var o=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),a=e("buffer").Buffer,l=n.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var p,f,d,h=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,y=e("../errors").codes,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,s);var S=m.errorOrDestroy,x=["error","close","destroy","pause","resume"];function O(t,r,n){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof n&&(n=r instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",n),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=e("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||e("./_stream_duplex"),!(this instanceof E))return new E(t);var r=this instanceof i;this._readableState=new O(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function C(e,t,r,n,i){c("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?L(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,s);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof l||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),o)S(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?S(e,new _):P(e,s,t,!0);else if(s.ended)S(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):A(e,s)):P(e,s,t,!1)}else n||(s.reading=!1,A(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&L(e)),A(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),C(this,e,t,!1,r)},E.prototype.unshift=function(e){return C(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){p||(p=e("string_decoder/").StringDecoder);var r=new p(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(T,e))}function T(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function A(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(j,e,t))}function j(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){c("readable nexttick read 0"),e.read(0)}function D(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function V(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(B,t,e))}function B(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}E.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):L(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(r,t))),null===(n=e>0?V(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(e){S(this,new w("_read()"))},E.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?l:g;function a(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",d),e.removeListener("unpipe",a),n.removeListener("end",l),n.removeListener("end",g),n.removeListener("data",f),p=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function l(){c("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var u=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",u);var p=!1;function f(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!p&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function d(t){c("onerror",t),g(),e.removeListener("error",d),0===o(e,"error")&&S(e,t)}function h(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",h),g()}function g(){c("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",h),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?L(this):i.reading||r.nextTick(R,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(M,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(M,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(D,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=V,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,r){return void 0===d&&(d=e("./internal/streams/from")),d(E,t,r)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":239,"./_stream_duplex":240,"./internal/streams/async_iterator":245,"./internal/streams/buffer_list":246,"./internal/streams/destroy":247,"./internal/streams/from":249,"./internal/streams/state":251,"./internal/streams/stream":252,_process:181,buffer:64,events:137,inherits:152,"string_decoder/":220,util:62}],243:[function(e,t,r){arguments[4][208][0].apply(r,arguments)},{"../errors":239,"./_stream_duplex":240,dup:208,inherits:152}],244:[function(e,t,r){(function(r,n){(function(){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var o;t.exports=E,E.WritableState=O;var s={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),l=e("buffer").Buffer,c=n.Uint8Array||function(){};var u,p=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,d=e("../errors").codes,h=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,y=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,w=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,S=p.errorOrDestroy;function x(){}function O(t,n,s){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof o),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(T,e,t),e._writableState.errorEmitted=!0,S(e,i)):(o(i),e._writableState.errorEmitted=!0,S(e,i),T(e,t))}(e,n,i,t,o);else{var s=k(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||I(e,n),i?r.nextTick(P,e,n,s,o):P(e,n,s,o)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(t){var r=this instanceof(o=o||e("./_stream_duplex"));if(!r&&!u.call(E,this))return new E(t);this._writableState=new O(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function C(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),T(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,C(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,p=r.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,u,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n=k(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(L,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(E,a),O.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===E&&(e&&e._writableState instanceof O)}})):u=function(e){return e instanceof this},E.prototype.pipe=function(){S(this,new y)},E.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof c);return a&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=x),o.ending?function(e,t){var n=new w;S(e,n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(S(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,n,i,o);return c}(this,o,a,e,t,n)),s},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,r){r(new m("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":239,"./_stream_duplex":240,"./internal/streams/destroy":247,"./internal/streams/state":251,"./internal/streams/stream":252,_process:181,buffer:64,inherits:152,"util-deprecate":235}],245:[function(e,t,r){(function(r){(function(){"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),f=Symbol("stream");function d(e,t){return{value:e,done:t}}function h(e){var t=e[s];if(null!==t){var r=e[f].read();null!==r&&(e[u]=null,e[s]=null,e[a]=null,t(d(r,!1)))}}function m(e){r.nextTick(h,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[f]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(d(void 0,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(void 0,!0)):t[p](r,n)}),n)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[p])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[f].destroy(null,(function(e){e?r(e):t(d(void 0,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(y,(i(t={},f,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,p,{value:function(e,t){var n=r[f].read();n?(r[u]=null,r[s]=null,r[a]=null,e(d(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[s]=null,r[a]=null,t(e)),void(r[l]=e)}var n=r[s];null!==n&&(r[u]=null,r[s]=null,r[a]=null,n(d(void 0,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":248,_process:181}],246:[function(e,t,r){arguments[4][211][0].apply(r,arguments)},{buffer:64,dup:211,util:62}],247:[function(e,t,r){(function(e){(function(){"use strict";function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var s=this,a=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return a||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?s._writableState?s._writableState.errorEmitted?e.nextTick(n,s):(s._writableState.errorEmitted=!0,e.nextTick(r,s,t)):e.nextTick(r,s,t):o?(e.nextTick(n,s),o(t)):e.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:181}],248:[function(e,t,r){arguments[4][213][0].apply(r,arguments)},{"../../../errors":239,dup:213}],249:[function(e,t,r){arguments[4][214][0].apply(r,arguments)},{dup:214}],250:[function(e,t,r){arguments[4][215][0].apply(r,arguments)},{"../../../errors":239,"./end-of-stream":248,dup:215}],251:[function(e,t,r){arguments[4][216][0].apply(r,arguments)},{"../../../errors":239,dup:216}],252:[function(e,t,r){arguments[4][194][0].apply(r,arguments)},{dup:194,events:137}],253:[function(e,t,r){arguments[4][218][0].apply(r,arguments)},{"./lib/_stream_duplex.js":240,"./lib/_stream_passthrough.js":241,"./lib/_stream_readable.js":242,"./lib/_stream_transform.js":243,"./lib/_stream_writable.js":244,"./lib/internal/streams/end-of-stream.js":248,"./lib/internal/streams/pipeline.js":250,dup:218}],254:[function(e,t,r){(function(r,n){(function(){"use strict";var i=e("readable-stream").Transform,o=e("duplexify"),s=e("ws"),a=e("safe-buffer").Buffer;t.exports=function(e,t,l){var c,u,p="browser"===r.title,f=!!n.WebSocket,d=p?function e(t,r,n){if(u.bufferedAmount>m)return void setTimeout(e,g,t,r,n);y&&"string"==typeof t&&(t=a.from(t,"utf8"));try{u.send(t)}catch(e){return n(e)}n()}:function(e,t,r){if(u.readyState!==u.OPEN)return void r();y&&"string"==typeof e&&(e=a.from(e,"utf8"));u.send(e,r)};t&&!Array.isArray(t)&&"object"==typeof t&&(l=t,t=null,("string"==typeof l.protocol||Array.isArray(l.protocol))&&(t=l.protocol));l||(l={});void 0===l.objectMode&&(l.objectMode=!(!0===l.binary||void 0===l.binary));var h=function(e,t,r){var n=new i({objectMode:e.objectMode});return n._write=t,n._flush=r,n}(l,d,(function(e){u.close(),e()}));l.objectMode||(h._writev=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)"string"==typeof e[n].chunk?r[n]=a.from(e[n],"utf8"):r[n]=e[n].chunk;this._write(a.concat(r),"binary",t)});var m=l.browserBufferSize||524288,g=l.browserBufferTimeout||1e3;"object"==typeof e?u=e:(u=f&&p?new s(e,t):new s(e,t,l)).binaryType="arraybuffer";u.readyState===u.OPEN?c=h:p?((c=h).cork(),u.onopen=function(){c.uncork(),c.emit("connect")}):(c=o.obj(),u.onopen=function(){c.setReadable(h),c.setWritable(h),c.emit("connect")});c.socket=u,u.onclose=function(){c.end(),c.destroy()},u.onerror=function(e){c.destroy(e)},u.onmessage=function(e){var t=e.data;t=t instanceof ArrayBuffer?a.from(t):a.from(t,"utf8");h.push(t)},h.on("close",(function(){u.close()}));var y=!l.objectMode;return c}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:181,duplexify:72,"readable-stream":253,"safe-buffer":199,ws:255}],255:[function(e,t,r){var n=null;"undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof MozWebSocket?n=MozWebSocket:"undefined"!=typeof window&&(n=window.WebSocket||window.MozWebSocket),t.exports=n},{}],256:[function(e,t,r){(function(r){(function(){"use strict";var n=e("foreach"),i=e("available-typed-arrays"),o=e("call-bind/callBound"),s=o("Object.prototype.toString"),a=e("has-tostringtag/shams")(),l="undefined"==typeof globalThis?r:globalThis,c=i(),u=o("String.prototype.slice"),p={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),d=Object.getPrototypeOf;a&&f&&d&&n(c,(function(e){if("function"==typeof l[e]){var t=new l[e];if(Symbol.toStringTag in t){var r=d(t),n=f(r,Symbol.toStringTag);if(!n){var i=d(r);n=f(i,Symbol.toStringTag)}p[e]=n.get}}}));var h=e("is-typed-array");t.exports=function(e){return!!h(e)&&(a&&Symbol.toStringTag in e?function(e){var t=!1;return n(p,(function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(e){}})),t}(e):u(s(e),8,-1))}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":59,"call-bind/callBound":66,"es-abstract/helpers/getOwnPropertyDescriptor":74,foreach:141,"has-tostringtag/shams":147,"is-typed-array":155}],257:[function(e,t,r){t.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},{}],258:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},{}],259:[function(e,t,r){(function(t){(function(){"use strict";const n=e("child_process").exec,i=e("child_process").execSync,o=e("./util");let s=t.platform;const a="linux"===s||"android"===s,l="darwin"===s,c="win32"===s,u="freebsd"===s,p="openbsd"===s,f="netbsd"===s,d="sunos"===s;function h(e,t,r){let n="";return(e=e.toLowerCase()).indexOf("input")>=0&&(n="Microphone"),e.indexOf("display audio")>=0&&(n="Speaker"),e.indexOf("speak")>=0&&(n="Speaker"),e.indexOf("laut")>=0&&(n="Speaker"),e.indexOf("loud")>=0&&(n="Speaker"),e.indexOf("head")>=0&&(n="Headset"),e.indexOf("mic")>=0&&(n="Microphone"),e.indexOf("mikr")>=0&&(n="Microphone"),e.indexOf("phone")>=0&&(n="Phone"),e.indexOf("controll")>=0&&(n="Controller"),e.indexOf("line o")>=0&&(n="Line Out"),e.indexOf("digital o")>=0&&(n="Digital Out"),e.indexOf("smart sound technology")>=0&&(n="Digital Signal Processor"),e.indexOf("high definition audio")>=0&&(n="Sound Driver"),!n&&r?n="Speaker":!n&&t&&(n="Microphone"),n}function m(e,t){const r={},n=((e.coreaudio_device_transport||"")+" "+(e._name||"")).toLowerCase();return r.id=t,r.name=e._name,r.manufacturer=e.coreaudio_device_manufacturer,r.revision=null,r.driver=null,r.default=!!e.coreaudio_default_audio_input_device||!!e.coreaudio_default_audio_output_device,r.channel=function(e){let t="";return e.indexOf("builtin")>=0&&(t="Built-In"),e.indexOf("extern")>=0&&(t="Audio-Jack"),e.indexOf("hdmi")>=0&&(t="HDMI"),e.indexOf("displayport")>=0&&(t="Display-Port"),e.indexOf("usb")>=0&&(t="USB"),e.indexOf("pci")>=0&&(t="PCIe"),t}(n),r.type=h(r.name,!!e.coreaudio_device_input,!!e.coreaudio_device_output),r.in=!!e.coreaudio_device_input,r.out=!!e.coreaudio_device_output,r.status="online",r}r.audio=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(a||u||p||f){n("lspci -vmm 2>/dev/null",(function(n,s){if(!n){const e=function(){let e=[];try{return i("lspci -v 2>/dev/null").toString().split("\n\n").forEach((t=>{const r=t.split("\n");if(r&&r.length&&r[0].toLowerCase().indexOf("audio")>=0){const t={};t.slotId=r[0].split(" ")[0],t.driver=o.getValue(r,"Kernel driver in use",":",!0)||o.getValue(r,"Kernel modules",":",!0),e.push(t)}})),e}catch(t){return e}}();s.toString().split("\n\n").forEach((r=>{const n=r.split("\n");if(o.getValue(n,"class",":",!0).toLowerCase().indexOf("audio")>=0){const r=function(e,t){const r={},n=o.getValue(e,"Slot"),i=t.filter((function(e){return e.slotId===n}));return r.id=n,r.name=o.getValue(e,"SDevice"),r.manufacturer=o.getValue(e,"SVendor"),r.revision=o.getValue(e,"Rev"),r.driver=i&&1===i.length&&i[0].driver?i[0].driver:"",r.default=null,r.channel="PCIe",r.type=h(r.name,null,null),r.in=null,r.out=null,r.status="online",r}(n,e);t.push(r)}}))}e&&e(t),r(t)}))}if(l){n("system_profiler SPAudioDataType -json",(function(n,i){if(!n)try{const e=JSON.parse(i.toString());if(e.SPAudioDataType&&e.SPAudioDataType.length&&e.SPAudioDataType[0]&&e.SPAudioDataType[0]._items&&e.SPAudioDataType[0]._items.length)for(let r=0;r<e.SPAudioDataType[0]._items.length;r++){const n=m(e.SPAudioDataType[0]._items[r],r);t.push(n)}}catch(e){o.noop()}e&&e(t),r(t)}))}c&&o.powerShell("Get-CimInstance Win32_SoundDevice | select DeviceID,StatusInfo,Name,Manufacturer | fl").then(((n,i)=>{if(!i){n.toString().split(/\n\s*\n/).forEach((e=>{const r=e.split("\n");o.getValue(r,"name",":")&&t.push(function(e){const t={},r=o.getValue(e,"StatusInfo",":");return t.id=o.getValue(e,"DeviceID",":"),t.name=o.getValue(e,"name",":"),t.manufacturer=o.getValue(e,"manufacturer",":"),t.revision=null,t.driver=null,t.default=null,t.channel=null,t.type=h(t.name,null,null),t.in=null,t.out=null,t.status=r,t}(r))}))}e&&e(t),r(t)})),d&&r(null)}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63}],260:[function(e,t,r){(function(r){(function(){"use strict";const n=e("child_process").exec,i=e("fs"),o=e("./util");let s=r.platform;const a="linux"===s||"android"===s,l="darwin"===s,c="win32"===s,u="freebsd"===s,p="openbsd"===s,f="netbsd"===s,d="sunos"===s;function h(e,t,r){const n={};let i=o.getValue(e,"BatteryStatus",":").trim();if(i>=0){const s=i?parseInt(i):0;n.status=s,n.hasBattery=!0,n.maxCapacity=r||parseInt(o.getValue(e,"DesignCapacity",":")||0),n.designedCapacity=parseInt(o.getValue(e,"DesignCapacity",":")||t),n.voltage=parseInt(o.getValue(e,"DesignVoltage",":")||0)/1e3,n.capacityUnit="mWh",n.percent=parseInt(o.getValue(e,"EstimatedChargeRemaining",":")||0),n.currentCapacity=parseInt(n.maxCapacity*n.percent/100),n.isCharging=s>=6&&s<=9||11===s||3!==s&&1!==s&&n.percent<100,n.acConnected=n.isCharging||2===s,n.model=o.getValue(e,"DeviceID",":")}else n.status=-1;return n}t.exports=function(e){return new Promise((t=>{r.nextTick((()=>{let r={hasBattery:!1,cycleCount:0,isCharging:!1,designedCapacity:0,maxCapacity:0,currentCapacity:0,voltage:0,capacityUnit:"",percent:0,timeRemaining:null,acConnected:!0,type:"",model:"",manufacturer:"",serial:""};if(a){let n="";i.existsSync("/sys/class/power_supply/BAT1/uevent")?n="/sys/class/power_supply/BAT1/":i.existsSync("/sys/class/power_supply/BAT0/uevent")&&(n="/sys/class/power_supply/BAT0/");let s=!1,a="";if(i.existsSync("/sys/class/power_supply/AC/online")?a="/sys/class/power_supply/AC/online":i.existsSync("/sys/class/power_supply/AC0/online")&&(a="/sys/class/power_supply/AC0/online"),a){const e=i.readFileSync(a);s="1"===e.toString().trim()}n?i.readFile(n+"uevent",(function(n,i){if(n)e&&e(r),t(r);else{let n=i.toString().split("\n");r.isCharging="charging"===o.getValue(n,"POWER_SUPPLY_STATUS","=").toLowerCase(),r.acConnected=s||r.isCharging,r.voltage=parseInt("0"+o.getValue(n,"POWER_SUPPLY_VOLTAGE_NOW","="),10)/1e6,r.capacityUnit=r.voltage?"mWh":"mAh",r.cycleCount=parseInt("0"+o.getValue(n,"POWER_SUPPLY_CYCLE_COUNT","="),10),r.maxCapacity=Math.round(parseInt("0"+o.getValue(n,"POWER_SUPPLY_CHARGE_FULL","=",!0,!0),10)/1e3*(r.voltage||1));const a=parseInt("0"+o.getValue(n,"POWER_SUPPLY_VOLTAGE_MIN_DESIGN","="),10)/1e6;r.designedCapacity=Math.round(parseInt("0"+o.getValue(n,"POWER_SUPPLY_CHARGE_FULL_DESIGN","=",!0,!0),10)/1e3*(a||r.voltage||1)),r.currentCapacity=Math.round(parseInt("0"+o.getValue(n,"POWER_SUPPLY_CHARGE_NOW","="),10)/1e3*(r.voltage||1)),r.maxCapacity||(r.maxCapacity=parseInt("0"+o.getValue(n,"POWER_SUPPLY_ENERGY_FULL","=",!0,!0),10)/1e3,r.designedCapacity=parseInt("0"+o.getValue(n,"POWER_SUPPLY_ENERGY_FULL_DESIGN","=",!0,!0),10)/1e3|r.maxCapacity,r.currentCapacity=parseInt("0"+o.getValue(n,"POWER_SUPPLY_ENERGY_NOW","="),10)/1e3);const l=o.getValue(n,"POWER_SUPPLY_CAPACITY","="),c=parseInt("0"+o.getValue(n,"POWER_SUPPLY_ENERGY_NOW","="),10),u=parseInt("0"+o.getValue(n,"POWER_SUPPLY_POWER_NOW","="),10),p=parseInt("0"+o.getValue(n,"POWER_SUPPLY_CURRENT_NOW","="),10);r.percent=parseInt("0"+l,10),r.maxCapacity&&r.currentCapacity&&(r.hasBattery=!0,l||(r.percent=100*r.currentCapacity/r.maxCapacity)),r.isCharging&&(r.hasBattery=!0),c&&u?r.timeRemaining=Math.floor(c/u*60):p&&r.currentCapacity&&(r.timeRemaining=Math.floor(r.currentCapacity/p*60)),r.type=o.getValue(n,"POWER_SUPPLY_TECHNOLOGY","="),r.model=o.getValue(n,"POWER_SUPPLY_MODEL_NAME","="),r.manufacturer=o.getValue(n,"POWER_SUPPLY_MANUFACTURER","="),r.serial=o.getValue(n,"POWER_SUPPLY_SERIAL_NUMBER","="),e&&e(r),t(r)}})):(e&&e(r),t(r))}if((u||p||f)&&n("sysctl -i hw.acpi.battery hw.acpi.acline",(function(n,i){let s=i.toString().split("\n");const a=parseInt("0"+o.getValue(s,"hw.acpi.battery.units"),10),l=parseInt("0"+o.getValue(s,"hw.acpi.battery.life"),10);r.hasBattery=a>0,r.cycleCount=null,r.isCharging="1"!==o.getValue(s,"hw.acpi.acline"),r.acConnected=r.isCharging,r.maxCapacity=null,r.currentCapacity=null,r.capacityUnit="unknown",r.percent=a?l:null,e&&e(r),t(r)})),l&&n('ioreg -n AppleSmartBattery -r | egrep "CycleCount|IsCharging|DesignCapacity|MaxCapacity|CurrentCapacity|BatterySerialNumber|TimeRemaining|Voltage"; pmset -g batt | grep %',(function(n,i){if(i){let e=i.toString().replace(/ +/g,"").replace(/"+/g,"").replace(/-/g,"").split("\n");r.cycleCount=parseInt("0"+o.getValue(e,"cyclecount","="),10),r.voltage=parseInt("0"+o.getValue(e,"voltage","="),10)/1e3,r.capacityUnit=r.voltage?"mWh":"mAh",r.maxCapacity=Math.round(parseInt("0"+o.getValue(e,"applerawmaxcapacity","="),10)*(r.voltage||1)),r.currentCapacity=Math.round(parseInt("0"+o.getValue(e,"applerawcurrentcapacity","="),10)*(r.voltage||1)),r.designedCapacity=Math.round(parseInt("0"+o.getValue(e,"DesignCapacity","="),10)*(r.voltage||1)),r.manufacturer="Apple",r.serial=o.getValue(e,"BatterySerialNumber","=");let t=null;let n=o.getValue(e,"internal","Battery").split(";");if(n&&n[0]){let e=n[0].split("\t");e&&e[1]&&(t=parseFloat(e[1].trim().replace(/%/g,"")))}n&&n[1]?(r.isCharging="charging"===n[1].trim(),r.acConnected="discharging"!==n[1].trim()):(r.isCharging="yes"===o.getValue(e,"ischarging","=").toLowerCase(),r.acConnected=r.isCharging),r.maxCapacity&&r.currentCapacity&&(r.hasBattery=!0,r.type="Li-ion",r.percent=null!==t?t:Math.round(100*r.currentCapacity/r.maxCapacity),r.isCharging||(r.timeRemaining=parseInt("0"+o.getValue(e,"TimeRemaining","="),10)))}e&&e(r),t(r)})),d&&(e&&e(r),t(r)),c)try{const n=[];n.push(o.powerShell("Get-CimInstance Win32_Battery | select BatteryStatus, DesignCapacity, DesignVoltage, EstimatedChargeRemaining, DeviceID | fl")),n.push(o.powerShell("(Get-CimInstance -Class BatteryStaticData -Namespace ROOT/WMI).DesignedCapacity")),n.push(o.powerShell("(Get-CimInstance -Class BatteryFullChargedCapacity -Namespace ROOT/WMI).FullChargedCapacity")),o.promiseAll(n).then((n=>{if(n){let e=n.results[0].split(/\n\s*\n/),t=[];const i=e=>/\S/.test(e);for(let r=0;r<e.length;r++)!i(e[r])||t.length&&i(e[r-1])||t.push([]),i(e[r])&&t[t.length-1].push(e[r]);let s=n.results[1].split("\r\n").filter((e=>e)),a=n.results[2].split("\r\n").filter((e=>e));if(t.length){let e=!1,n=[];for(let i=0;i<t.length;i++){const l=h(t[i][0].split("\r\n"),s&&s.length>=i+1&&s[i]?o.toInt(s[i]):0,a&&a.length>=i+1&&a[i]?o.toInt(a[i]):0);!e&&l.status>0&&10!==l.status?(r.hasBattery=l.hasBattery,r.maxCapacity=l.maxCapacity,r.designedCapacity=l.designedCapacity,r.voltage=l.voltage,r.capacityUnit=l.capacityUnit,r.percent=l.percent,r.currentCapacity=l.currentCapacity,r.isCharging=l.isCharging,r.acConnected=l.acConnected,r.model=l.model,e=!0):-1!==l.status&&n.push({hasBattery:l.hasBattery,maxCapacity:l.maxCapacity,designedCapacity:l.designedCapacity,voltage:l.voltage,capacityUnit:l.capacityUnit,percent:l.percent,currentCapacity:l.currentCapacity,isCharging:l.isCharging,timeRemaining:null,acConnected:l.acConnected,model:l.model,type:"",manufacturer:"",serial:""})}!e&&n.length&&(r=n[0],n.shift()),n.length&&(r.additionalBatteries=n)}}e&&e(r),t(r)}))}catch(n){e&&e(r),t(r)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63}],261:[function(e,t,r){(function(t){(function(){"use strict";const n=e("child_process").exec,i=e("child_process").execSync,o=e("path"),s=e("./util"),a=e("fs");let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l;function g(e){let t="";return e.indexOf("keyboard")>=0&&(t="Keyboard"),e.indexOf("mouse")>=0&&(t="Mouse"),e.indexOf("speaker")>=0&&(t="Speaker"),e.indexOf("headset")>=0&&(t="Headset"),e.indexOf("phone")>=0&&(t="Phone"),e.indexOf("macbook")>=0&&(t="Computer"),e.indexOf("imac")>=0&&(t="Computer"),e.indexOf("ipad")>=0&&(t="Tablet"),e.indexOf("watch")>=0&&(t="Watch"),e.indexOf("headphone")>=0&&(t="Headset"),t}function y(e,t){const r={},n=((e.device_minorClassOfDevice_string||e.device_majorClassOfDevice_string||e.device_minorType||"")+(e.device_name||"")).toLowerCase();return r.device=e.device_services||"",r.name=e.device_name||"",r.manufacturer=e.device_manufacturer||function(e){let t=e.split(" ")[0];return(e=e.toLowerCase()).indexOf("apple")>=0&&(t="Apple"),e.indexOf("ipad")>=0&&(t="Apple"),e.indexOf("imac")>=0&&(t="Apple"),e.indexOf("iphone")>=0&&(t="Apple"),e.indexOf("magic mouse")>=0&&(t="Apple"),e.indexOf("macbook")>=0&&(t="Apple"),t}(e.device_name||"")||"",r.macDevice=(e.device_addr||e.device_address||"").toLowerCase().replace(/-/g,":"),r.macHost=t,r.batteryPercent=e.device_batteryPercent||null,r.type=g(n),r.connected="attrib_Yes"===e.device_isconnected||!1,r}r.bluetoothDevices=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(c){s.getFilesInPath("/var/lib/bluetooth/").forEach((e=>{const r=o.basename(e),n=e.split("/"),i=n.length>=6?n[n.length-2]:null,l=n.length>=7?n[n.length-3]:null;if("info"===r){const r=a.readFileSync(e,{encoding:"utf8"}).split("\n");t.push(function(e,t,r){const n={device:null};return n.name=s.getValue(e,"name","="),n.manufacturer=null,n.macDevice=t,n.macHost=r,n.batteryPercent=null,n.type=g(n.name.toLowerCase()),n.connected=!1,n}(r,i,l))}}));try{const e=i("hcitool con").toString().toLowerCase();for(let r=0;r<t.length;r++)t[r].macDevice&&t[r].macDevice.length>10&&e.indexOf(t[r].macDevice.toLowerCase())>=0&&(t[r].connected=!0)}catch(e){s.noop()}e&&e(t),r(t)}if(u){n("system_profiler SPBluetoothDataType -json",(function(n,i){if(!n)try{const e=JSON.parse(i.toString());if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0].device_title&&e.SPBluetoothDataType[0].device_title.length){let r=null;e.SPBluetoothDataType[0].local_device_title&&e.SPBluetoothDataType[0].local_device_title.general_address&&(r=e.SPBluetoothDataType[0].local_device_title.general_address.toLowerCase().replace(/-/g,":")),e.SPBluetoothDataType[0].device_title.forEach((e=>{const n=e,i=Object.keys(n);if(i&&1===i.length){const e=n[i[0]];e.device_name=i[0];const o=y(e,r);t.push(o)}}))}if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0].device_connected&&e.SPBluetoothDataType[0].device_connected.length){const r=e.SPBluetoothDataType[0].controller_properties&&e.SPBluetoothDataType[0].controller_properties.controller_address?e.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;e.SPBluetoothDataType[0].device_connected.forEach((e=>{const n=e,i=Object.keys(n);if(i&&1===i.length){const e=n[i[0]];e.device_name=i[0],e.device_isconnected="attrib_Yes";const o=y(e,r);t.push(o)}}))}if(e.SPBluetoothDataType&&e.SPBluetoothDataType.length&&e.SPBluetoothDataType[0]&&e.SPBluetoothDataType[0].device_not_connected&&e.SPBluetoothDataType[0].device_not_connected.length){const r=e.SPBluetoothDataType[0].controller_properties&&e.SPBluetoothDataType[0].controller_properties.controller_address?e.SPBluetoothDataType[0].controller_properties.controller_address.toLowerCase().replace(/-/g,":"):null;e.SPBluetoothDataType[0].device_not_connected.forEach((e=>{const n=e,i=Object.keys(n);if(i&&1===i.length){const e=n[i[0]];e.device_name=i[0],e.device_isconnected="attrib_No";const o=y(e,r);t.push(o)}}))}}catch(e){s.noop()}e&&e(t),r(t)}))}p&&s.powerShell("Get-CimInstance Win32_PNPEntity | select PNPClass, Name, Manufacturer | fl").then(((n,i)=>{if(!i){n.toString().split(/\n\s*\n/).forEach((e=>{"Bluetooth"===s.getValue(e.split("\n"),"PNPClass",":")&&t.push(function(e){const t={device:null};return t.name=s.getValue(e,"name",":"),t.manufacturer=s.getValue(e,"manufacturer",":"),t.macDevice=null,t.macHost=null,t.batteryPercent=null,t.type=g(t.name.toLowerCase()),t.connected=null,t}(e.split("\n")))}))}e&&e(t),r(t)})),(f||h||d||m)&&r(null)}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,path:179}],262:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("child_process").exec,o=e("child_process").execSync,s=e("fs"),a=e("./util");let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l;let g=0,y={user:0,nice:0,system:0,idle:0,irq:0,load:0,tick:0,ms:0,currentLoad:0,currentLoadUser:0,currentLoadSystem:0,currentLoadNice:0,currentLoadIdle:0,currentLoadIrq:0,rawCurrentLoad:0,rawCurrentLoadUser:0,rawCurrentLoadSystem:0,rawCurrentLoadNice:0,rawCurrentLoadIdle:0,rawCurrentLoadIrq:0},v=[],b=0;const w={8346:"1.8",8347:"1.9",8350:"2.0",8354:"2.2","8356|SE":"2.4",8356:"2.3",8360:"2.5",2372:"2.1",2373:"2.1",2374:"2.2",2376:"2.3",2377:"2.3",2378:"2.4",2379:"2.4",2380:"2.5",2381:"2.5",2382:"2.6",2384:"2.7",2386:"2.8",2387:"2.8",2389:"2.9",2393:"3.1",8374:"2.2",8376:"2.3",8378:"2.4",8379:"2.4",8380:"2.5",8381:"2.5",8382:"2.6",8384:"2.7",8386:"2.8",8387:"2.8",8389:"2.9",8393:"3.1","2419EE":"1.8","2423HE":"2.0","2425HE":"2.1",2427:"2.2",2431:"2.4",2435:"2.6","2439SE":"2.8","8425HE":"2.1",8431:"2.4",8435:"2.6","8439SE":"2.8",4122:"2.2",4130:"2.6","4162EE":"1.7","4164EE":"1.8","4170HE":"2.1","4174HE":"2.3","4176HE":"2.4",4180:"2.6",4184:"2.8","6124HE":"1.8","6128HE":"2.0","6132HE":"2.2",6128:"2.0",6134:"2.3",6136:"2.4",6140:"2.6","6164HE":"1.7","6166HE":"1.8",6168:"1.9",6172:"2.1",6174:"2.2",6176:"2.3","6176SE":"2.3","6180SE":"2.5",3250:"2.5",3260:"2.7",3280:"2.4",4226:"2.7",4228:"2.8",4230:"2.9",4234:"3.1",4238:"3.3",4240:"3.4",4256:"1.6",4274:"2.5",4276:"2.6",4280:"2.8",4284:"3.0",6204:"3.3",6212:"2.6",6220:"3.0",6234:"2.4",6238:"2.6","6262HE":"1.6",6272:"2.1",6274:"2.2",6276:"2.3",6278:"2.4","6282SE":"2.6","6284SE":"2.7",6308:"3.5",6320:"2.8",6328:"3.2","6338P":"2.3",6344:"2.6",6348:"2.8",6366:"1.8","6370P":"2.0",6376:"2.3",6378:"2.4",6380:"2.5",6386:"2.8","FX|4100":"3.6","FX|4120":"3.9","FX|4130":"3.8","FX|4150":"3.8","FX|4170":"4.2","FX|6100":"3.3","FX|6120":"3.6","FX|6130":"3.6","FX|6200":"3.8","FX|8100":"2.8","FX|8120":"3.1","FX|8140":"3.2","FX|8150":"3.6","FX|8170":"3.9","FX|4300":"3.8","FX|4320":"4.0","FX|4350":"4.2","FX|6300":"3.5","FX|6350":"3.9","FX|8300":"3.3","FX|8310":"3.4","FX|8320":"3.5","FX|8350":"4.0","FX|8370":"4.0","FX|9370":"4.4","FX|9590":"4.7","FX|8320E":"3.2","FX|8370E":"3.3",1200:"3.1","Pro 1200":"3.1","1300X":"3.5","Pro 1300":"3.5",1400:"3.2","1500X":"3.5","Pro 1500":"3.5",1600:"3.2","1600X":"3.6","Pro 1600":"3.2",1700:"3.0","Pro 1700":"3.0","1700X":"3.4","Pro 1700X":"3.4","1800X":"3.6","1900X":"3.8",1920:"3.2","1920X":"3.5","1950X":"3.4","200GE":"3.2","Pro 200GE":"3.2","220GE":"3.4","240GE":"3.5","3000G":"3.5","300GE":"3.4","3050GE":"3.4","2200G":"3.5","Pro 2200G":"3.5","2200GE":"3.2","Pro 2200GE":"3.2","2400G":"3.6","Pro 2400G":"3.6","2400GE":"3.2","Pro 2400GE":"3.2","Pro 200U":"2.3","300U":"2.4","2200U":"2.5","3200U":"2.6","2300U":"2.0","Pro 2300U":"2.0","2500U":"2.0","Pro 2500U":"2.2","2600H":"3.2","2700U":"2.0","Pro 2700U":"2.2","2800H":"3.3",7351:"2.4","7351P":"2.4",7401:"2.0","7401P":"2.0","7551P":"2.0",7551:"2.0",7251:"2.1",7261:"2.5",7281:"2.1",7301:"2.2",7371:"3.1",7451:"2.3",7501:"2.0",7571:"2.2",7601:"2.2",V1500B:"2.2",V1780B:"3.35",V1202B:"2.3",V1404I:"2.0",V1605B:"2.0",V1756B:"3.25",V1807B:"3.35",3101:"2.1",3151:"2.7",3201:"1.5",3251:"2.5",3255:"2.5",3301:"2.0",3351:"1.9",3401:"1.85",3451:"2.15","1200|AF":"3.1","2300X":"3.5","2500X":"3.6",2600:"3.4","2600E":"3.1","1600|AF":"3.2","2600X":"3.6",2700:"3.2","2700E":"2.8","Pro 2700":"3.2","2700X":"3.7","Pro 2700X":"3.6","2920X":"3.5","2950X":"3.5","2970WX":"3.0","2990WX":"3.0","Pro 300GE":"3.4","Pro 3125GE":"3.4","3150G":"3.5","Pro 3150G":"3.5","3150GE":"3.3","Pro 3150GE":"3.3","3200G":"3.6","Pro 3200G":"3.6","3200GE":"3.3","Pro 3200GE":"3.3","3350G":"3.6","Pro 3350G":"3.6","3350GE":"3.3","Pro 3350GE":"3.3","3400G":"3.7","Pro 3400G":"3.7","3400GE":"3.3","Pro 3400GE":"3.3","3300U":"2.1","PRO 3300U":"2.1","3450U":"2.1","3500U":"2.1","PRO 3500U":"2.1","3500C":"2.1","3550H":"2.1","3580U":"2.1","3700U":"2.3","PRO 3700U":"2.3","3700C":"2.3","3750H":"2.3","3780U":"2.3",3100:"3.6","3300X":"3.8",3500:"3.6","3500X":"3.6",3600:"3.6","Pro 3600":"3.6","3600X":"3.8","3600XT":"3.8","Pro 3700":"3.6","3700X":"3.6","3800X":"3.9","3800XT":"3.9",3900:"3.1","Pro 3900":"3.1","3900X":"3.8","3900XT":"3.8","3950X":"3.5","3960X":"3.8","3970X":"3.7","3990X":"2.9","3945WX":"4.0","3955WX":"3.9","3975WX":"3.5","3995WX":"2.7","4300GE":"3.5","Pro 4300GE":"3.5","4300G":"3.8","Pro 4300G":"3.8","4600GE":"3.3","Pro 4650GE":"3.3","4600G":"3.7","Pro 4650G":"3.7","4700GE":"3.1","Pro 4750GE":"3.1","4700G":"3.6","Pro 4750G":"3.6","4300U":"2.7","4450U":"2.5","Pro 4450U":"2.5","4500U":"2.3","4600U":"2.1","PRO 4650U":"2.1","4680U":"2.1","4600HS":"3.0","4600H":"3.0","4700U":"2.0","PRO 4750U":"1.7","4800U":"1.8","4800HS":"2.9","4800H":"2.9","4900HS":"3.0","4900H":"3.3","5300U":"2.6","5500U":"2.1","5700U":"1.8","7232P":"3.1","7302P":"3.0","7402P":"2.8","7502P":"2.5","7702P":"2.0",7252:"3.1",7262:"3.2",7272:"2.9",7282:"2.8",7302:"3.0",7352:"2.3",7402:"2.8",7452:"2.35",7502:"2.5",7532:"2.4",7542:"2.9",7552:"2.2",7642:"2.3",7662:"2.0",7702:"2.0",7742:"2.25","7H12":"2.6","7F32":"3.7","7F52":"3.5","7F72":"3.2",7763:"2.45",7713:"2.0","7713P":"2.0",7663:"2.0",7643:"2.3","75F3":"2.95",7543:"2.8","7543P":"2.8",7513:"2.6",7453:"2.75","74F3":"3.2",7443:"2.85","7443P":"2.85",7413:"2.65","73F3":"3.5",7343:"3.2",7313:"3.0","7313P":"3.0","72F3":"3.7","5600X":"3.7","5800X":"3.8","5900X":"3.7","5950X":"3.4"},_={1:"Other",2:"Unknown",3:"Daughter Board",4:"ZIF Socket",5:"Replacement/Piggy Back",6:"None",7:"LIF Socket",8:"Slot 1",9:"Slot 2",10:"370 Pin Socket",11:"Slot A",12:"Slot M",13:"423",14:"A (Socket 462)",15:"478",16:"754",17:"940",18:"939",19:"mPGA604",20:"LGA771",21:"LGA775",22:"S1",23:"AM2",24:"F (1207)",25:"LGA1366",26:"G34",27:"AM3",28:"C32",29:"LGA1156",30:"LGA1567",31:"PGA988A",32:"BGA1288",33:"rPGA988B",34:"BGA1023",35:"BGA1224",36:"LGA1155",37:"LGA1356",38:"LGA2011",39:"FS1",40:"FS2",41:"FM1",42:"FM2",43:"LGA2011-3",44:"LGA1356-3",45:"LGA1150",46:"BGA1168",47:"BGA1234",48:"BGA1364",49:"AM4",50:"LGA1151",51:"BGA1356",52:"BGA1440",53:"BGA1515",54:"LGA3647-1",55:"SP3",56:"SP3r2",57:"LGA2066",58:"BGA1392",59:"BGA1510",60:"BGA1528",61:"LGA4189",62:"LGA1200",63:"LGA4677"},S={LGA1150:"i7-5775C i3-4340 i3-4170 G3250 i3-4160T i3-4160 E3-1231 G3258 G3240 i7-4790S i7-4790K i7-4790 i5-4690K i5-4690 i5-4590T i5-4590S i5-4590 i5-4460 i3-4360 i3-4150 G1820 G3420 G3220 i7-4771 i5-4440 i3-4330 i3-4130T i3-4130 E3-1230 i7-4770S i7-4770K i7-4770 i5-4670K i5-4670 i5-4570T i5-4570S i5-4570 i5-4430",LGA1151:"i9-9900KS E-2288G E-2224 G5420 i9-9900T i9-9900 i7-9700T i7-9700F i7-9700E i7-9700 i5-9600 i5-9500T i5-9500F i5-9500 i5-9400T i3-9350K i3-9300 i3-9100T i3-9100F i3-9100 G4930 i9-9900KF i7-9700KF i5-9600KF i5-9400F i5-9400 i3-9350KF i9-9900K i7-9700K i5-9600K G5500 G5400 i7-8700T i7-8086K i5-8600 i5-8500T i5-8500 i5-8400T i3-8300 i3-8100T G4900 i7-8700K i7-8700 i5-8600K i5-8400 i3-8350K i3-8100 E3-1270 G4600 G4560 i7-7700T i7-7700K i7-7700 i5-7600K i5-7600 i5-7500T i5-7500 i5-7400 i3-7350K i3-7300 i3-7100T i3-7100 G3930 G3900 G4400 i7-6700T i7-6700K i7-6700 i5-6600K i5-6600 i5-6500T i5-6500 i5-6400T i5-6400 i3-6300 i3-6100T i3-6100 E3-1270 E3-1270 T4500 T4400",1155:"G440 G460 G465 G470 G530T G540T G550T G1610T G1620T G530 G540 G1610 G550 G1620 G555 G1630 i3-2100T i3-2120T i3-3220T i3-3240T i3-3250T i3-2100 i3-2105 i3-2102 i3-3210 i3-3220 i3-2125 i3-2120 i3-3225 i3-2130 i3-3245 i3-3240 i3-3250 i5-3570T i5-2500T i5-2400S i5-2405S i5-2390T i5-3330S i5-2500S i5-3335S i5-2300 i5-3450S i5-3340S i5-3470S i5-3475S i5-3470T i5-2310 i5-3550S i5-2320 i5-3330 i5-3350P i5-3450 i5-2400 i5-3340 i5-3570S i5-2380P i5-2450P i5-3470 i5-2500K i5-3550 i5-2500 i5-3570 i5-3570K i5-2550K i7-3770T i7-2600S i7-3770S i7-2600K i7-2600 i7-3770 i7-3770K i7-2700K G620T G630T G640T G2020T G645T G2100T G2030T G622 G860T G620 G632 G2120T G630 G640 G2010 G840 G2020 G850 G645 G2030 G860 G2120 G870 G2130 G2140 E3-1220L E3-1220L E3-1260L E3-1265L E3-1220 E3-1225 E3-1220 E3-1235 E3-1225 E3-1230 E3-1230 E3-1240 E3-1245 E3-1270 E3-1275 E3-1240 E3-1245 E3-1270 E3-1280 E3-1275 E3-1290 E3-1280 E3-1290"};function x(e){let t=e;return(e=e.toLowerCase()).indexOf("intel")>=0&&(t="Intel"),e.indexOf("amd")>=0&&(t="AMD"),e.indexOf("qemu")>=0&&(t="QEMU"),e.indexOf("hygon")>=0&&(t="Hygon"),e.indexOf("centaur")>=0&&(t="WinChip/Via"),e.indexOf("vmware")>=0&&(t="VMware"),e.indexOf("Xen")>=0&&(t="Xen Hypervisor"),e.indexOf("tcg")>=0&&(t="QEMU"),e.indexOf("apple")>=0&&(t="Apple"),t}function O(e){e.brand=e.brand.replace(/\(R\)+/g,"®").replace(/\s+/g," ").trim(),e.brand=e.brand.replace(/\(TM\)+/g,"™").replace(/\s+/g," ").trim(),e.brand=e.brand.replace(/\(C\)+/g,"©").replace(/\s+/g," ").trim(),e.brand=e.brand.replace(/CPU+/g,"").replace(/\s+/g," ").trim(),e.manufacturer=x(e.brand);let t=e.brand.split(" ");return t.shift(),e.brand=t.join(" "),e}function E(e){let t="0";for(let r in w)if({}.hasOwnProperty.call(w,r)){let n=r.split("|"),i=0;n.forEach((t=>{e.indexOf(t)>-1&&i++})),i===n.length&&(t=w[r])}return parseFloat(t)}function C(){return new Promise((e=>{t.nextTick((()=>{const t="unknown";let r={manufacturer:t,brand:t,vendor:"",family:"",model:"",stepping:"",revision:"",voltage:"",speed:0,speedMin:0,speedMax:0,governor:"",cores:a.cores(),physicalCores:a.cores(),performanceCores:a.cores(),efficiencyCores:0,processors:1,socket:"",flags:"",virtualization:!1,cache:{}};I().then((t=>{if(r.flags=t,r.virtualization=t.indexOf("vmx")>-1||t.indexOf("svm")>-1,u&&i("sysctl machdep.cpu hw.cpufrequency_max hw.cpufrequency_min hw.packages hw.physicalcpu_max hw.ncpu hw.tbfrequency hw.cpufamily hw.cpusubfamily",(function(t,i){let s=i.toString().split("\n");const l=a.getValue(s,"machdep.cpu.brand_string").split("@");r.brand=l[0].trim();const c=l[1]?l[1].trim():"0";r.speed=parseFloat(c.replace(/GHz+/g,""));let u=a.getValue(s,"hw.tbfrequency")/1e9;u=u<.1?100*u:u,r.speed=0===r.speed?u:r.speed,g=r.speed,r=O(r),r.speedMin=a.getValue(s,"hw.cpufrequency_min")?a.getValue(s,"hw.cpufrequency_min")/1e9:r.speed,r.speedMax=a.getValue(s,"hw.cpufrequency_max")?a.getValue(s,"hw.cpufrequency_max")/1e9:r.speed,r.vendor=a.getValue(s,"machdep.cpu.vendor")||"Apple",r.family=a.getValue(s,"machdep.cpu.family")||a.getValue(s,"hw.cpufamily"),r.model=a.getValue(s,"machdep.cpu.model"),r.stepping=a.getValue(s,"machdep.cpu.stepping")||a.getValue(s,"hw.cpusubfamily"),r.virtualization=!0;const p=a.getValue(s,"hw.packages"),f=a.getValue(s,"hw.physicalcpu_max"),d=a.getValue(s,"hw.ncpu");if("arm64"===n.arch()){const e=o("ioreg -c IOPlatformDevice -d 3 -r | grep cluster-type").toString().split("\n"),t=e.filter((e=>e.indexOf('"E"')>=0)).length,n=e.filter((e=>e.indexOf('"P"')>=0)).length;r.socket="SOC",r.efficiencyCores=t,r.performanceCores=n}p&&(r.processors=parseInt(p)||1),f&&d&&(r.cores=parseInt(d)||a.cores(),r.physicalCores=parseInt(f)||a.cores()),k().then((t=>{r.cache=t,e(r)}))})),c){let t="",o=[];n.cpus()[0]&&n.cpus()[0].model&&(t=n.cpus()[0].model),i('export LC_ALL=C; lscpu; echo -n "Governor: "; cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor 2>/dev/null; echo; unset LC_ALL',(function(n,l){n||(o=l.toString().split("\n")),t=a.getValue(o,"model name")||t;const c=t.split("@");if(r.brand=c[0].trim(),r.speed=c[1]?parseFloat(c[1].trim()):0,0===r.speed&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)&&(r.speed=E(r.brand)),0===r.speed){const e=P();0!==e.avg&&(r.speed=e.avg)}g=r.speed,r.speedMin=Math.round(parseFloat(a.getValue(o,"cpu min mhz").replace(/,/g,"."))/10)/100,r.speedMax=Math.round(parseFloat(a.getValue(o,"cpu max mhz").replace(/,/g,"."))/10)/100,r=O(r),r.vendor=x(a.getValue(o,"vendor id")),r.family=a.getValue(o,"cpu family"),r.model=a.getValue(o,"model:"),r.stepping=a.getValue(o,"stepping"),r.revision=a.getValue(o,"cpu revision"),r.cache.l1d=a.getValue(o,"l1d cache"),r.cache.l1d&&(r.cache.l1d=parseInt(r.cache.l1d)*(-1!==r.cache.l1d.indexOf("M")?1048576:-1!==r.cache.l1d.indexOf("K")?1024:1)),r.cache.l1i=a.getValue(o,"l1i cache"),r.cache.l1i&&(r.cache.l1i=parseInt(r.cache.l1i)*(-1!==r.cache.l1i.indexOf("M")?1048576:-1!==r.cache.l1i.indexOf("K")?1024:1)),r.cache.l2=a.getValue(o,"l2 cache"),r.cache.l2&&(r.cache.l2=parseInt(r.cache.l2)*(-1!==r.cache.l2.indexOf("M")?1048576:-1!==r.cache.l2.indexOf("K")?1024:1)),r.cache.l3=a.getValue(o,"l3 cache"),r.cache.l3&&(r.cache.l3=parseInt(r.cache.l3)*(-1!==r.cache.l3.indexOf("M")?1048576:-1!==r.cache.l3.indexOf("K")?1024:1));const u=a.getValue(o,"thread(s) per core")||"1",p=a.getValue(o,"socket(s)")||"1";let f=parseInt(u,10),d=parseInt(p,10)||1;const h=parseInt(a.getValue(o,"core(s) per socket"),10);if(r.physicalCores=h?h*d:r.cores/f,r.performanceCores=f>1?r.cores-r.physicalCores:r.cores,r.efficiencyCores=f>1?r.cores-f*r.performanceCores:0,r.processors=d,r.governor=a.getValue(o,"governor")||"","ARM"===r.vendor){const e=s.readFileSync("/proc/cpuinfo").toString().split("\n"),t=a.decodePiCpuinfo(e);t.model.toLowerCase().indexOf("raspberry")>=0&&(r.family=r.manufacturer,r.manufacturer=t.manufacturer,r.brand=t.processor,r.revision=t.revisionCode,r.socket="SOC")}let m=[];i('export LC_ALL=C; dmidecode –t 4 2>/dev/null | grep "Upgrade: Socket"; unset LC_ALL',(function(t,n){m=n.toString().split("\n"),m&&m.length&&(r.socket=a.getValue(m,"Upgrade").replace("Socket","").trim()||r.socket),e(r)}))}))}if(f||d||h){let t="",o=[];n.cpus()[0]&&n.cpus()[0].model&&(t=n.cpus()[0].model),i("export LC_ALL=C; dmidecode -t 4; dmidecode -t 7 unset LC_ALL",(function(n,i){let s=[];if(!n){const e=i.toString().split("# dmidecode"),t=e.length>1?e[1]:"";s=e.length>2?e[2].split("Cache Information"):[],o=t.split("\n")}if(r.brand=t.split("@")[0].trim(),r.speed=t.split("@")[1]?parseFloat(t.split("@")[1].trim()):0,0===r.speed&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)&&(r.speed=E(r.brand)),0===r.speed){const e=P();0!==e.avg&&(r.speed=e.avg)}g=r.speed,r.speedMin=r.speed,r.speedMax=Math.round(parseFloat(a.getValue(o,"max speed").replace(/Mhz/g,""))/10)/100,r=O(r),r.vendor=x(a.getValue(o,"manufacturer"));let l=a.getValue(o,"signature");l=l.split(",");for(let e=0;e<l.length;e++)l[e]=l[e].trim();r.family=a.getValue(l,"Family"," ",!0),r.model=a.getValue(l,"Model"," ",!0),r.stepping=a.getValue(l,"Stepping"," ",!0),r.revision="";const c=parseFloat(a.getValue(o,"voltage"));r.voltage=isNaN(c)?"":c.toFixed(2);for(let e=0;e<s.length;e++){o=s[e].split("\n");let t=a.getValue(o,"Socket Designation").toLowerCase().replace(" ","-").split("-");t=t.length?t[0]:"";const n=a.getValue(o,"Installed Size").split(" ");let i=parseInt(n[0],10);const l=n.length>1?n[1]:"kb";i*="kb"===l?1024:"mb"===l?1048576:"gb"===l?1073741824:1,t&&("l1"===t?(r.cache[t+"d"]=i/2,r.cache[t+"i"]=i/2):r.cache[t]=i)}r.socket=a.getValue(o,"Upgrade").replace("Socket","").trim();const u=a.getValue(o,"thread count").trim(),p=a.getValue(o,"core count").trim();p&&u&&(r.cores=parseInt(u,10),r.physicalCores=parseInt(p,10)),e(r)}))}if(m&&e(r),p)try{const t=[];t.push(a.powerShell("Get-CimInstance Win32_processor | select Name, Revision, L2CacheSize, L3CacheSize, Manufacturer, MaxClockSpeed, Description, UpgradeMethod, Caption, NumberOfLogicalProcessors, NumberOfCores | fl")),t.push(a.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl")),t.push(a.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent")),Promise.all(t).then((t=>{let n=t[0].split("\r\n"),i=a.getValue(n,"name",":")||"";i.indexOf("@")>=0?(r.brand=i.split("@")[0].trim(),r.speed=i.split("@")[1]?parseFloat(i.split("@")[1].trim()):0,g=r.speed):(r.brand=i.trim(),r.speed=0),r=O(r),r.revision=a.getValue(n,"revision",":"),r.cache.l1d=0,r.cache.l1i=0,r.cache.l2=a.getValue(n,"l2cachesize",":"),r.cache.l3=a.getValue(n,"l3cachesize",":"),r.cache.l2&&(r.cache.l2=1024*parseInt(r.cache.l2,10)),r.cache.l3&&(r.cache.l3=1024*parseInt(r.cache.l3,10)),r.vendor=a.getValue(n,"manufacturer",":"),r.speedMax=Math.round(parseFloat(a.getValue(n,"maxclockspeed",":").replace(/,/g,"."))/10)/100,0===r.speed&&(r.brand.indexOf("AMD")>-1||r.brand.toLowerCase().indexOf("ryzen")>-1)&&(r.speed=E(r.brand)),0===r.speed&&(r.speed=r.speedMax),r.speedMin=r.speed;let o=a.getValue(n,"description",":").split(" ");for(let e=0;e<o.length;e++)o[e].toLowerCase().startsWith("family")&&e+1<o.length&&o[e+1]&&(r.family=o[e+1]),o[e].toLowerCase().startsWith("model")&&e+1<o.length&&o[e+1]&&(r.model=o[e+1]),o[e].toLowerCase().startsWith("stepping")&&e+1<o.length&&o[e+1]&&(r.stepping=o[e+1]);const s=a.getValue(n,"UpgradeMethod",":");_[s]&&(r.socket=_[s]);const l=function(e){let t="";for(const r in S)S[r].split(" ").forEach((n=>{e.indexOf(n)>=0&&(t=r)}));return t}(i);l&&(r.socket=l);const c=a.countLines(n,"Caption"),u=a.getValue(n,"NumberOfLogicalProcessors",":"),p=a.getValue(n,"NumberOfCores",":");c&&(r.processors=parseInt(c)||1),p&&u&&(r.cores=parseInt(u)||a.cores(),r.physicalCores=parseInt(p)||a.cores()),c>1&&(r.cores=r.cores*c,r.physicalCores=r.physicalCores*c);t[1].split(/\n\s*\n/).forEach((function(e){n=e.split("\r\n");const t=a.getValue(n,"CacheType"),i=a.getValue(n,"Level"),o=a.getValue(n,"InstalledSize");"3"===i&&"3"===t&&(r.cache.l1i=parseInt(o,10)),"3"===i&&"4"===t&&(r.cache.l1d=parseInt(o,10)),"3"!==i||"5"!==t||r.cache.l1i||r.cache.l1d||(r.cache.l1i=parseInt(o,10)/2,r.cache.l1d=parseInt(o,10)/2)}));const f=t[2]?t[2].toString().toLowerCase():"";r.virtualization=-1!==f.indexOf("true"),e(r)}))}catch(t){e(r)}}))}))}))}function P(){let e=n.cpus(),t=999999999,r=0,i=0,o=[];if(e&&e.length){for(let n in e)if({}.hasOwnProperty.call(e,n)){let s=e[n].speed>100?(e[n].speed+1)/1e3:e[n].speed/10;i+=s,s>r&&(r=s),s<t&&(t=s),o.push(parseFloat(s.toFixed(2)))}return i/=e.length,{min:parseFloat(t.toFixed(2)),max:parseFloat(r.toFixed(2)),avg:parseFloat(i.toFixed(2)),cores:o}}return{min:0,max:0,avg:0,cores:o}}function I(e){return new Promise((r=>{t.nextTick((()=>{let t="";if(p)try{i('reg query "HKEY_LOCAL_MACHINE\\HARDWARE\\DESCRIPTION\\System\\CentralProcessor\\0" /v FeatureSet',a.execOptsWin,(function(n,i){if(!n){let e=i.split("0x").pop().trim(),r=parseInt(e,16).toString(2),n="0".repeat(32-r.length)+r,o=["fpu","vme","de","pse","tsc","msr","pae","mce","cx8","apic","","sep","mtrr","pge","mca","cmov","pat","pse-36","psn","clfsh","","ds","acpi","mmx","fxsr","sse","sse2","ss","htt","tm","ia64","pbe"];for(let e=0;e<o.length;e++)"1"===n[e]&&""!==o[e]&&(t+=" "+o[e]);t=t.trim().toLowerCase()}e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}if(c)try{i("export LC_ALL=C; lscpu; unset LC_ALL",(function(n,i){if(!n){i.toString().split("\n").forEach((function(e){-1!==e.split(":")[0].toUpperCase().indexOf("FLAGS")&&(t=e.split(":")[1].trim().toLowerCase())}))}t?(e&&e(t),r(t)):s.readFile("/proc/cpuinfo",(function(n,i){if(!n){let e=i.toString().split("\n");t=a.getValue(e,"features",":",!0).toLowerCase()}e&&e(t),r(t)}))}))}catch(n){e&&e(t),r(t)}(f||d||h)&&i("export LC_ALL=C; dmidecode -t 4 2>/dev/null; unset LC_ALL",(function(n,i){let o=[];if(!n){let e=i.toString().split("\tFlags:");(e.length>1?e[1].split("\tVersion:")[0].split("\n"):[]).forEach((function(e){let t=(e.indexOf("(")?e.split("(")[0].toLowerCase():"").trim().replace(/\t/g,"");t&&o.push(t)}))}t=o.join(" ").trim().toLowerCase(),e&&e(t),r(t)})),u&&i("sysctl machdep.cpu.features",(function(n,i){if(!n){let e=i.toString().split("\n");e.length>0&&-1!==e[0].indexOf("machdep.cpu.features:")&&(t=e[0].split(":")[1].trim().toLowerCase())}e&&e(t),r(t)})),m&&(e&&e(t),r(t))}))}))}function k(e){return new Promise((r=>{t.nextTick((()=>{let t={l1d:null,l1i:null,l2:null,l3:null};if(c)try{i("export LC_ALL=C; lscpu; unset LC_ALL",(function(n,i){if(!n){i.toString().split("\n").forEach((function(e){let r=e.split(":");-1!==r[0].toUpperCase().indexOf("L1D CACHE")&&(t.l1d=parseInt(r[1].trim())*(-1!==r[1].indexOf("M")?1048576:-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toUpperCase().indexOf("L1I CACHE")&&(t.l1i=parseInt(r[1].trim())*(-1!==r[1].indexOf("M")?1048576:-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toUpperCase().indexOf("L2 CACHE")&&(t.l2=parseInt(r[1].trim())*(-1!==r[1].indexOf("M")?1048576:-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toUpperCase().indexOf("L3 CACHE")&&(t.l3=parseInt(r[1].trim())*(-1!==r[1].indexOf("M")?1048576:-1!==r[1].indexOf("K")?1024:1))}))}e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}if((f||d||h)&&i("export LC_ALL=C; dmidecode -t 7 2>/dev/null; unset LC_ALL",(function(n,i){let o=[];if(!n){o=i.toString().split("Cache Information"),o.shift()}for(let e=0;e<o.length;e++){const r=o[e].split("\n");let n=a.getValue(r,"Socket Designation").toLowerCase().replace(" ","-").split("-");n=n.length?n[0]:"";const i=a.getValue(r,"Installed Size").split(" ");let s=parseInt(i[0],10);const l=i.length>1?i[1]:"kb";s*="kb"===l?1024:"mb"===l?1048576:"gb"===l?1073741824:1,n&&("l1"===n?(t.cache[n+"d"]=s/2,t.cache[n+"i"]=s/2):t.cache[n]=s)}e&&e(t),r(t)})),u&&i("sysctl hw.l1icachesize hw.l1dcachesize hw.l2cachesize hw.l3cachesize",(function(n,i){if(!n){i.toString().split("\n").forEach((function(e){let r=e.split(":");-1!==r[0].toLowerCase().indexOf("hw.l1icachesize")&&(t.l1d=parseInt(r[1].trim())*(-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toLowerCase().indexOf("hw.l1dcachesize")&&(t.l1i=parseInt(r[1].trim())*(-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toLowerCase().indexOf("hw.l2cachesize")&&(t.l2=parseInt(r[1].trim())*(-1!==r[1].indexOf("K")?1024:1)),-1!==r[0].toLowerCase().indexOf("hw.l3cachesize")&&(t.l3=parseInt(r[1].trim())*(-1!==r[1].indexOf("K")?1024:1))}))}e&&e(t),r(t)})),m&&(e&&e(t),r(t)),p)try{a.powerShell("Get-CimInstance Win32_processor | select L2CacheSize, L3CacheSize | fl").then(((n,i)=>{if(!i){let e=n.split("\r\n");t.l1d=0,t.l1i=0,t.l2=a.getValue(e,"l2cachesize",":"),t.l3=a.getValue(e,"l3cachesize",":"),t.l2&&(t.l2=1024*parseInt(t.l2,10)),t.l3&&(t.l3=1024*parseInt(t.l3,10))}a.powerShell("Get-CimInstance Win32_CacheMemory | select CacheType,InstalledSize,Level | fl").then(((n,i)=>{if(!i){n.split(/\n\s*\n/).forEach((function(e){const r=e.split("\r\n"),n=a.getValue(r,"CacheType"),i=a.getValue(r,"Level"),o=a.getValue(r,"InstalledSize");"3"===i&&"3"===n&&(t.l1i=parseInt(o,10)),"3"===i&&"4"===n&&(t.l1d=parseInt(o,10)),"3"!==i||"5"!==n||t.l1i||t.l1d||(t.l1i=parseInt(o,10)/2,t.l1d=parseInt(o,10)/2)}))}e&&e(t),r(t)}))}))}catch(n){e&&e(t),r(t)}}))}))}r.cpu=function(e){return new Promise((r=>{t.nextTick((()=>{C().then((t=>{e&&e(t),r(t)}))}))}))},r.cpuCurrentSpeed=function(e){return new Promise((r=>{t.nextTick((()=>{let t=P();if(0===t.avg&&0!==g){const e=parseFloat(g);t={min:e,max:e,avg:e,cores:[]}}e&&e(t),r(t)}))}))},r.cpuTemperature=function(e){return new Promise((r=>{t.nextTick((()=>{let t={main:null,cores:[],max:null,socket:[],chipset:null};if(c){try{const e=o('cat /sys/class/thermal/thermal_zone*/type  2>/dev/null; echo "-----"; cat /sys/class/thermal/thermal_zone*/temp 2>/dev/null;').toString().split("-----\n");if(2===e.length){const r=e[0].split("\n"),n=e[1].split("\n");for(let e=0;e<r.length;e++){const i=r[e].trim();i.startsWith("acpi")&&n[e]&&t.socket.push(Math.round(parseInt(n[e],10)/100)/10),i.startsWith("pch")&&n[e]&&(t.chipset=Math.round(parseInt(n[e],10)/100)/10)}}}catch(e){a.noop()}const n='for mon in /sys/class/hwmon/hwmon*; do for label in "$mon"/temp*_label; do if [ -f $label ]; then value=${label%_*}_input; echo $(cat "$label")___$(cat "$value"); fi; done; done;';try{i(n,(function(n,o){const a=(o=o.toString()).toLowerCase().indexOf("tdie");if(-1!==a&&(o=o.substring(a)),o.split("\n").forEach((e=>{const r=e.split("___"),n=r[0],i=r.length>1&&r[1]?r[1]:"0";i&&(void 0===n||n&&n.toLowerCase().startsWith("core"))?t.cores.push(Math.round(parseInt(i,10)/100)/10):i&&n&&null===t.main&&(n.toLowerCase().indexOf("package")>=0||n.toLowerCase().indexOf("physical")>=0)&&(t.main=Math.round(parseInt(i,10)/100)/10)})),t.cores.length>0){null===t.main&&(t.main=Math.round(t.cores.reduce(((e,t)=>e+t),0)/t.cores.length));let e=Math.max.apply(Math,t.cores);t.max=e>t.main?e:t.main}if(null!==t.main)return null===t.max&&(t.max=t.main),e&&e(t),void r(t);i("sensors",(function(n,o){if(!n){let n=o.toString().split("\n"),i=null,s=!0,a="";if(n.forEach((function(e){""===e.trim()?s=!0:s&&(e.trim().toLowerCase().startsWith("acpi")&&(a="acpi"),e.trim().toLowerCase().startsWith("pch")&&(a="pch"),e.trim().toLowerCase().startsWith("core")&&(a="core"),s=!1);let r=e.match(/[+-]([^°]*)/g),n=e.split(":")[0].toUpperCase();"acpi"===a?-1!==n.indexOf("TEMP")&&t.socket.push(parseFloat(r)):"pch"===a&&(-1===n.indexOf("TEMP")||t.chipset||(t.chipset=parseFloat(r))),-1===n.indexOf("PHYSICAL")&&-1===n.indexOf("PACKAGE")||(t.main=parseFloat(r)),-1!==n.indexOf("CORE ")&&t.cores.push(parseFloat(r)),-1!==n.indexOf("TDIE")&&null===i&&(i=parseFloat(r))})),t.cores.length>0){t.main=Math.round(t.cores.reduce(((e,t)=>e+t),0)/t.cores.length);let e=Math.max.apply(Math,t.cores);t.max=e>t.main?e:t.main}else null===t.main&&null!==i&&(t.main=i,t.max=i);if(null!==t.main||null!==t.max)return e&&e(t),void r(t)}s.stat("/sys/class/thermal/thermal_zone0/temp",(function(n){null===n?s.readFile("/sys/class/thermal/thermal_zone0/temp",(function(n,i){if(!n){let e=i.toString().split("\n");e.length>0&&(t.main=parseFloat(e[0])/1e3,t.max=t.main)}e&&e(t),r(t)})):i("/opt/vc/bin/vcgencmd measure_temp",(function(n,i){if(!n){let e=i.toString().split("\n");e.length>0&&e[0].indexOf("=")&&(t.main=parseFloat(e[0].split("=")[1]),t.max=t.main)}e&&e(t),r(t)}))}))}))}))}catch(n){e&&e(t),r(t)}}if((f||d||h)&&i("sysctl dev.cpu | grep temp",(function(n,i){if(!n){let e=i.toString().split("\n"),r=0;e.forEach((function(e){const n=e.split(":");if(n.length>1){const e=parseFloat(n[1].replace(",","."));e>t.max&&(t.max=e),r+=e,t.cores.push(e)}})),t.cores.length&&(t.main=Math.round(r/t.cores.length*100)/100)}e&&e(t),r(t)})),m&&(e&&e(t),r(t)),p)try{a.powerShell('Get-CimInstance MSAcpi_ThermalZoneTemperature -Namespace "root/wmi" | Select CurrentTemperature').then(((n,i)=>{if(!i){let e=0;n.split("\r\n").filter((e=>""!==e.trim())).filter(((e,t)=>t>0)).forEach((function(r){let n=(parseInt(r,10)-2732)/10;isNaN(n)||(e+=n,n>t.max&&(t.max=n),t.cores.push(n))})),t.cores.length&&(t.main=e/t.cores.length)}e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}}))}))},r.cpuFlags=I,r.cpuCache=k,r.currentLoad=function(e){return new Promise((r=>{t.nextTick((()=>{new Promise((e=>{t.nextTick((()=>{let t=n.loadavg().map((function(e){return e/a.cores()})),r=parseFloat(Math.max.apply(Math,t).toFixed(2)),i={};if(Date.now()-y.ms>=200){y.ms=Date.now();const e=n.cpus();let t=0,o=0,s=0,a=0,l=0,c=[];b=e&&e.length?e.length:0;for(let r=0;r<b;r++){const n=e[r].times;t+=n.user,o+=n.sys,s+=n.nice,l+=n.idle,a+=n.irq;let i=v&&v[r]&&v[r].totalTick?v[r].totalTick:0,u=v&&v[r]&&v[r].totalLoad?v[r].totalLoad:0,p=v&&v[r]&&v[r].user?v[r].user:0,f=v&&v[r]&&v[r].sys?v[r].sys:0,d=v&&v[r]&&v[r].nice?v[r].nice:0,h=v&&v[r]&&v[r].idle?v[r].idle:0,m=v&&v[r]&&v[r].irq?v[r].irq:0;v[r]=n,v[r].totalTick=v[r].user+v[r].sys+v[r].nice+v[r].irq+v[r].idle,v[r].totalLoad=v[r].user+v[r].sys+v[r].nice+v[r].irq,v[r].currentTick=v[r].totalTick-i,v[r].load=v[r].totalLoad-u,v[r].loadUser=v[r].user-p,v[r].loadSystem=v[r].sys-f,v[r].loadNice=v[r].nice-d,v[r].loadIdle=v[r].idle-h,v[r].loadIrq=v[r].irq-m,c[r]={},c[r].load=v[r].load/v[r].currentTick*100,c[r].loadUser=v[r].loadUser/v[r].currentTick*100,c[r].loadSystem=v[r].loadSystem/v[r].currentTick*100,c[r].loadNice=v[r].loadNice/v[r].currentTick*100,c[r].loadIdle=v[r].loadIdle/v[r].currentTick*100,c[r].loadIrq=v[r].loadIrq/v[r].currentTick*100,c[r].rawLoad=v[r].load,c[r].rawLoadUser=v[r].loadUser,c[r].rawLoadSystem=v[r].loadSystem,c[r].rawLoadNice=v[r].loadNice,c[r].rawLoadIdle=v[r].loadIdle,c[r].rawLoadIrq=v[r].loadIrq}let u=t+o+s+a+l,p=t+o+s+a,f=u-y.tick;i={avgLoad:r,currentLoad:(p-y.load)/f*100,currentLoadUser:(t-y.user)/f*100,currentLoadSystem:(o-y.system)/f*100,currentLoadNice:(s-y.nice)/f*100,currentLoadIdle:(l-y.idle)/f*100,currentLoadIrq:(a-y.irq)/f*100,rawCurrentLoad:p-y.load,rawCurrentLoadUser:t-y.user,rawCurrentLoadSystem:o-y.system,rawCurrentLoadNice:s-y.nice,rawCurrentLoadIdle:l-y.idle,rawCurrentLoadIrq:a-y.irq,cpus:c},y={user:t,nice:s,system:o,idle:l,irq:a,tick:u,load:p,ms:y.ms,currentLoad:i.currentLoad,currentLoadUser:i.currentLoadUser,currentLoadSystem:i.currentLoadSystem,currentLoadNice:i.currentLoadNice,currentLoadIdle:i.currentLoadIdle,currentLoadIrq:i.currentLoadIrq,rawCurrentLoad:i.rawCurrentLoad,rawCurrentLoadUser:i.rawCurrentLoadUser,rawCurrentLoadSystem:i.rawCurrentLoadSystem,rawCurrentLoadNice:i.rawCurrentLoadNice,rawCurrentLoadIdle:i.rawCurrentLoadIdle,rawCurrentLoadIrq:i.rawCurrentLoadIrq}}else{let e=[];for(let t=0;t<b;t++)e[t]={},e[t].load=v[t].load/v[t].currentTick*100,e[t].loadUser=v[t].loadUser/v[t].currentTick*100,e[t].loadSystem=v[t].loadSystem/v[t].currentTick*100,e[t].loadNice=v[t].loadNice/v[t].currentTick*100,e[t].loadIdle=v[t].loadIdle/v[t].currentTick*100,e[t].loadIrq=v[t].loadIrq/v[t].currentTick*100,e[t].rawLoad=v[t].load,e[t].rawLoadUser=v[t].loadUser,e[t].rawLoadSystem=v[t].loadSystem,e[t].rawLoadNice=v[t].loadNice,e[t].rawLoadIdle=v[t].loadIdle,e[t].rawLoadIrq=v[t].loadIrq;i={avgLoad:r,currentLoad:y.currentLoad,currentLoadUser:y.currentLoadUser,currentLoadSystem:y.currentLoadSystem,currentLoadNice:y.currentLoadNice,currentLoadIdle:y.currentLoadIdle,currentLoadIrq:y.currentLoadIrq,rawCurrentLoad:y.rawCurrentLoad,rawCurrentLoadUser:y.rawCurrentLoadUser,rawCurrentLoadSystem:y.rawCurrentLoadSystem,rawCurrentLoadNice:y.rawCurrentLoadNice,rawCurrentLoadIdle:y.rawCurrentLoadIdle,rawCurrentLoadIrq:y.rawCurrentLoadIrq,cpus:e}}e(i)}))})).then((t=>{e&&e(t),r(t)}))}))}))},r.fullLoad=function(e){return new Promise((r=>{t.nextTick((()=>{new Promise((e=>{t.nextTick((()=>{const t=n.cpus();let r=0,i=0,o=0,s=0,a=0,l=0;if(t&&t.length){for(let e=0,n=t.length;e<n;e++){const n=t[e].times;r+=n.user,i+=n.sys,o+=n.nice,s+=n.irq,a+=n.idle}let e=a+s+o+i+r;l=(e-a)/e*100}e(l)}))})).then((t=>{e&&e(t),r(t)}))}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178}],263:[function(e,t,r){(function(t){(function(){"use strict";const n=e("./util"),i=e("./dockerSocket");const o="win32"===t.platform;let s,a={},l=0;function c(e,r){function o(e,t){return e.filter((e=>e.Id&&e.Id===t)).length>0}n.isFunction(e)&&!r&&(r=e,e=!1),"string"==typeof e&&"true"===e&&(e=!0),"boolean"!=typeof e&&void 0!==e&&(e=!1),e=e||!1;let l=[];return new Promise((c=>{t.nextTick((()=>{s||(s=new i);const u=[];s.listContainers(e,(e=>{let p={};try{if(p=e,p&&"[object Array]"===Object.prototype.toString.call(p)&&p.length>0){for(let e in a)({}).hasOwnProperty.call(a,e)&&(o(p,e)||delete a[e]);p.forEach((function(e){var r,o;e.Names&&"[object Array]"===Object.prototype.toString.call(e.Names)&&e.Names.length>0&&(e.Name=e.Names[0].replace(/^\/|\/$/g,"")),u.push((r=e.Id.trim(),o=e,new Promise((e=>{t.nextTick((()=>{if("string"!=typeof(r=r||""))return e();const t=(n.isPrototypePolluted()?"":n.sanitizeShellString(r,!0)).trim();t?(s||(s=new i),s.getInspect(t.trim(),(t=>{try{e({id:o.Id,name:o.Name,image:o.Image,imageID:o.ImageID,command:o.Command,created:o.Created,started:t.State&&t.State.StartedAt?Math.round(new Date(t.State.StartedAt).getTime()/1e3):0,finished:t.State&&t.State.FinishedAt&&!t.State.FinishedAt.startsWith("0001-01-01")?Math.round(new Date(t.State.FinishedAt).getTime()/1e3):0,createdAt:t.Created?t.Created:"",startedAt:t.State&&t.State.StartedAt?t.State.StartedAt:"",finishedAt:t.State&&t.State.FinishedAt&&!t.State.FinishedAt.startsWith("0001-01-01")?t.State.FinishedAt:"",state:o.State,restartCount:t.RestartCount||0,platform:t.Platform||"",driver:t.Driver||"",ports:o.Ports,mounts:o.Mounts})}catch(t){e()}}))):e()}))}))))})),u.length?Promise.all(u).then((e=>{r&&r(e),c(e)})):(r&&r(l),c(l))}else r&&r(l),c(l)}catch(e){for(let e in a)({}).hasOwnProperty.call(a,e)&&(o(p,e)||delete a[e]);r&&r(l),c(l)}}))}))}))}function u(e,r){let i=[];return new Promise((o=>{t.nextTick((()=>{if(n.isFunction(e)&&!r)r=e,i=["*"];else{if("string"!=typeof(e=e||"*"))return r&&r([]),o([]);let t="";if(t.__proto__.toLowerCase=n.stringToLower,t.__proto__.replace=n.stringReplace,t.__proto__.trim=n.stringTrim,t=e,t=t.trim(),"*"!==t){t="";const r=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,!0)).trim();for(let e=0;e<=n.mathMin(r.length,2e3);e++)if(void 0!==r[e]){r[e].__proto__.toLowerCase=n.stringToLower;const i=r[e].toLowerCase();i&&i[0]&&!i[1]&&(t+=i[0])}}t=t.trim().toLowerCase().replace(/,+/g,"|"),i=t.split("|")}const t=[],s=[];if(i.length&&"*"===i[0].trim())i=[],c().then((e=>{for(let t of e)i.push(t.id);i.length?u(i.join(",")).then((e=>{r&&r(e),o(e)})):(r&&r(t),o(t))}));else{for(let e of i)s.push(p(e.trim()));s.length?Promise.all(s).then((e=>{r&&r(e),o(e)})):(r&&r(t),o(t))}}))}))}function p(e){let r={id:e=e||"",memUsage:0,memLimit:0,memPercent:0,cpuPercent:0,pids:0,netIO:{rx:0,wx:0},blockIO:{r:0,w:0},restartCount:0,cpuStats:{},precpuStats:{},memoryStats:{},networks:{}};return new Promise((a=>{t.nextTick((()=>{e?(s||(s=new i),s.getInspect(e,(t=>{try{s.getStats(e,(e=>{try{let i=e;i.message||(r.memUsage=i.memory_stats&&i.memory_stats.usage?i.memory_stats.usage:0,r.memLimit=i.memory_stats&&i.memory_stats.limit?i.memory_stats.limit:0,r.memPercent=i.memory_stats&&i.memory_stats.usage&&i.memory_stats.limit?i.memory_stats.usage/i.memory_stats.limit*100:0,r.cpuPercent=i.cpu_stats&&i.precpu_stats?function(e,t){if(o){let r=n.nanoSeconds(),i=0;if(l>0){let n=r-l,o=e.cpu_usage.total_usage-t.cpu_usage.total_usage;n>0&&(i=100*o/n)}return l=r,i}{let r=0,n=e.cpu_usage.total_usage-t.cpu_usage.total_usage,i=e.system_cpu_usage-t.system_cpu_usage;return i>0&&n>0&&(r=t.online_cpus?n/i*t.online_cpus*100:n/i*e.cpu_usage.percpu_usage.length*100),r}}(i.cpu_stats,i.precpu_stats):0,r.pids=i.pids_stats&&i.pids_stats.current?i.pids_stats.current:0,r.restartCount=t.RestartCount?t.RestartCount:0,i.networks&&(r.netIO=function(e){let t,r;for(let n in e){if(!{}.hasOwnProperty.call(e,n))continue;let i=e[n];t=+i.rx_bytes,r=+i.tx_bytes}return{rx:t,wx:r}}(i.networks)),i.blkio_stats&&(r.blockIO=function(e){let t={r:0,w:0};return e&&e.io_service_bytes_recursive&&"[object Array]"===Object.prototype.toString.call(e.io_service_bytes_recursive)&&e.io_service_bytes_recursive.length>0&&e.io_service_bytes_recursive.forEach((function(e){e.op&&"read"===e.op.toLowerCase()&&e.value&&(t.r+=e.value),e.op&&"write"===e.op.toLowerCase()&&e.value&&(t.w+=e.value)})),t}(i.blkio_stats)),r.cpuStats=i.cpu_stats?i.cpu_stats:{},r.precpuStats=i.precpu_stats?i.precpu_stats:{},r.memoryStats=i.memory_stats?i.memory_stats:{},r.networks=i.networks?i.networks:{})}catch(e){n.noop()}a(r)}))}catch(e){n.noop()}}))):a(r)}))}))}function f(e,r){let o=[];return new Promise((a=>{t.nextTick((()=>{if("string"!=typeof(e=e||""))return a(o);const t=(n.isPrototypePolluted()?"":n.sanitizeShellString(e,!0)).trim();t?(s||(s=new i),s.getProcesses(t,(e=>{try{if(e&&e.Titles&&e.Processes){let t=e.Titles.map((function(e){return e.toUpperCase()})),r=t.indexOf("PID"),n=t.indexOf("PPID"),i=t.indexOf("PGID"),s=t.indexOf("VSZ"),a=t.indexOf("TIME"),l=t.indexOf("ELAPSED"),c=t.indexOf("NI"),u=t.indexOf("RUSER"),p=t.indexOf("USER"),f=t.indexOf("RGROUP"),d=t.indexOf("GROUP"),h=t.indexOf("STAT"),m=t.indexOf("RSS"),g=t.indexOf("COMMAND");e.Processes.forEach((e=>{o.push({pidHost:r>=0?e[r]:"",ppid:n>=0?e[n]:"",pgid:i>=0?e[i]:"",user:p>=0?e[p]:"",ruser:u>=0?e[u]:"",group:d>=0?e[d]:"",rgroup:f>=0?e[f]:"",stat:h>=0?e[h]:"",time:a>=0?e[a]:"",elapsed:l>=0?e[l]:"",nice:c>=0?e[c]:"",rss:m>=0?e[m]:"",vsz:s>=0?e[s]:"",command:g>=0?e[g]:""})}))}}catch(e){n.noop()}r&&r(o),a(o)}))):(r&&r(o),a(o))}))}))}r.dockerInfo=function(e){return new Promise((r=>{t.nextTick((()=>{s||(s=new i);const t={};s.getInfo((n=>{t.id=n.ID,t.containers=n.Containers,t.containersRunning=n.ContainersRunning,t.containersPaused=n.ContainersPaused,t.containersStopped=n.ContainersStopped,t.images=n.Images,t.driver=n.Driver,t.memoryLimit=n.MemoryLimit,t.swapLimit=n.SwapLimit,t.kernelMemory=n.KernelMemory,t.cpuCfsPeriod=n.CpuCfsPeriod,t.cpuCfsQuota=n.CpuCfsQuota,t.cpuShares=n.CPUShares,t.cpuSet=n.CPUSet,t.ipv4Forwarding=n.IPv4Forwarding,t.bridgeNfIptables=n.BridgeNfIptables,t.bridgeNfIp6tables=n.BridgeNfIp6tables,t.debug=n.Debug,t.nfd=n.NFd,t.oomKillDisable=n.OomKillDisable,t.ngoroutines=n.NGoroutines,t.systemTime=n.SystemTime,t.loggingDriver=n.LoggingDriver,t.cgroupDriver=n.CgroupDriver,t.nEventsListener=n.NEventsListener,t.kernelVersion=n.KernelVersion,t.operatingSystem=n.OperatingSystem,t.osType=n.OSType,t.architecture=n.Architecture,t.ncpu=n.NCPU,t.memTotal=n.MemTotal,t.dockerRootDir=n.DockerRootDir,t.httpProxy=n.HttpProxy,t.httpsProxy=n.HttpsProxy,t.noProxy=n.NoProxy,t.name=n.Name,t.labels=n.Labels,t.experimentalBuild=n.ExperimentalBuild,t.serverVersion=n.ServerVersion,t.clusterStore=n.ClusterStore,t.clusterAdvertise=n.ClusterAdvertise,t.defaultRuntime=n.DefaultRuntime,t.liveRestoreEnabled=n.LiveRestoreEnabled,t.isolation=n.Isolation,t.initBinary=n.InitBinary,t.productLicense=n.ProductLicense,e&&e(t),r(t)}))}))}))},r.dockerImages=function(e,r){n.isFunction(e)&&!r&&(r=e,e=!1),"string"==typeof e&&"true"===e&&(e=!0),"boolean"!=typeof e&&void 0!==e&&(e=!1),e=e||!1;let o=[];return new Promise((a=>{t.nextTick((()=>{s||(s=new i);const l=[];s.listImages(e,(e=>{let c={};try{c=e,c&&"[object Array]"===Object.prototype.toString.call(c)&&c.length>0?(c.forEach((function(e){var r,o;e.Names&&"[object Array]"===Object.prototype.toString.call(e.Names)&&e.Names.length>0&&(e.Name=e.Names[0].replace(/^\/|\/$/g,"")),l.push((r=e.Id.trim(),o=e,new Promise((e=>{t.nextTick((()=>{if("string"!=typeof(r=r||""))return e();const t=(n.isPrototypePolluted()?"":n.sanitizeShellString(r,!0)).trim();t?(s||(s=new i),s.inspectImage(t.trim(),(t=>{try{e({id:o.Id,container:t.Container,comment:t.Comment,os:t.Os,architecture:t.Architecture,parent:t.Parent,dockerVersion:t.DockerVersion,size:t.Size,sharedSize:o.SharedSize,virtualSize:t.VirtualSize,author:t.Author,created:t.Created?Math.round(new Date(t.Created).getTime()/1e3):0,containerConfig:t.ContainerConfig?t.ContainerConfig:{},graphDriver:t.GraphDriver?t.GraphDriver:{},repoDigests:t.RepoDigests?t.RepoDigests:{},repoTags:t.RepoTags?t.RepoTags:{},config:t.Config?t.Config:{},rootFS:t.RootFS?t.RootFS:{}})}catch(t){e()}}))):e()}))}))))})),l.length?Promise.all(l).then((e=>{r&&r(e),a(e)})):(r&&r(o),a(o))):(r&&r(o),a(o))}catch(e){r&&r(o),a(o)}}))}))}))},r.dockerContainers=c,r.dockerContainerStats=u,r.dockerContainerProcesses=f,r.dockerVolumes=function(e){let r=[];return new Promise((n=>{t.nextTick((()=>{s||(s=new i),s.listVolumes((t=>{let i={};try{i=t,i&&i.Volumes&&"[object Array]"===Object.prototype.toString.call(i.Volumes)&&i.Volumes.length>0?(i.Volumes.forEach((function(e){r.push({name:e.Name,driver:e.Driver,labels:e.Labels,mountpoint:e.Mountpoint,options:e.Options,scope:e.Scope,created:e.CreatedAt?Math.round(new Date(e.CreatedAt).getTime()/1e3):0})})),e&&e(r),n(r)):(e&&e(r),n(r))}catch(t){e&&e(r),n(r)}}))}))}))},r.dockerAll=function(e){return new Promise((r=>{t.nextTick((()=>{c(!0).then((t=>{if(t&&"[object Array]"===Object.prototype.toString.call(t)&&t.length>0){let n=t.length;t.forEach((function(i){u(i.id).then((o=>{i.memUsage=o[0].memUsage,i.memLimit=o[0].memLimit,i.memPercent=o[0].memPercent,i.cpuPercent=o[0].cpuPercent,i.pids=o[0].pids,i.netIO=o[0].netIO,i.blockIO=o[0].blockIO,i.cpuStats=o[0].cpuStats,i.precpuStats=o[0].precpuStats,i.memoryStats=o[0].memoryStats,i.networks=o[0].networks,f(i.id).then((o=>{i.processes=o,n-=1,0===n&&(e&&e(t),r(t))}))}))}))}else e&&e(t),r(t)}))}))}))}}).call(this)}).call(this,e("_process"))},{"./dockerSocket":264,"./util":277,_process:181}],264:[function(e,t,r){"use strict";const n=e("net"),i="Windows_NT"===e("os").type()?"//./pipe/docker_engine":"/var/run/docker.sock";t.exports=class{getInfo(e){try{let t,r=n.createConnection({path:i}),o="";r.on("connect",(()=>{r.write("GET http:/info HTTP/1.0\r\n\r\n")})),r.on("data",(e=>{o+=e.toString()})),r.on("error",(()=>{r=!1,e({})})),r.on("end",(()=>{let n=o.indexOf("\r\n\r\n");o=o.substring(n+4),r=!1;try{t=JSON.parse(o),e(t)}catch(t){e({})}}))}catch(t){e({})}}listImages(e,t){try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/images/json"+(e?"?all=1":"")+" HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}}inspectImage(e,t){if(e=e||"")try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/images/"+e+"/json?stream=0 HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}else t({})}listContainers(e,t){try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/containers/json"+(e?"?all=1":"")+" HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}}getStats(e,t){if(e=e||"")try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/containers/"+e+"/stats?stream=0 HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}else t({})}getInspect(e,t){if(e=e||"")try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/containers/"+e+"/json?stream=0 HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}else t({})}getProcesses(e,t){if(e=e||"")try{let r,o=n.createConnection({path:i}),s="";o.on("connect",(()=>{o.write("GET http:/containers/"+e+"/top?ps_args=-opid,ppid,pgid,vsz,time,etime,nice,ruser,user,rgroup,group,stat,rss,args HTTP/1.0\r\n\r\n")})),o.on("data",(e=>{s+=e.toString()})),o.on("error",(()=>{o=!1,t({})})),o.on("end",(()=>{let e=s.indexOf("\r\n\r\n");s=s.substring(e+4),o=!1;try{r=JSON.parse(s),t(r)}catch(e){t({})}}))}catch(e){t({})}else t({})}listVolumes(e){try{let t,r=n.createConnection({path:i}),o="";r.on("connect",(()=>{r.write("GET http:/volumes HTTP/1.0\r\n\r\n")})),r.on("data",(e=>{o+=e.toString()})),r.on("error",(()=>{r=!1,e({})})),r.on("end",(()=>{let n=o.indexOf("\r\n\r\n");o=o.substring(n+4),r=!1;try{t=JSON.parse(o),e(t)}catch(t){e({})}}))}catch(t){e({})}}}},{net:63,os:178}],265:[function(e,t,r){(function(t){(function(){"use strict";const n=e("./util"),i=e("fs"),o=e("child_process").exec,s=e("child_process").execSync,a=n.promisifySave(e("child_process").exec);let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l;let g={},y={};function v(e){let t=[],r=0;return e.forEach((e=>{if(e.length>0)if("*"===e[0])r++;else{let i=e.split(":");i.length>1&&(t[r]||(t[r]={name:"",identifier:"",type:"disk",fsType:"",mount:"",size:0,physical:"HDD",uuid:"",label:"",model:"",serial:"",removable:!1,protocol:"",group:"",device:""}),i[0]=i[0].trim().toUpperCase().replace(/ +/g,""),i[1]=i[1].trim(),"DEVICEIDENTIFIER"===i[0]&&(t[r].identifier=i[1]),"DEVICENODE"===i[0]&&(t[r].name=i[1]),"VOLUMENAME"===i[0]&&-1===i[1].indexOf("Not applicable")&&(t[r].label=i[1]),"PROTOCOL"===i[0]&&(t[r].protocol=i[1]),"DISKSIZE"===i[0]&&(t[r].size=(n=i[1],parseInt(n.substr(n.indexOf(" (")+2,n.indexOf(" Bytes)")-10)))),"FILESYSTEMPERSONALITY"===i[0]&&(t[r].fsType=i[1]),"MOUNTPOINT"===i[0]&&(t[r].mount=i[1]),"VOLUMEUUID"===i[0]&&(t[r].uuid=i[1]),"READ-ONLYMEDIA"===i[0]&&"Yes"===i[1]&&(t[r].physical="CD/DVD"),"SOLIDSTATE"===i[0]&&"Yes"===i[1]&&(t[r].physical="SSD"),"VIRTUAL"===i[0]&&(t[r].type="virtual"),"REMOVABLEMEDIA"===i[0]&&(t[r].removable="Removable"===i[1]),"PARTITIONTYPE"===i[0]&&(t[r].type="part"),"DEVICE/MEDIANAME"===i[0]&&(t[r].model=i[1]))}var n})),t}function b(e){let t=[];return e.filter((e=>""!==e)).forEach((e=>{try{e=(e=decodeURIComponent(e.replace(/\\x/g,"%"))).replace(/\\/g,"\\\\");let r=JSON.parse(e);t.push({name:r.name,type:r.type,fsType:r.fsType,mount:r.mountpoint,size:parseInt(r.size),physical:"disk"===r.type?"0"===r.rota?"SSD":"HDD":"rom"===r.type?"CD/DVD":"",uuid:r.uuid,label:r.label,model:(r.model||"").trim(),serial:r.serial,removable:"1"===r.rm,protocol:r.tran,group:r.group||""})}catch(e){n.noop()}})),t=n.unique(t),t=n.sortByKey(t,["type","name"]),t}function w(e){let t=e;try{e.forEach((e=>{if(e.type.startsWith("raid")){const r=function(e){const t=n.getValue(e,"md_level","="),r=n.getValue(e,"md_name","="),i=n.getValue(e,"md_uuid","="),o=[];return e.forEach((e=>{e.toLowerCase().startsWith("md_device_dev")&&e.toLowerCase().indexOf("/dev/")>0&&o.push(e.split("/dev/")[1])})),{raid:t,label:r,uuid:i,members:o}}(s(`mdadm --export --detail /dev/${e.name}`).toString().split("\n"));e.label=r.label,e.uuid=r.uuid,r.members&&r.members.length&&r.raid===e.type&&(t=t.map((t=>("linux_raid_member"===t.fsType&&r.members.indexOf(t.name)>=0&&(t.group=e.name),t))))}}))}catch(e){n.noop()}return t}function _(e,t){const r=function(e){const t=[];return e.forEach((e=>{const r=e.split("\r\n"),i=n.getValue(r,"DeviceID",":");let o=e.split("@{DeviceID=");o.length>1&&(o=o.slice(1),o.forEach((e=>{t.push({name:e.split(";")[0].toUpperCase(),device:i})})))})),t}(t);return e.map((e=>{const t=r.filter((t=>t.name===e.name.toUpperCase()));return t.length>0&&(e.device=t[0].device),e})),e}function S(e){return e.toString().replace(/NAME=/g,'{"name":').replace(/FSTYPE=/g,',"fsType":').replace(/TYPE=/g,',"type":').replace(/SIZE=/g,',"size":').replace(/MOUNTPOINT=/g,',"mountpoint":').replace(/UUID=/g,',"uuid":').replace(/ROTA=/g,',"rota":').replace(/RO=/g,',"ro":').replace(/RM=/g,',"rm":').replace(/TRAN=/g,',"tran":').replace(/SERIAL=/g,',"serial":').replace(/LABEL=/g,',"label":').replace(/MODEL=/g,',"model":').replace(/OWNER=/g,',"owner":').replace(/GROUP=/g,',"group":').replace(/\n/g,"}\n")}function x(e,t){let r={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0};return g&&g.ms?(r.rx=e,r.wx=t,r.tx=r.rx+r.wx,r.ms=Date.now()-g.ms,r.rx_sec=(r.rx-g.bytes_read)/(r.ms/1e3),r.wx_sec=(r.wx-g.bytes_write)/(r.ms/1e3),r.tx_sec=r.rx_sec+r.wx_sec,g.rx_sec=r.rx_sec,g.wx_sec=r.wx_sec,g.tx_sec=r.tx_sec,g.bytes_read=r.rx,g.bytes_write=r.wx,g.bytes_overall=r.rx+r.wx,g.ms=Date.now(),g.last_ms=r.ms):(r.rx=e,r.wx=t,r.tx=r.rx+r.wx,g.rx_sec=null,g.wx_sec=null,g.tx_sec=null,g.bytes_read=r.rx,g.bytes_write=r.wx,g.bytes_overall=r.rx+r.wx,g.ms=Date.now(),g.last_ms=0),r}function O(e,t,r,n,i){let o={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0};return y&&y.ms?(o.rIO=e,o.wIO=t,o.tIO=e+t,o.ms=Date.now()-y.ms,o.rIO_sec=(o.rIO-y.rIO)/(o.ms/1e3),o.wIO_sec=(o.wIO-y.wIO)/(o.ms/1e3),o.tIO_sec=o.rIO_sec+o.wIO_sec,o.rWaitTime=r,o.wWaitTime=n,o.tWaitTime=i,o.rWaitPercent=100*(o.rWaitTime-y.rWaitTime)/o.ms,o.wWaitPercent=100*(o.wWaitTime-y.wWaitTime)/o.ms,o.tWaitPercent=100*(o.tWaitTime-y.tWaitTime)/o.ms,y.rIO=e,y.wIO=t,y.rIO_sec=o.rIO_sec,y.wIO_sec=o.wIO_sec,y.tIO_sec=o.tIO_sec,y.rWaitTime=r,y.wWaitTime=n,y.tWaitTime=i,y.rWaitPercent=o.rWaitPercent,y.wWaitPercent=o.wWaitPercent,y.tWaitPercent=o.tWaitPercent,y.last_ms=o.ms,y.ms=Date.now()):(o.rIO=e,o.wIO=t,o.tIO=e+t,o.rWaitTime=r,o.wWaitTime=n,o.tWaitTime=i,y.rIO=e,y.wIO=t,y.rIO_sec=null,y.wIO_sec=null,y.tIO_sec=null,y.rWaitTime=r,y.wWaitTime=n,y.tWaitTime=i,y.rWaitPercent=null,y.wWaitPercent=null,y.tWaitPercent=null,y.last_ms=0,y.ms=Date.now()),o}r.fsSize=function(e){let r=[],i=[];function a(e){let t=e.toString().split("\n");if(e.toString().toLowerCase().indexOf("filesystem")){let e=0;for(let r=0;r<t.length;r++)t[r]&&t[r].toLowerCase().startsWith("filesystem")&&(e=r);for(let r=0;r<e;r++)t.shift()}return t}function l(e){let t=[];return e.forEach((function(e){if(""!==e&&(e=e.replace(/ +/g," ").split(" "))&&(e[0].startsWith("/")||e[6]&&"/"===e[6]||e[0].indexOf("/")>0||1===e[0].indexOf(":")||!u&&!function(e){let t=!1;return["rootfs","unionfs","squashfs","cramfs","initrd","initramfs","devtmpfs","tmpfs","udev","devfs","specfs","type","appimaged"].forEach((r=>{e.toLowerCase().indexOf(r)>=0&&(t=!0)})),t}(e[1]))){const n=e[0],o=c||f||d||h?e[1]:function(e){if(!e.startsWith("/"))return"NFS";const t=e.split("/"),n=t[t.length-1],i=r.filter((e=>e.indexOf(n)>=0));return 1===i.length&&i[0].indexOf("APFS")>=0?"APFS":"HFS"}(e[0]),s=1024*parseInt(c||f||d||h?e[2]:e[1]),a=1024*parseInt(c||f||d||h?e[3]:e[2]),l=1024*parseInt(c||f||d||h?e[4]:e[3]),u=parseFloat((a/(a+l)*100).toFixed(2));let p=i&&Object.keys(i).length>0?i[n]||!1:null;e.splice(0,c||f||d||h?6:5);const m=e.join(" ");t.find((e=>e.fs===n&&e.type===o))||t.push({fs:n,type:o,size:s,used:a,available:l,use:u,mount:m,rw:p})}})),t}return new Promise((g=>{t.nextTick((()=>{let t=[];if(c||f||d||h||u){let p="";if(r=[],i={},u){p="df -kP";try{r=s("diskutil list").toString().split("\n").filter((e=>!e.startsWith("/")&&e.indexOf(":")>0)),s("mount").toString().split("\n").filter((e=>e.startsWith("/"))).forEach((e=>{i[e.split(" ")[0]]=-1===e.toLowerCase().indexOf("read-only")}))}catch(e){n.noop()}}c&&(p="df -lkPTx squashfs",s("cat /proc/mounts 2>/dev/null").toString().split("\n").filter((e=>e.startsWith("/"))).forEach((e=>{i[e.split(" ")[0]]=e.toLowerCase().indexOf("rw")>=0}))),(f||d||h)&&(p="df -lkPT",s("mount").toString().split("\n").forEach((e=>{i[e.split(" ")[0]]=-1===e.toLowerCase().indexOf("read-only")}))),o(p,{maxBuffer:1048576},(function(r,n){let i=a(n);t=l(i),!r||t.length?(e&&e(t),g(t)):o("df -kPT",{maxBuffer:1048576},(function(r,n){if(!r){let e=a(n);t=l(e)}e&&e(t),g(t)}))}))}if(m&&(e&&e(t),g(t)),p)try{n.powerShell("Get-CimInstance Win32_logicaldisk | select Access,Caption,FileSystem,FreeSpace,Size | fl").then(((r,i)=>{if(!i){r.toString().split(/\n\s*\n/).forEach((function(e){let r=e.split("\r\n");const i=n.toInt(n.getValue(r,"size",":")),o=n.toInt(n.getValue(r,"freespace",":")),s=n.getValue(r,"caption",":"),a=n.getValue(r,"access",":"),l=a?1!==n.toInt(a):null;i&&t.push({fs:s,type:n.getValue(r,"filesystem",":"),size:i,used:i-o,available:o,use:parseFloat((100*(i-o)/i).toFixed(2)),mount:s,rw:l})}))}e&&e(t),g(t)}))}catch(r){e&&e(t),g(t)}}))}))},r.fsOpenFiles=function(e){return new Promise((r=>{t.nextTick((()=>{const t={max:null,allocated:null,available:null};if(f||d||h||u){o("sysctl -i kern.maxfiles kern.num_files kern.open_files",{maxBuffer:1048576},(function(i,o){if(!i){let e=o.toString().split("\n");t.max=parseInt(n.getValue(e,"kern.maxfiles",":"),10),t.allocated=parseInt(n.getValue(e,"kern.num_files",":"),10)||parseInt(n.getValue(e,"kern.open_files",":"),10),t.available=t.max-t.allocated}e&&e(t),r(t)}))}c&&i.readFile("/proc/sys/fs/file-nr",(function(n,o){if(n)i.readFile("/proc/sys/fs/file-max",(function(n,i){if(!n){let e=i.toString().split("\n");e[0]&&(t.max=parseInt(e[0],10))}e&&e(t),r(t)}));else{let n=o.toString().split("\n");if(n[0]){const e=n[0].replace(/\s+/g," ").split(" ");3===e.length&&(t.allocated=parseInt(e[0],10),t.available=parseInt(e[1],10),t.max=parseInt(e[2],10),t.available||(t.available=t.max-t.allocated))}e&&e(t),r(t)}})),m&&(e&&e(null),r(null)),p&&(e&&e(null),r(null))}))}))},r.blockDevices=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(c&&o("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,TRAN,SERIAL,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1048576},(function(i,s){if(i)o("lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER 2>/dev/null",{maxBuffer:1048576},(function(n,i){if(!n){let e=S(i).split("\n");t=b(e),t=w(t)}e&&e(t),r(t)}));else{let i=S(s).split("\n");t=b(i),t=w(t),t=function(e){let t=e;try{const r=function(e){const t=[];return e.forEach((e=>{e.type.startsWith("disk")&&t.push(e.name)})),t}(e);t=t.map((e=>((e.type.startsWith("part")||e.type.startsWith("disk"))&&r.forEach((t=>{e.name.startsWith(t)&&(e.device="/dev/"+t)})),e)))}catch(e){n.noop()}return t}(t),e&&e(t),r(t)}})),u&&o("diskutil info -all",{maxBuffer:1048576},(function(i,o){if(!i){let e=o.toString().split("\n");t=v(e),t=function(e){let t=e;try{const r=function(e){const t=[];return e.forEach((e=>{if(e.type.startsWith("disk")&&t.push({name:e.name,model:e.model,device:e.name}),e.type.startsWith("virtual")){let r="";t.forEach((t=>{t.model===e.model&&(r=t.device)})),r&&t.push({name:e.name,model:e.model,device:r})}})),t}(e);t=t.map((e=>((e.type.startsWith("part")||e.type.startsWith("disk")||e.type.startsWith("virtual"))&&r.forEach((t=>{e.name.startsWith(t.name)&&(e.device=t.device)})),e)))}catch(e){n.noop()}return t}(t)}e&&e(t),r(t)})),m&&(e&&e(t),r(t)),p){let i=["Unknown","NoRoot","Removable","Local","Network","CD/DVD","RAM"];try{const o=[];o.push(n.powerShell("Get-CimInstance -ClassName Win32_LogicalDisk | select Caption,DriveType,Name,FileSystem,Size,VolumeSerialNumber,VolumeName | fl")),o.push(n.powerShell("Get-WmiObject -Class Win32_diskdrive | Select-Object -Property PNPDeviceId,DeviceID, Model, Size, @{L='Partitions'; E={$_.GetRelated('Win32_DiskPartition').GetRelated('Win32_LogicalDisk') | Select-Object -Property DeviceID, VolumeName, Size, FreeSpace}} | fl")),n.promiseAll(o).then((o=>{let s=o.results[0].toString().split(/\n\s*\n/),a=o.results[1].toString().split(/\n\s*\n/);s.forEach((function(e){let r=e.split("\r\n"),o=n.getValue(r,"drivetype",":");o&&t.push({name:n.getValue(r,"name",":"),identifier:n.getValue(r,"caption",":"),type:"disk",fsType:n.getValue(r,"filesystem",":").toLowerCase(),mount:n.getValue(r,"caption",":"),size:n.getValue(r,"size",":"),physical:o>=0&&o<=6?i[o]:i[0],uuid:n.getValue(r,"volumeserialnumber",":"),label:n.getValue(r,"volumename",":"),model:"",serial:n.getValue(r,"volumeserialnumber",":"),removable:"2"===o,protocol:"",group:"",device:""})})),t=_(t,a),e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}}(f||d||h)&&(e&&e(null),r(null))}))}))},r.fsStats=function(e){return new Promise((r=>{t.nextTick((()=>{if(p||f||d||h||m)return r(null);let t={rx:0,wx:0,tx:0,rx_sec:null,wx_sec:null,tx_sec:null,ms:0},n=0,i=0;g&&!g.ms||g&&g.ms&&Date.now()-g.ms>=500?(c&&o("lsblk -r 2>/dev/null | grep /",{maxBuffer:1048576},(function(s,a){if(s)e&&e(t),r(t);else{let s=a.toString().split("\n"),l=[];s.forEach((function(e){""!==e&&(e=e.trim().split(" "),-1===l.indexOf(e[0])&&l.push(e[0]))}));let c=l.join("|");o('cat /proc/diskstats | egrep "'+c+'"',{maxBuffer:1048576},(function(o,s){if(!o){s.toString().split("\n").forEach((function(e){""!==(e=e.trim())&&(e=e.replace(/ +/g," ").split(" "),n+=512*parseInt(e[5]),i+=512*parseInt(e[9]))})),t=x(n,i)}e&&e(t),r(t)}))}})),u&&o('ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,\n"',{maxBuffer:1048576},(function(o,s){if(!o){s.toString().split("\n").forEach((function(e){""!==(e=e.trim())&&(e=e.split(","),n+=parseInt(e[2]),i+=parseInt(e[9]))})),t=x(n,i)}e&&e(t),r(t)}))):(t.ms=g.last_ms,t.rx=g.bytes_read,t.wx=g.bytes_write,t.tx=g.bytes_read+g.bytes_write,t.rx_sec=g.rx_sec,t.wx_sec=g.wx_sec,t.tx_sec=g.tx_sec,e&&e(t),r(t))}))}))},r.disksIO=function(e){return new Promise((r=>{t.nextTick((()=>{if(p)return r(null);if(m)return r(null);let t={rIO:0,wIO:0,tIO:0,rIO_sec:null,wIO_sec:null,tIO_sec:null,rWaitTime:0,wWaitTime:0,tWaitTime:0,rWaitPercent:null,wWaitPercent:null,tWaitPercent:null,ms:0},n=0,i=0,s=0,a=0,l=0;if(y&&!y.ms||y&&y.ms&&Date.now()-y.ms>=500){if(c||f||d||h){o('for mount in `lsblk 2>/dev/null | grep " disk " | sed "s/[│└─├]//g" | awk \'{$1=$1};1\' | cut -d " " -f 1 | sort -u`; do cat /sys/block/$mount/stat | sed -r "s/ +/;/g" | sed -r "s/^;//"; done',{maxBuffer:1048576},(function(o,c){if(o)e&&e(t),r(t);else{c.split("\n").forEach((function(e){if(!e)return;let t=e.split(";");n+=parseInt(t[0]),i+=parseInt(t[4]),s+=parseInt(t[3]),a+=parseInt(t[7]),l+=parseInt(t[10])})),t=O(n,i,s,a,l),e&&e(t),r(t)}}))}u&&o('ioreg -c IOBlockStorageDriver -k Statistics -r -w0 | sed -n "/IOBlockStorageDriver/,/Statistics/p" | grep "Statistics" | tr -cd "01234567890,\n"',{maxBuffer:1048576},(function(o,c){if(!o){c.toString().split("\n").forEach((function(e){""!==(e=e.trim())&&(e=e.split(","),n+=parseInt(e[10]),i+=parseInt(e[0]))})),t=O(n,i,s,a,l)}e&&e(t),r(t)}))}else t.rIO=y.rIO,t.wIO=y.wIO,t.tIO=y.rIO+y.wIO,t.ms=y.last_ms,t.rIO_sec=y.rIO_sec,t.wIO_sec=y.wIO_sec,t.tIO_sec=y.tIO_sec,t.rWaitTime=y.rWaitTime,t.wWaitTime=y.wWaitTime,t.tWaitTime=y.tWaitTime,t.rWaitPercent=y.rWaitPercent,t.wWaitPercent=y.wWaitPercent,t.tWaitPercent=y.tWaitPercent,e&&e(t),r(t)}))}))},r.diskLayout=function(e){function r(e){const t=[{pattern:"WESTERN.*",manufacturer:"Western Digital"},{pattern:"^WDC.*",manufacturer:"Western Digital"},{pattern:"WD.*",manufacturer:"Western Digital"},{pattern:"TOSHIBA.*",manufacturer:"Toshiba"},{pattern:"HITACHI.*",manufacturer:"Hitachi"},{pattern:"^IC.*",manufacturer:"Hitachi"},{pattern:"^HTS.*",manufacturer:"Hitachi"},{pattern:"SANDISK.*",manufacturer:"SanDisk"},{pattern:"KINGSTON.*",manufacturer:"Kingston Technology"},{pattern:"^SONY.*",manufacturer:"Sony"},{pattern:"TRANSCEND.*",manufacturer:"Transcend"},{pattern:"SAMSUNG.*",manufacturer:"Samsung"},{pattern:"^ST(?!I\\ ).*",manufacturer:"Seagate"},{pattern:"^STI\\ .*",manufacturer:"SimpleTech"},{pattern:"^D...-.*",manufacturer:"IBM"},{pattern:"^IBM.*",manufacturer:"IBM"},{pattern:"^FUJITSU.*",manufacturer:"Fujitsu"},{pattern:"^MP.*",manufacturer:"Fujitsu"},{pattern:"^MK.*",manufacturer:"Toshiba"},{pattern:"MAXTO.*",manufacturer:"Maxtor"},{pattern:"PIONEER.*",manufacturer:"Pioneer"},{pattern:"PHILIPS.*",manufacturer:"Philips"},{pattern:"QUANTUM.*",manufacturer:"Quantum Technology"},{pattern:"FIREBALL.*",manufacturer:"Quantum Technology"},{pattern:"^VBOX.*",manufacturer:"VirtualBox"},{pattern:"CORSAIR.*",manufacturer:"Corsair Components"},{pattern:"CRUCIAL.*",manufacturer:"Crucial"},{pattern:"ECM.*",manufacturer:"ECM"},{pattern:"INTEL.*",manufacturer:"INTEL"},{pattern:"EVO.*",manufacturer:"Samsung"},{pattern:"APPLE.*",manufacturer:"Apple"}];let r="";return e&&(e=e.toUpperCase(),t.forEach((t=>{RegExp(t.pattern).test(e)&&(r=t.manufacturer)}))),r}return new Promise((i=>{t.nextTick((()=>{const t=t=>{for(let e=0;e<t.length;e++)delete t[e].BSDName;e&&e(t),i(t)};let l=[],g="";if(c){let e="";o("export LC_ALL=C; lsblk -ablJO 2>/dev/null; unset LC_ALL",{maxBuffer:1048576},(function(i,a){if(!i)try{const t=a.toString().trim();let i=[];try{const e=JSON.parse(t);e&&{}.hasOwnProperty.call(e,"blockdevices")&&(i=e.blockdevices.filter((e=>"disk"===e.type&&e.size>0&&(null!==e.model||null===e.mountpoint&&null===e.label&&null===e.fstype&&null===e.parttype&&e.path&&0!==e.path.indexOf("/ram")&&0!==e.path.indexOf("/loop")&&e["disc-max"]&&0!==e["disc-max"]))))}catch(e){let t=S(s("export LC_ALL=C; lsblk -bPo NAME,TYPE,SIZE,FSTYPE,MOUNTPOINT,UUID,ROTA,RO,RM,LABEL,MODEL,OWNER,GROUP 2>/dev/null; unset LC_ALL").toString()).split("\n");i=b(t).filter((e=>"disk"===e.type&&e.size>0&&(null!==e.model&&""!==e.model||""===e.mount&&""===e.label&&""===e.fsType)))}i.forEach((t=>{let i="";const o="/dev/"+t.name,a=t.name;try{i=s("cat /sys/block/"+a+"/queue/rotational 2>/dev/null").toString().split("\n")[0]}catch(e){n.noop()}let c=t.tran?t.tran.toUpperCase().trim():"";"NVME"===c&&(i="2",c="PCIe"),l.push({device:o,type:"0"===i?"SSD":"1"===i?"HD":"2"===i?"NVMe":t.model&&t.model.indexOf("SSD")>-1?"SSD":t.model&&t.model.indexOf("NVM")>-1?"NVMe":"HD",name:t.model||"",vendor:r(t.model)||(t.vendor?t.vendor.trim():""),size:t.size||0,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:t.rev?t.rev.trim():"",serialNum:t.serial?t.serial.trim():"",interfaceType:c,smartStatus:"unknown",temperature:null,BSDName:o}),g+=`printf "\n${o}|"; smartctl -H ${o} | grep overall;`,e+=`${e?'printf ",";':""}smartctl -a -j ${o};`}))}catch(e){n.noop()}e?o(e,{maxBuffer:1048576},(function(e,r){try{JSON.parse(`[${r}]`).forEach((e=>{const t=e.smartctl.argv[e.smartctl.argv.length-1];for(let r=0;r<l.length;r++)l[r].BSDName===t&&(l[r].smartStatus=e.smart_status.passed?"Ok":!1===e.smart_status.passed?"Predicted Failure":"unknown",e.temperature&&e.temperature.current&&(l[r].temperature=e.temperature.current),l[r].smartData=e)})),t(l)}catch(e){g?(g+='printf "\n"',o(g,{maxBuffer:1048576},(function(e,r){r.toString().split("\n").forEach((e=>{if(e){let t=e.split("|");if(2===t.length){let e=t[0];t[1]=t[1].trim();let r=t[1].split(":");if(2===r.length){r[1]=r[1].trim();let t=r[1].toLowerCase();for(let r=0;r<l.length;r++)l[r].BSDName===e&&(l[r].smartStatus="passed"===t?"Ok":"failed!"===t?"Predicted Failure":"unknown")}}}})),t(l)}))):t(l)}})):t(l)}))}if((f||d||h)&&(e&&e(l),i(l)),m&&(e&&e(l),i(l)),u&&o("system_profiler SPSerialATADataType SPNVMeDataType SPUSBDataType",{maxBuffer:1048576},(function(t,s){if(!t){let t=s.toString().split("\n"),a=[],c=[],u=[],p="SATA";t.forEach((e=>{"NVMExpress:"===e?p="NVMe":"USB:"===e?p="USB":"SATA/SATA Express:"===e?p="SATA":"SATA"===p?a.push(e):"NVMe"===p?c.push(e):"USB"===p&&u.push(e)}));try{let e=a.join("\n").split(" Physical Interconnect: ");e.shift(),e.forEach((function(e){let t=(e="InterfaceType: "+e).split("\n");const i=n.getValue(t,"Medium Type",":",!0).trim(),o=n.getValue(t,"capacity",":",!0).trim(),s=n.getValue(t,"BSD Name",":",!0).trim();if(o){let e=0;if(o.indexOf("(")>=0&&(e=parseInt(o.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),e||(e=parseInt(o)),e){const o=n.getValue(t,"S.M.A.R.T. status",":",!0).trim().toLowerCase();l.push({device:s,type:i.startsWith("Solid")?"SSD":"HD",name:n.getValue(t,"Model",":",!0).trim(),vendor:r(n.getValue(t,"Model",":",!0).trim())||n.getValue(t,"Manufacturer",":",!0),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",!0).trim(),serialNum:n.getValue(t,"Serial Number",":",!0).trim(),interfaceType:n.getValue(t,"InterfaceType",":",!0).trim(),smartStatus:"verified"===o?"OK":o||"unknown",temperature:null,BSDName:s}),g=g+'printf "\n'+s+'|"; diskutil info /dev/'+s+" | grep SMART;"}}}))}catch(e){n.noop()}try{let e=c.join("\n").split("\n\n          Capacity:");e.shift(),e.forEach((function(e){let t=(e="!Capacity: "+e).split("\n");const i=n.getValue(t,"link width",":",!0).trim(),o=n.getValue(t,"!capacity",":",!0).trim(),s=n.getValue(t,"BSD Name",":",!0).trim();if(o){let e=0;if(o.indexOf("(")>=0&&(e=parseInt(o.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),e||(e=parseInt(o)),e){const o=n.getValue(t,"S.M.A.R.T. status",":",!0).trim().toLowerCase();l.push({device:s,type:"NVMe",name:n.getValue(t,"Model",":",!0).trim(),vendor:r(n.getValue(t,"Model",":",!0).trim()),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",!0).trim(),serialNum:n.getValue(t,"Serial Number",":",!0).trim(),interfaceType:("PCIe "+i).trim(),smartStatus:"verified"===o?"OK":o||"unknown",temperature:null,BSDName:s}),g=g+'printf "\n'+s+'|"; diskutil info /dev/'+s+" | grep SMART;"}}}))}catch(e){n.noop()}try{let e=u.join("\n").replaceAll("Media:\n ","Model:").split("\n\n          Product ID:");e.shift(),e.forEach((function(e){let t=e.split("\n");const i=n.getValue(t,"Capacity",":",!0).trim(),o=n.getValue(t,"BSD Name",":",!0).trim();if(i){let e=0;if(i.indexOf("(")>=0&&(e=parseInt(i.match(/\(([^)]+)\)/)[1].replace(/\./g,"").replace(/,/g,"").replace(/\s/g,""))),e||(e=parseInt(i)),e){const i=n.getValue(t,"S.M.A.R.T. status",":",!0).trim().toLowerCase();l.push({device:o,type:"USB",name:n.getValue(t,"Model",":",!0).trim().replaceAll(":",""),vendor:r(n.getValue(t,"Model",":",!0).trim()),size:e,bytesPerSector:null,totalCylinders:null,totalHeads:null,totalSectors:null,totalTracks:null,tracksPerCylinder:null,sectorsPerTrack:null,firmwareRevision:n.getValue(t,"Revision",":",!0).trim(),serialNum:n.getValue(t,"Serial Number",":",!0).trim(),interfaceType:"USB",smartStatus:"verified"===i?"OK":i||"unknown",temperature:null,BSDName:o}),g=g+'printf "\n'+o+'|"; diskutil info /dev/'+o+" | grep SMART;"}}}))}catch(e){n.noop()}if(g)g+='printf "\n"',o(g,{maxBuffer:1048576},(function(t,r){r.toString().split("\n").forEach((e=>{if(e){let t=e.split("|");if(2===t.length){let e=t[0];t[1]=t[1].trim();let r=t[1].split(":");if(2===r.length){r[1]=r[1].trim();let t=r[1].toLowerCase();for(let r=0;r<l.length;r++)l[r].BSDName===e&&(l[r].smartStatus="not supported"===t?"not supported":"verified"===t?"Ok":"failing"===t?"Predicted Failure":"unknown")}}}}));for(let e=0;e<l.length;e++)delete l[e].BSDName;e&&e(l),i(l)}));else{for(let e=0;e<l.length;e++)delete l[e].BSDName;e&&e(l),i(l)}}})),p)try{const t=[];if(t.push(n.powerShell("Get-CimInstance Win32_DiskDrive | select Caption,Size,Status,PNPDeviceId,DeviceId,BytesPerSector,TotalCylinders,TotalHeads,TotalSectors,TotalTracks,TracksPerCylinder,SectorsPerTrack,FirmwareRevision,SerialNumber,InterfaceType | fl")),t.push(n.powerShell("Get-PhysicalDisk | select BusType,MediaType,FriendlyName,Model,SerialNumber,Size | fl")),n.smartMonToolsInstalled())try{const e=JSON.parse(s("smartctl --scan -j"));e&&e.devices&&e.devices.length>0&&e.devices.forEach((e=>{t.push(a(`smartctl -j -a ${e.name}`,n.execOptsWin))}))}catch(e){n.noop()}n.promiseAll(t).then((t=>{let o=t.results[0].toString().split(/\n\s*\n/);o.forEach((function(e){let t=e.split("\r\n");const i=n.getValue(t,"Size",":").trim(),o=n.getValue(t,"Status",":").trim().toLowerCase();i&&l.push({device:n.getValue(t,"DeviceId",":"),type:e.indexOf("SSD")>-1?"SSD":"HD",name:n.getValue(t,"Caption",":"),vendor:r(n.getValue(t,"Caption",":",!0).trim()),size:parseInt(i),bytesPerSector:parseInt(n.getValue(t,"BytesPerSector",":")),totalCylinders:parseInt(n.getValue(t,"TotalCylinders",":")),totalHeads:parseInt(n.getValue(t,"TotalHeads",":")),totalSectors:parseInt(n.getValue(t,"TotalSectors",":")),totalTracks:parseInt(n.getValue(t,"TotalTracks",":")),tracksPerCylinder:parseInt(n.getValue(t,"TracksPerCylinder",":")),sectorsPerTrack:parseInt(n.getValue(t,"SectorsPerTrack",":")),firmwareRevision:n.getValue(t,"FirmwareRevision",":").trim(),serialNum:n.getValue(t,"SerialNumber",":").trim(),interfaceType:n.getValue(t,"InterfaceType",":").trim(),smartStatus:"ok"===o?"Ok":"degraded"===o?"Degraded":"pred fail"===o?"Predicted Failure":"Unknown",temperature:null})})),o=t.results[1].split(/\n\s*\n/),o.forEach((function(e){let t=e.split("\r\n");const r=n.getValue(t,"SerialNumber",":").trim(),i=n.getValue(t,"FriendlyName",":").trim().replace("Msft ","Microsoft"),o=n.getValue(t,"Size",":").trim(),s=n.getValue(t,"Model",":").trim(),a=n.getValue(t,"BusType",":").trim();let c=n.getValue(t,"MediaType",":").trim();if("3"!==c&&"HDD"!==c||(c="HD"),"4"===c&&(c="SSD"),"5"===c&&(c="SCM"),"Unspecified"===c&&(s.toLowerCase().indexOf("virtual")>-1||s.toLowerCase().indexOf("vbox")>-1)&&(c="Virtual"),o){let e=n.findObjectByKey(l,"serialNum",r);-1!==e&&""!==r||(e=n.findObjectByKey(l,"name",i)),-1!=e&&(l[e].type=c,l[e].interfaceType=a)}})),t.results.shift(),t.results.shift(),t.results.length&&t.results.forEach((e=>{try{const t=JSON.parse(e);if(t.serial_number){const e=t.serial_number;let r=n.findObjectByKey(l,"serialNum",e);-1!=r&&(l[r].smartStatus=t.smart_status&&t.smart_status.passed?"Ok":t.smart_status&&!1===t.smart_status.passed?"Predicted Failure":"unknown",t.temperature&&t.temperature.current&&(l[r].temperature=t.temperature.current),l[r].smartData=t)}}catch(e){n.noop()}})),e&&e(l),i(l)}))}catch(t){e&&e(l),i(l)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63}],266:[function(e,t,r){(function(t){(function(){"use strict";const n=e("fs"),i=e("child_process").exec,o=e("child_process").execSync,s=e("./util");let a=t.platform,l="";const c="linux"===a||"android"===a,u="darwin"===a,p="win32"===a,f="freebsd"===a,d="openbsd"===a,h="netbsd"===a,m="sunos"===a;let g=0,y=0,v=0,b=0;const w={"-2":"UNINITIALIZED","-1":"OTHER",0:"HD15",1:"SVIDEO",2:"Composite video",3:"Component video",4:"DVI",5:"HDMI",6:"LVDS",8:"D_JPN",9:"SDI",10:"DP",11:"DP embedded",12:"UDI",13:"UDI embedded",14:"SDTVDONGLE",15:"MIRACAST",2147483648:"INTERNAL"};function _(e){const t=[{pattern:"^LG.+",manufacturer:"LG"},{pattern:"^BENQ.+",manufacturer:"BenQ"},{pattern:"^ASUS.+",manufacturer:"Asus"},{pattern:"^DELL.+",manufacturer:"Dell"},{pattern:"^SAMSUNG.+",manufacturer:"Samsung"},{pattern:"^VIEWSON.+",manufacturer:"ViewSonic"},{pattern:"^SONY.+",manufacturer:"Sony"},{pattern:"^ACER.+",manufacturer:"Acer"},{pattern:"^AOC.+",manufacturer:"AOC Monitors"},{pattern:"^HP.+",manufacturer:"HP"},{pattern:"^EIZO.?",manufacturer:"Eizo"},{pattern:"^PHILIPS.?",manufacturer:"Philips"},{pattern:"^IIYAMA.?",manufacturer:"Iiyama"},{pattern:"^SHARP.?",manufacturer:"Sharp"},{pattern:"^NEC.?",manufacturer:"NEC"},{pattern:"^LENOVO.?",manufacturer:"Lenovo"},{pattern:"COMPAQ.?",manufacturer:"Compaq"},{pattern:"APPLE.?",manufacturer:"Apple"},{pattern:"INTEL.?",manufacturer:"Intel"},{pattern:"AMD.?",manufacturer:"AMD"},{pattern:"NVIDIA.?",manufacturer:"NVDIA"}];let r="";return e&&(e=e.toUpperCase(),t.forEach((t=>{RegExp(t.pattern).test(e)&&(r=t.manufacturer)}))),r}function S(e){return{610:"Apple","1e6d":"LG","10ac":"DELL","4dd9":"Sony","38a3":"NEC"}[e]||""}function x(e){let t="";return(e=(e||"").toLowerCase()).indexOf("apple")>=0?t="0x05ac":e.indexOf("nvidia")>=0?t="0x10de":e.indexOf("intel")>=0?t="0x8086":(e.indexOf("ati")>=0||e.indexOf("amd")>=0)&&(t="0x1002"),t}r.graphics=function(e){function r(e){const t=function(){if(l)return l;if(p)try{const e=s.WINDIR+"\\System32\\DriverStore\\FileRepository",t=n.readdirSync(e).filter((t=>n.readdirSync([e,t].join("/")).includes("nvidia-smi.exe"))).reduce(((t,r)=>{const i=n.statSync([e,t,"nvidia-smi.exe"].join("/")),o=n.statSync([e,r,"nvidia-smi.exe"].join("/"));return i.ctimeMs>o.ctimeMs?t:r}));t&&(l=[e,t,"nvidia-smi.exe"].join("/"))}catch(e){s.noop()}else c&&(l="nvidia-smi");return l}();if(e=e||s.execOptsWin,t){const r=t+" "+"--query-gpu=driver_version,pci.sub_device_id,name,pci.bus_id,fan.speed,memory.total,memory.used,memory.free,utilization.gpu,utilization.memory,temperature.gpu,temperature.memory,power.draw,power.limit,clocks.gr,clocks.mem --format=csv,noheader,nounits"+(c?"  2>/dev/null":"");try{return o(r,e).toString()}catch(e){s.noop()}}return""}function a(){function e(e){return[null,void 0].includes(e)?e:parseFloat(e)}const t=r();if(!t)return[];let n=t.split("\n").filter(Boolean).map((t=>{const r=t.split(", ").map((e=>e.includes("N/A")?void 0:e));return 16===r.length?{driverVersion:r[0],subDeviceId:r[1],name:r[2],pciBus:r[3],fanSpeed:e(r[4]),memoryTotal:e(r[5]),memoryUsed:e(r[6]),memoryFree:e(r[7]),utilizationGpu:e(r[8]),utilizationMemory:e(r[9]),temperatureGpu:e(r[10]),temperatureMemory:e(r[11]),powerDraw:e(r[12]),powerLimit:e(r[13]),clockCore:e(r[14]),clockMemory:e(r[15])}:{}}));return n=n.filter((e=>"pciBus"in e)),n}function O(e,t){return t.driverVersion&&(e.driverVersion=t.driverVersion),t.subDeviceId&&(e.subDeviceId=t.subDeviceId),t.name&&(e.name=t.name),t.pciBus&&(e.pciBus=t.pciBus),t.fanSpeed&&(e.fanSpeed=t.fanSpeed),t.memoryTotal&&(e.memoryTotal=t.memoryTotal,e.vram=t.memoryTotal,e.vramDynamic=!1),t.memoryUsed&&(e.memoryUsed=t.memoryUsed),t.memoryFree&&(e.memoryFree=t.memoryFree),t.utilizationGpu&&(e.utilizationGpu=t.utilizationGpu),t.utilizationMemory&&(e.utilizationMemory=t.utilizationMemory),t.temperatureGpu&&(e.temperatureGpu=t.temperatureGpu),t.temperatureMemory&&(e.temperatureMemory=t.temperatureMemory),t.powerDraw&&(e.powerDraw=t.powerDraw),t.powerLimit&&(e.powerLimit=t.powerLimit),t.clockCore&&(e.clockCore=t.clockCore),t.clockMemory&&(e.clockMemory=t.clockMemory),e}function E(e){let t={vendor:"",model:"",deviceName:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null},r=108;if("000000"===e.substr(r,6)&&(r+=36),"000000"===e.substr(r,6)&&(r+=36),"000000"===e.substr(r,6)&&(r+=36),"000000"===e.substr(r,6)&&(r+=36),t.resolutionX=parseInt("0x0"+e.substr(r+8,1)+e.substr(r+4,2)),t.resolutionY=parseInt("0x0"+e.substr(r+14,1)+e.substr(r+10,2)),t.sizeX=parseInt("0x0"+e.substr(r+28,1)+e.substr(r+24,2)),t.sizeY=parseInt("0x0"+e.substr(r+29,1)+e.substr(r+26,2)),r=e.indexOf("000000fc00"),r>=0){let n=e.substr(r+10,26);-1!==n.indexOf("0a")&&(n=n.substr(0,n.indexOf("0a")));try{n.length>2&&(t.model=n.match(/.{1,2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))}catch(e){s.noop()}}else t.model="";return t}return new Promise((r=>{t.nextTick((()=>{let t={controllers:[],displays:[]};if(u){i("system_profiler -xml -detailLevel full SPDisplaysDataType",(function(n,i){if(!n){try{const e=i.toString();t=function(e){const t={controllers:[],displays:[]};try{return e.forEach((function(e){const r=(e.sppci_bus||"").indexOf("builtin")>-1?"Built-In":(e.sppci_bus||"").indexOf("pcie")>-1?"PCIe":"",n=(parseInt(e.spdisplays_vram||"",10)||0)*((e.spdisplays_vram||"").indexOf("GB")>-1?1024:1),i=(parseInt(e.spdisplays_vram_shared||"",10)||0)*((e.spdisplays_vram_shared||"").indexOf("GB")>-1?1024:1);let o={spdisplays_mtlgpufamilymac1:"mac1",spdisplays_mtlgpufamilymac2:"mac2",spdisplays_mtlgpufamilyapple1:"apple1",spdisplays_mtlgpufamilyapple2:"apple2",spdisplays_mtlgpufamilyapple3:"apple3",spdisplays_mtlgpufamilyapple4:"apple4",spdisplays_mtlgpufamilyapple5:"apple5",spdisplays_mtlgpufamilyapple6:"apple6",spdisplays_mtlgpufamilyapple7:"apple7",spdisplays_metalfeaturesetfamily11:"family1_v1",spdisplays_metalfeaturesetfamily12:"family1_v2",spdisplays_metalfeaturesetfamily13:"family1_v3",spdisplays_metalfeaturesetfamily14:"family1_v4",spdisplays_metalfeaturesetfamily21:"family2_v1"}[e.spdisplays_metal||e.spdisplays_metalfamily||""]||"";t.controllers.push({vendor:_(e.spdisplays_vendor||"")||e.spdisplays_vendor||"",model:e.sppci_model||"",bus:r,vramDynamic:"Built-In"===r,vram:n||i||null,deviceId:e["spdisplays_device-id"]||"",vendorId:e["spdisplays_vendor-id"]||x((e.spdisplays_vendor||"")+(e.sppci_model||"")),external:"spdisplays_egpu"===e.sppci_device_type,cores:e.sppci_cores||null,metalVersion:o}),e.spdisplays_ndrvs&&e.spdisplays_ndrvs.length&&e.spdisplays_ndrvs.forEach((function(e){const r=e.spdisplays_connection_type||"",n=(e._spdisplays_resolution||"").split("@"),i=n[0].split("x"),o=(e._spdisplays_pixels||"").split("x"),s=e.spdisplays_depth||"",a=e["_spdisplays_display-serial-number"]||e["_spdisplays_display-serial-number2"]||null;t.displays.push({vendor:S(e["_spdisplays_display-vendor-id"]||"")||_(e._name||""),vendorId:e["_spdisplays_display-vendor-id"]||"",model:e._name||"",productionYear:e["_spdisplays_display-year"]||null,serial:"0"!==a?a:null,displayId:e._spdisplays_displayID||null,main:!!e.spdisplays_main&&"spdisplays_yes"===e.spdisplays_main,builtin:(e.spdisplays_display_type||"").indexOf("built-in")>-1,connection:r.indexOf("_internal")>-1?"Internal":r.indexOf("_displayport")>-1?"Display Port":r.indexOf("_hdmi")>-1?"HDMI":null,sizeX:null,sizeY:null,pixelDepth:"CGSThirtyBitColor"===s?30:"CGSThirtytwoBitColor"===s?32:"CGSTwentyfourBitColor"===s?24:null,resolutionX:o.length>1?parseInt(o[0],10):null,resolutionY:o.length>1?parseInt(o[1],10):null,currentResX:i.length>1?parseInt(i[0],10):null,currentResY:i.length>1?parseInt(i[1],10):null,positionX:0,positionY:0,currentRefreshRate:n.length>1?parseInt(n[1],10):null})}))})),t}catch(e){return t}}(s.plistParser(e)[0]._items)}catch(e){s.noop()}const e=((i=o('defaults read /Library/Preferences/com.apple.windowserver.plist 2>/dev/null;defaults read /Library/Preferences/com.apple.windowserver.displays.plist 2>/dev/null; echo ""'))||"").toString(),r=s.plistReader(e);if(r.DisplayAnyUserSets&&r.DisplayAnyUserSets.Configs&&r.DisplayAnyUserSets.Configs[0]&&r.DisplayAnyUserSets.Configs[0].DisplayConfig){const e=r.DisplayAnyUserSets.Configs[0].DisplayConfig;let n=0;e.forEach((e=>{e.CurrentInfo&&"OriginX"in e.CurrentInfo&&t.displays&&t.displays[n]&&(t.displays[n].positionX=e.CurrentInfo.OriginX),e.CurrentInfo&&"OriginY"in e.CurrentInfo&&t.displays&&t.displays[n]&&(t.displays[n].positionY=e.CurrentInfo.OriginY),n++}))}if(r.DisplayAnyUserSets&&r.DisplayAnyUserSets.length>0&&r.DisplayAnyUserSets[0].length>0&&r.DisplayAnyUserSets[0][0].DisplayID){const e=r.DisplayAnyUserSets[0];let n=0;e.forEach((e=>{"OriginX"in e&&t.displays&&t.displays[n]&&(t.displays[n].positionX=e.OriginX),"OriginY"in e&&t.displays&&t.displays[n]&&(t.displays[n].positionY=e.OriginY),e.Mode&&"BitsPerPixel"in e.Mode&&t.displays&&t.displays[n]&&(t.displays[n].pixelDepth=e.Mode.BitsPerPixel),n++}))}}e&&e(t),r(t)}))}if(c)if(s.isRaspberry()&&s.isRaspbian()){i("fbset -s | grep 'mode \"'; vcgencmd get_mem gpu; tvservice -s; tvservice -n;",(function(n,i){let o=i.toString().split("\n");if(o.length>3&&o[0].indexOf('mode "')>=-1&&o[2].indexOf("0x12000a")>-1){const e=o[0].replace("mode","").replace(/"/g,"").trim().split("x");2===e.length&&t.displays.push({vendor:"",model:s.getValue(o,"device_name","="),main:!0,builtin:!1,connection:"HDMI",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:parseInt(e[0],10),resolutionY:parseInt(e[1],10),currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null})}o.length>1&&i.toString().indexOf("gpu=")>=-1&&t.controllers.push({vendor:"Broadcom",model:"VideoCore IV",bus:"",vram:s.getValue(o,"gpu","=").replace("M",""),vramDynamic:!0}),e&&e(t),r(t)}))}else{i("lspci -vvv  2>/dev/null",(function(n,l){if(!n){let e=l.toString().split("\n");t.controllers=function(e){let t=[],r={vendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:!1,pciID:""},n=!1,i=[];try{i=o('export LC_ALL=C; dmidecode -t 9 2>/dev/null; unset LC_ALL | grep "Bus Address: "').toString().split("\n");for(let e=0;e<i.length;e++)i[e]=i[e].replace("Bus Address:","").replace("0000:","").trim();i=i.filter((function(e){return null!=e&&e}))}catch(e){s.noop()}return e.forEach((e=>{if(""!==e.trim()){if(" "!==e[0]&&"\t"!==e[0]){let o=i.indexOf(e.split(" ")[0])>=0,s=e.toLowerCase().indexOf(" vga "),a=e.toLowerCase().indexOf("3d controller");if(-1!==s||-1!==a){-1!==a&&-1===s&&(s=a),(r.vendor||r.model||r.bus||null!==r.vram||r.vramDynamic)&&(t.push(r),r={vendor:"",model:"",bus:"",busAddress:"",vram:null,vramDynamic:!1});const l=e.split(" ")[0];/[\da-fA-F]{2}:[\da-fA-F]{2}\.[\da-fA-F]/.test(l)&&(r.busAddress=l),n=!0;let c=e.search(/\[[0-9a-f]{4}:[0-9a-f]{4}]|$/),u=e.substr(s,c-s).split(":");r.busAddress=e.substr(0,s).trim(),u.length>1&&(u[1]=u[1].trim(),u[1].toLowerCase().indexOf("corporation")>=0?(r.vendor=u[1].substr(0,u[1].toLowerCase().indexOf("corporation")+11).trim(),r.model=u[1].substr(u[1].toLowerCase().indexOf("corporation")+11,200).trim().split("(")[0],r.bus=i.length>0&&o?"PCIe":"Onboard",r.vram=null,r.vramDynamic=!1):u[1].toLowerCase().indexOf(" inc.")>=0?((u[1].match(/]/g)||[]).length>1?(r.vendor=u[1].substr(0,u[1].toLowerCase().indexOf("]")+1).trim(),r.model=u[1].substr(u[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(r.vendor=u[1].substr(0,u[1].toLowerCase().indexOf(" inc.")+5).trim(),r.model=u[1].substr(u[1].toLowerCase().indexOf(" inc.")+5,200).trim().split("(")[0].trim()),r.bus=i.length>0&&o?"PCIe":"Onboard",r.vram=null,r.vramDynamic=!1):u[1].toLowerCase().indexOf(" ltd.")>=0&&((u[1].match(/]/g)||[]).length>1?(r.vendor=u[1].substr(0,u[1].toLowerCase().indexOf("]")+1).trim(),r.model=u[1].substr(u[1].toLowerCase().indexOf("]")+1,200).trim().split("(")[0].trim()):(r.vendor=u[1].substr(0,u[1].toLowerCase().indexOf(" ltd.")+5).trim(),r.model=u[1].substr(u[1].toLowerCase().indexOf(" ltd.")+5,200).trim().split("(")[0].trim())))}else n=!1}if(n){let t=e.split(":");if(t.length>1&&-1!==t[0].replace(/ +/g,"").toLowerCase().indexOf("devicename")&&-1!==t[1].toLowerCase().indexOf("onboard")&&(r.bus="Onboard"),t.length>1&&-1!==t[0].replace(/ +/g,"").toLowerCase().indexOf("region")&&-1!==t[1].toLowerCase().indexOf("memory")){let e=t[1].split("=");e.length>1&&(r.vram=parseInt(e[1]))}}}})),(r.vendor||r.model||r.bus||r.busAddress||null!==r.vram||r.vramDynamic)&&t.push(r),t}(e);const r=a();t.controllers=t.controllers.map((e=>O(e,r.find((t=>t.pciBus.toLowerCase().endsWith(e.busAddress.toLowerCase())))||{})))}i("clinfo --raw",(function(n,o){if(!n){let e=o.toString().split("\n");t.controllers=function(e,t){const r=/\[([^\]]+)\]\s+(\w+)\s+(.*)/,n=t.reduce(((e,t)=>{const n=r.exec(t.trim());return n&&(e[n[1]]||(e[n[1]]={}),e[n[1]][n[2]]=n[3]),e}),{});for(let t in n){const r=n[t];if("CL_DEVICE_TYPE_GPU"===r.CL_DEVICE_TYPE){let t;if(r.CL_DEVICE_TOPOLOGY_AMD){const e=r.CL_DEVICE_TOPOLOGY_AMD.match(/[a-zA-Z0-9]+:\d+\.\d+/);e&&(t=e[0])}else if(r.CL_DEVICE_PCI_BUS_ID_NV&&r.CL_DEVICE_PCI_SLOT_ID_NV){const e=parseInt(r.CL_DEVICE_PCI_BUS_ID_NV),n=parseInt(r.CL_DEVICE_PCI_SLOT_ID_NV);if(!isNaN(e)&&!isNaN(n)){const r=n>>3&255,i=7&n;t=`${(255&e).toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}.${i}`}}if(t){let n=e.find((e=>e.busAddress===t));n||(n={vendor:"",model:"",bus:"",busAddress:t,vram:null,vramDynamic:!1},e.push(n)),n.vendor=r.CL_DEVICE_VENDOR,r.CL_DEVICE_BOARD_NAME_AMD?n.model=r.CL_DEVICE_BOARD_NAME_AMD:n.model=r.CL_DEVICE_NAME;const i=parseInt(r.CL_DEVICE_GLOBAL_MEM_SIZE);isNaN(i)||(n.vram=Math.round(i/1024/1024))}}}return e}(t.controllers,e)}i("xdpyinfo 2>/dev/null | grep 'depth of root window' | awk '{ print $5 }'",(function(n,o){let a=0;if(!n){let e=o.toString().split("\n");a=parseInt(e[0])||0}i("xrandr --verbose 2>/dev/null",(function(n,i){if(!n){let e=i.toString().split("\n");t.displays=function(e,t){let r=[],n={vendor:"",model:"",deviceName:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null},i=!1,o=!1,a="",l=0;for(let c=1;c<e.length;c++)if(""!==e[c].trim()){if(" "!==e[c][0]&&"\t"!==e[c][0]&&-1!==e[c].toLowerCase().indexOf(" connected ")){(n.model||n.main||n.builtin||n.connection||null!==n.sizeX||null!==n.pixelDepth||null!==n.resolutionX)&&(r.push(n),n={vendor:"",model:"",main:!1,builtin:!1,connection:"",sizeX:null,sizeY:null,pixelDepth:null,resolutionX:null,resolutionY:null,currentResX:null,currentResY:null,positionX:0,positionY:0,currentRefreshRate:null});let t=e[c].split(" ");n.connection=t[0],n.main=e[c].toLowerCase().indexOf(" primary ")>=0,n.builtin=t[0].toLowerCase().indexOf("edp")>=0}if(i)if(e[c].search(/\S|$/)>l)a+=e[c].toLowerCase().trim();else{let e=E(a);n.vendor=e.vendor,n.model=e.model,n.resolutionX=e.resolutionX,n.resolutionY=e.resolutionY,n.sizeX=e.sizeX,n.sizeY=e.sizeY,n.pixelDepth=t,i=!1}if(e[c].toLowerCase().indexOf("edid:")>=0&&(i=!0,l=e[c].search(/\S|$/)),e[c].toLowerCase().indexOf("*current")>=0){const t=e[c].split("(");if(t&&t.length>1&&t[0].indexOf("x")>=0){const e=t[0].trim().split("x");n.currentResX=s.toInt(e[0]),n.currentResY=s.toInt(e[1])}o=!0}if(o&&e[c].toLowerCase().indexOf("clock")>=0&&e[c].toLowerCase().indexOf("hz")>=0&&e[c].toLowerCase().indexOf("v: height")>=0){const t=e[c].split("clock");t&&t.length>1&&t[1].toLowerCase().indexOf("hz")>=0&&(n.currentRefreshRate=s.toInt(t[1])),o=!1}}return(n.model||n.main||n.builtin||n.connection||null!==n.sizeX||null!==n.pixelDepth||null!==n.resolutionX)&&r.push(n),r}(e,a)}e&&e(t),r(t)}))}))}))}))}if((f||d||h)&&(e&&e(null),r(null)),m&&(e&&e(null),r(null)),p)try{const n=[];n.push(s.powerShell("Get-CimInstance win32_VideoController | fl *")),n.push(s.powerShell('gp "HKLM:\\SYSTEM\\ControlSet001\\Control\\Class\\{4d36e968-e325-11ce-bfc1-08002be10318}\\*" -ErrorAction SilentlyContinue | where MatchingDeviceId $null -NE | select MatchingDeviceId,HardwareInformation.qwMemorySize | fl')),n.push(s.powerShell("Get-CimInstance win32_desktopmonitor | fl *")),n.push(s.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorBasicDisplayParams | fl")),n.push(s.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.Screen]::AllScreens")),n.push(s.powerShell("Get-CimInstance -Namespace root\\wmi -ClassName WmiMonitorConnectionParams | fl")),n.push(s.powerShell('gwmi WmiMonitorID -Namespace root\\wmi | ForEach-Object {(($_.ManufacturerName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.ProductCodeID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.UserFriendlyName -notmatch 0 | foreach {[char]$_}) -join "") + "|" + (($_.SerialNumberID -notmatch 0 | foreach {[char]$_}) -join "") + "|" + $_.InstanceName}'));const i=a();Promise.all(n).then((n=>{let o=n[0].replace(/\r/g,"").split(/\n\s*\n/),a=n[1].replace(/\r/g,"").split(/\n\s*\n/);t.controllers=function(e,t){const r={};for(const e in t)if({}.hasOwnProperty.call(t,e)&&""!==t[e].trim()){const n=t[e].trim().split("\n"),i=s.getValue(n,"MatchingDeviceId").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i);if(i){const e=parseInt(s.getValue(n,"HardwareInformation.qwMemorySize"));if(!isNaN(e)){let t=i[1].toUpperCase()+"&"+i[2].toUpperCase();i[3]&&(t+="&"+i[3].toUpperCase()),i[4]&&(t+="&"+i[4].toUpperCase()),r[t]=e}}}let n=[];for(let t in e)if({}.hasOwnProperty.call(e,t)&&""!==e[t].trim()){let i=e[t].trim().split("\n"),o=s.getValue(i,"PNPDeviceID",":").match(/PCI\\(VEN_[0-9A-F]{4})&(DEV_[0-9A-F]{4})(?:&(SUBSYS_[0-9A-F]{8}))?(?:&(REV_[0-9A-F]{2}))?/i),a=null,l=null;if(o){if(a=o[3]||"",a&&(a=a.split("_")[1]),null==l&&o[3]&&o[4]){const e=o[1].toUpperCase()+"&"+o[2].toUpperCase()+"&"+o[3].toUpperCase()+"&"+o[4].toUpperCase();({}).hasOwnProperty.call(r,e)&&(l=r[e])}if(null==l&&o[3]){const e=o[1].toUpperCase()+"&"+o[2].toUpperCase()+"&"+o[3].toUpperCase();({}).hasOwnProperty.call(r,e)&&(l=r[e])}if(null==l&&o[4]){const e=o[1].toUpperCase()+"&"+o[2].toUpperCase()+"&"+o[4].toUpperCase();({}).hasOwnProperty.call(r,e)&&(l=r[e])}if(null==l){const e=o[1].toUpperCase()+"&"+o[2].toUpperCase();({}).hasOwnProperty.call(r,e)&&(l=r[e])}}n.push({vendor:s.getValue(i,"AdapterCompatibility",":"),model:s.getValue(i,"name",":"),bus:s.getValue(i,"PNPDeviceID",":").startsWith("PCI")?"PCI":"",vram:(null==l?s.toInt(s.getValue(i,"AdapterRAM",":")):l)/1024/1024,vramDynamic:"2"===s.getValue(i,"VideoMemoryType",":"),subDeviceId:a}),g=s.toInt(s.getValue(i,"CurrentHorizontalResolution",":"))||g,y=s.toInt(s.getValue(i,"CurrentVerticalResolution",":"))||y,b=s.toInt(s.getValue(i,"CurrentRefreshRate",":"))||b,v=s.toInt(s.getValue(i,"CurrentBitsPerPixel",":"))||v}return n}(o,a),t.controllers=t.controllers.map((e=>"nvidia"===e.vendor.toLowerCase()?O(e,i.find((t=>{let r=(e.subDeviceId||"").toLowerCase();const n=t.subDeviceId.split("x");let i=n.length>1?n[1].toLowerCase():n[0].toLowerCase();const o=Math.abs(r.length-i.length);if(r.length>i.length)for(let e=0;e<o;e++)i="0"+i;else if(r.length<i.length)for(let e=0;e<o;e++)r="0"+r;return r===i}))||{}):e));let l=n[2].replace(/\r/g,"").split(/\n\s*\n/);""===l[0].trim()&&l.shift(),l.length&&""===l[l.length-1].trim()&&l.pop();let c=n[3].replace(/\r/g,"").split("Active ");c.shift();let u=n[4].replace(/\r/g,"").split("BitsPerPixel ");u.shift();let p=n[5].replace(/\r/g,"").split(/\n\s*\n/);p.shift();const f=n[6].replace(/\r/g,"").split(/\n/);let d=[];f.forEach((e=>{const t=e.split("|");5===t.length&&d.push({vendor:t[0],code:t[1],model:t[2],serial:t[3],instanceId:t[4]})})),t.displays=function(e,t,r,n,i){let o=[],a="",l="",c="",u=0,p=0;if(r&&r.length){let e=r[0].split("\n");a=s.getValue(e,"MonitorManufacturer",":"),l=s.getValue(e,"Name",":"),c=s.getValue(e,"PNPDeviceID",":").replace(/&amp;/g,"&").toLowerCase(),u=s.toInt(s.getValue(e,"ScreenWidth",":")),p=s.toInt(s.getValue(e,"ScreenHeight",":"))}for(let r=0;r<e.length;r++)if(""!==e[r].trim()){e[r]="BitsPerPixel "+e[r],t[r]="Active "+t[r],0!==n.length&&void 0!==n[r]||(n[r]="Unknown");let u=e[r].split("\n"),p=t[r].split("\n"),f=n[r].split("\n");const d=s.getValue(u,"BitsPerPixel"),h=s.getValue(u,"Bounds").replace("{","").replace("}","").replace(/=/g,":").split(","),m=s.getValue(u,"Primary"),g=s.getValue(p,"MaxHorizontalImageSize"),y=s.getValue(p,"MaxVerticalImageSize"),v=s.getValue(p,"InstanceName").toLowerCase(),b=s.getValue(f,"VideoOutputTechnology"),_=s.getValue(u,"DeviceName");let S="",x="";i.forEach((e=>{e.instanceId.toLowerCase().startsWith(v)&&a.startsWith("(")&&l.startsWith("PnP")&&(S=e.vendor,x=e.model)})),o.push({vendor:v.startsWith(c)&&""===S?a:S,model:v.startsWith(c)&&""===x?l:x,deviceName:_,main:"true"===m.toLowerCase(),builtin:"2147483648"===b,connection:b&&w[b]?w[b]:"",resolutionX:s.toInt(s.getValue(h,"Width",":")),resolutionY:s.toInt(s.getValue(h,"Height",":")),sizeX:g?parseInt(g,10):null,sizeY:y?parseInt(y,10):null,pixelDepth:d,currentResX:s.toInt(s.getValue(h,"Width",":")),currentResY:s.toInt(s.getValue(h,"Height",":")),positionX:s.toInt(s.getValue(h,"X",":")),positionY:s.toInt(s.getValue(h,"Y",":"))})}0===e.length&&o.push({vendor:a,model:l,main:!0,sizeX:null,sizeY:null,resolutionX:u,resolutionY:p,pixelDepth:null,currentResX:u,currentResY:p,positionX:0,positionY:0});return o}(u,c,l,p,d),1===t.displays.length&&(g&&(t.displays[0].resolutionX=g,t.displays[0].currentResX||(t.displays[0].currentResX=g)),y&&(t.displays[0].resolutionY=y,0===t.displays[0].currentResY&&(t.displays[0].currentResY=y)),v&&(t.displays[0].pixelDepth=v)),t.displays=t.displays.map((e=>(b&&!e.currentRefreshRate&&(e.currentRefreshRate=b),e))),e&&e(t),r(t)})).catch((()=>{e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63}],267:[function(e,t,r){(function(t){(function(){"use strict";const n=e("../package.json").version,i=e("./util"),o=e("./system"),s=e("./osinfo"),a=e("./cpu"),l=e("./memory"),c=e("./battery"),u=e("./graphics"),p=e("./filesystem"),f=e("./network"),d=e("./wifi"),h=e("./processes"),m=e("./users"),g=e("./internet"),y=e("./docker"),v=e("./virtualbox"),b=e("./printer"),w=e("./usb"),_=e("./audio"),S=e("./bluetooth");let x=t.platform;const O="win32"===x,E="freebsd"===x,C="openbsd"===x,P="netbsd"===x,I="sunos"===x;function k(){return n}function L(e){return new Promise((r=>{t.nextTick((()=>{let t={};t.version=k(),Promise.all([o.system(),o.bios(),o.baseboard(),o.chassis(),s.osInfo(),s.uuid(),s.versions(),a.cpu(),a.cpuFlags(),u.graphics(),f.networkInterfaces(),l.memLayout(),p.diskLayout()]).then((n=>{t.system=n[0],t.bios=n[1],t.baseboard=n[2],t.chassis=n[3],t.os=n[4],t.uuid=n[5],t.versions=n[6],t.cpu=n[7],t.cpu.flags=n[8],t.graphics=n[9],t.net=n[10],t.memLayout=n[11],t.diskLayout=n[12],e&&e(t),r(t)}))}))}))}function T(e,r,n){return i.isFunction(r)&&(n=r,r=""),i.isFunction(e)&&(n=e,e=""),new Promise((i=>{t.nextTick((()=>{r=r||f.getDefaultNetworkInterface(),e=e||"";let o=function(){let e=15;return O&&(e=13),(E||C||P)&&(e=11),I&&(e=6),function(){0==--e&&(n&&n(u),i(u))}}(),u={};u.time=s.time(),u.node=t.versions.node,u.v8=t.versions.v8,a.cpuCurrentSpeed().then((e=>{u.cpuCurrentSpeed=e,o()})),m.users().then((e=>{u.users=e,o()})),h.processes().then((e=>{u.processes=e,o()})),a.currentLoad().then((e=>{u.currentLoad=e,o()})),I||a.cpuTemperature().then((e=>{u.temp=e,o()})),C||E||P||I||f.networkStats(r).then((e=>{u.networkStats=e,o()})),I||f.networkConnections().then((e=>{u.networkConnections=e,o()})),l.mem().then((e=>{u.mem=e,o()})),I||c().then((e=>{u.battery=e,o()})),I||h.services(e).then((e=>{u.services=e,o()})),I||p.fsSize().then((e=>{u.fsSize=e,o()})),O||C||E||P||I||p.fsStats().then((e=>{u.fsStats=e,o()})),O||C||E||P||I||p.disksIO().then((e=>{u.disksIO=e,o()})),C||E||P||I||d.wifiNetworks().then((e=>{u.wifiNetworks=e,o()})),g.inetLatency().then((e=>{u.inetLatency=e,o()}))}))}))}function A(e,n){return new Promise((i=>{t.nextTick((()=>{const t=Object.keys(e).filter((e=>({}.hasOwnProperty.call(r,e)))).map((t=>{const n=e[t].substring(e[t].lastIndexOf("(")+1,e[t].lastIndexOf(")"));let i=t.indexOf(")")>=0?t.split(")")[1].trim():t;return i=t.indexOf("|")>=0?t.split("|")[0].trim():i,n?r[i](n):r[i]("")}));Promise.all(t).then((t=>{const o={};let s=0;for(let n in e)if({}.hasOwnProperty.call(e,n)&&{}.hasOwnProperty.call(r,n)&&t.length>s){if("*"===e[n]||"all"===e[n])o[n]=t[s];else{let r=e[n],i="",a=[];if(r.indexOf(")")>=0&&(r=r.split(")")[1].trim()),r.indexOf("|")>=0&&(i=r.split("|")[1].trim(),a=i.split(":"),r=r.split("|")[0].trim()),r=r.replace(/,/g," ").replace(/ +/g," ").split(" "),t[s])if(Array.isArray(t[s])){const e=[];t[s].forEach((t=>{let n={};if(1!==r.length||"*"!==r[0]&&"all"!==r[0]?r.forEach((e=>{({}).hasOwnProperty.call(t,e)&&(n[e]=t[e])})):n=t,i&&2===a.length){if({}.hasOwnProperty.call(n,a[0].trim())){const t=n[a[0].trim()];"number"==typeof t?t===parseFloat(a[1].trim())&&e.push(n):"string"==typeof t&&t.toLowerCase()===a[1].trim().toLowerCase()&&e.push(n)}}else e.push(n)})),o[n]=e}else{const e={};r.forEach((r=>{({}).hasOwnProperty.call(t[s],r)&&(e[r]=t[s][r])})),o[n]=e}else o[n]={}}s++}n&&n(o),i(o)}))}))}))}O&&i.getCodepage(),r.version=k,r.system=o.system,r.bios=o.bios,r.baseboard=o.baseboard,r.chassis=o.chassis,r.time=s.time,r.osInfo=s.osInfo,r.versions=s.versions,r.shell=s.shell,r.uuid=s.uuid,r.cpu=a.cpu,r.cpuFlags=a.cpuFlags,r.cpuCache=a.cpuCache,r.cpuCurrentSpeed=a.cpuCurrentSpeed,r.cpuTemperature=a.cpuTemperature,r.currentLoad=a.currentLoad,r.fullLoad=a.fullLoad,r.mem=l.mem,r.memLayout=l.memLayout,r.battery=c,r.graphics=u.graphics,r.fsSize=p.fsSize,r.fsOpenFiles=p.fsOpenFiles,r.blockDevices=p.blockDevices,r.fsStats=p.fsStats,r.disksIO=p.disksIO,r.diskLayout=p.diskLayout,r.networkInterfaceDefault=f.networkInterfaceDefault,r.networkGatewayDefault=f.networkGatewayDefault,r.networkInterfaces=f.networkInterfaces,r.networkStats=f.networkStats,r.networkConnections=f.networkConnections,r.wifiNetworks=d.wifiNetworks,r.wifiInterfaces=d.wifiInterfaces,r.wifiConnections=d.wifiConnections,r.services=h.services,r.processes=h.processes,r.processLoad=h.processLoad,r.users=m.users,r.inetChecksite=g.inetChecksite,r.inetLatency=g.inetLatency,r.dockerInfo=y.dockerInfo,r.dockerImages=y.dockerImages,r.dockerContainers=y.dockerContainers,r.dockerContainerStats=y.dockerContainerStats,r.dockerContainerProcesses=y.dockerContainerProcesses,r.dockerVolumes=y.dockerVolumes,r.dockerAll=y.dockerAll,r.vboxInfo=v.vboxInfo,r.printer=b.printer,r.usb=w.usb,r.audio=_.audio,r.bluetoothDevices=S.bluetoothDevices,r.getStaticData=L,r.getDynamicData=T,r.getAllData=function(e,r,n){return new Promise((o=>{t.nextTick((()=>{let t={};r&&i.isFunction(r)&&!n&&(n=r,r=""),e&&i.isFunction(e)&&!r&&!n&&(n=e,e="",r=""),L().then((i=>{t=i,T(e,r).then((e=>{for(let r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r]);n&&n(t),o(t)}))}))}))}))},r.get=A,r.observe=function(e,t,r){let n=null;return setInterval((()=>{A(e).then((e=>{JSON.stringify(n)!==JSON.stringify(e)&&(n=Object.assign({},e),r(e))}))}),t)},r.powerShellStart=i.powerShellStart,r.powerShellRelease=i.powerShellRelease}).call(this)}).call(this,e("_process"))},{"../package.json":280,"./audio":259,"./battery":260,"./bluetooth":261,"./cpu":262,"./docker":263,"./filesystem":265,"./graphics":266,"./internet":268,"./memory":269,"./network":270,"./osinfo":271,"./printer":272,"./processes":273,"./system":274,"./usb":275,"./users":276,"./util":277,"./virtualbox":278,"./wifi":279,_process:181}],268:[function(e,t,r){(function(t){(function(){"use strict";const n=e("./util");let i=t.platform;const o="linux"===i||"android"===i,s="darwin"===i,a="win32"===i,l="freebsd"===i,c="openbsd"===i,u="netbsd"===i,p="sunos"===i;r.inetChecksite=function(r,i){return new Promise((f=>{t.nextTick((()=>{let t={url:r,ok:!1,status:404,ms:null};if("string"!=typeof r)return i&&i(t),f(t);let d="";const h=n.sanitizeShellString(r,!0);for(let e=0;e<=n.mathMin(h.length,2e3);e++)if(void 0!==h[e]){h[e].__proto__.toLowerCase=n.stringToLower;const t=h[e].toLowerCase();t&&t[0]&&!t[1]&&1===t[0].length&&(d+=t[0])}t.url=d;try{if(d&&!n.isPrototypePolluted()){if(d.__proto__.startsWith=n.stringStartWith,d.startsWith("file:")||d.startsWith("gopher:")||d.startsWith("telnet:")||d.startsWith("mailto:")||d.startsWith("news:")||d.startsWith("nntp:"))return i&&i(t),f(t);let r=Date.now();if(o||l||c||u||s||p){let e=["-I","--connect-timeout","5","-m","5"];e.push(d);let o="curl";n.execSafe(o,e).then((e=>{const n=e.split("\n");let o=n[0]&&n[0].indexOf(" ")>=0?parseInt(n[0].split(" ")[1],10):404;t.status=o||404,t.ok=200===o||301===o||302===o||304===o,t.ms=t.ok?Date.now()-r:null,i&&i(t),f(t)}))}if(a){const n=d.startsWith("https:")?e("https"):e("http");try{n.get(d,(e=>{const n=e.statusCode;t.status=n||404,t.ok=200===n||301===n||302===n||304===n,200!==n?(e.resume(),t.ms=t.ok?Date.now()-r:null,i&&i(t),f(t)):(e.on("data",(()=>{})),e.on("end",(()=>{t.ms=t.ok?Date.now()-r:null,i&&i(t),f(t)})))})).on("error",(()=>{i&&i(t),f(t)}))}catch(e){i&&i(t),f(t)}}}else i&&i(t),f(t)}catch(e){i&&i(t),f(t)}}))}))},r.inetLatency=function(e,r){return n.isFunction(e)&&!r&&(r=e,e=""),e=e||"8.8.8.8",new Promise((i=>{t.nextTick((()=>{if("string"!=typeof e)return r&&r(null),i(null);let t="";const f=(n.isPrototypePolluted()?"8.8.8.8":n.sanitizeShellString(e,!0)).trim();for(let e=0;e<=n.mathMin(f.length,2e3);e++)if(void 0!==f[e]){f[e].__proto__.toLowerCase=n.stringToLower;const r=f[e].toLowerCase();r&&r[0]&&!r[1]&&(t+=r[0])}if(t.__proto__.startsWith=n.stringStartWith,t.startsWith("file:")||t.startsWith("gopher:")||t.startsWith("telnet:")||t.startsWith("mailto:")||t.startsWith("news:")||t.startsWith("nntp:"))return r&&r(null),i(null);let d;if((o||l||c||u||s)&&(o&&(d=["-c","2","-w","3",t]),(l||c||u)&&(d=["-c","2","-t","3",t]),s&&(d=["-c2","-t3",t]),n.execSafe("ping",d).then((e=>{let t=null;if(e){const r=e.split("\n").filter((e=>e.indexOf("rtt")>=0||e.indexOf("round-trip")>=0||e.indexOf("avg")>=0)).join("\n"),n=r.split("=");if(n.length>1){const e=n[1].split("/");e.length>1&&(t=parseFloat(e[1]))}}r&&r(t),i(t)}))),p){const e=["-s","-a",t,"56","2"],o="avg";n.execSafe("ping",e,{timeout:3e3}).then((e=>{let t=null;if(e){const r=e.split("\n").filter((e=>e.indexOf(o)>=0)).join("\n"),n=r.split("=");if(n.length>1){const e=n[1].split("/");e.length>1&&(t=parseFloat(e[1].replace(",",".")))}}r&&r(t),i(t)}))}if(a){let e=null;try{const o=[t,"-n","1"];n.execSafe("ping",o,n.execOptsWin).then((t=>{if(t){let r=t.split("\r\n");r.shift(),r.forEach((function(t){if(3===(t.toLowerCase().match(/ms/g)||[]).length){let r=t.replace(/ +/g," ").split(" ");r.length>6&&(e=parseFloat(r[r.length-1]))}}))}r&&r(e),i(e)}))}catch(t){r&&r(e),i(e)}}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,http:200,https:149}],269:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("child_process").exec,o=e("child_process").execSync,s=e("./util"),a=e("fs");let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l,g={"0x014F":"Transcend Information","0x2C00":"Micron Technology Inc.","0x802C":"Micron Technology Inc.","0x80AD":"Hynix Semiconductor Inc.","0x80CE":"Samsung Electronics Inc.","0xAD00":"Hynix Semiconductor Inc.","0xCE00":"Samsung Electronics Inc.","0x02FE":"Elpida","0x5105":"Qimonda AG i. In.","0x8551":"Qimonda AG i. In.","0x859B":"Crucial","0x04CD":"G-Skill"},y={"017A":"Apacer","0198":"HyperX","029E":"Corsair","04CB":"A-DATA","04CD":"G-Skill","059B":"Crucial","00CE":"Samsung",1315:"Crutial","014F":"Transcend Information","2C00":"Micron Technology Inc.","802C":"Micron Technology Inc.","80AD":"Hynix Semiconductor Inc.","80CE":"Samsung Electronics Inc.",AD00:"Hynix Semiconductor Inc.",CE00:"Samsung Electronics Inc.","02FE":"Elpida",5105:"Qimonda AG i. In.",8551:"Qimonda AG i. In.","859B":"Crucial"};r.mem=function(e){return new Promise((r=>{t.nextTick((()=>{let t={total:n.totalmem(),free:n.freemem(),used:n.totalmem()-n.freemem(),active:n.totalmem()-n.freemem(),available:n.freemem(),buffers:0,cached:0,slab:0,buffcache:0,swaptotal:0,swapused:0,swapfree:0};if(c&&a.readFile("/proc/meminfo",(function(i,o){if(!i){const e=o.toString().split("\n");t.total=parseInt(s.getValue(e,"memtotal"),10),t.total=t.total?1024*t.total:n.totalmem(),t.free=parseInt(s.getValue(e,"memfree"),10),t.free=t.free?1024*t.free:n.freemem(),t.used=t.total-t.free,t.buffers=parseInt(s.getValue(e,"buffers"),10),t.buffers=t.buffers?1024*t.buffers:0,t.cached=parseInt(s.getValue(e,"cached"),10),t.cached=t.cached?1024*t.cached:0,t.slab=parseInt(s.getValue(e,"slab"),10),t.slab=t.slab?1024*t.slab:0,t.buffcache=t.buffers+t.cached+t.slab;let r=parseInt(s.getValue(e,"memavailable"),10);t.available=r?1024*r:t.free+t.buffcache,t.active=t.total-t.available,t.swaptotal=parseInt(s.getValue(e,"swaptotal"),10),t.swaptotal=t.swaptotal?1024*t.swaptotal:0,t.swapfree=parseInt(s.getValue(e,"swapfree"),10),t.swapfree=t.swapfree?1024*t.swapfree:0,t.swapused=t.swaptotal-t.swapfree}e&&e(t),r(t)})),(f||d||h)&&i("/sbin/sysctl hw.realmem hw.physmem vm.stats.vm.v_page_count vm.stats.vm.v_wire_count vm.stats.vm.v_active_count vm.stats.vm.v_inactive_count vm.stats.vm.v_cache_count vm.stats.vm.v_free_count vm.stats.vm.v_page_size",(function(n,i){if(!n){let e=i.toString().split("\n");const r=parseInt(s.getValue(e,"vm.stats.vm.v_page_size"),10),n=parseInt(s.getValue(e,"vm.stats.vm.v_inactive_count"),10)*r,o=parseInt(s.getValue(e,"vm.stats.vm.v_cache_count"),10)*r;t.total=parseInt(s.getValue(e,"hw.realmem"),10),isNaN(t.total)&&(t.total=parseInt(s.getValue(e,"hw.physmem"),10)),t.free=parseInt(s.getValue(e,"vm.stats.vm.v_free_count"),10)*r,t.buffcache=n+o,t.available=t.buffcache+t.free,t.active=t.total-t.free-t.buffcache,t.swaptotal=0,t.swapfree=0,t.swapused=0}e&&e(t),r(t)})),m&&(e&&e(t),r(t)),u){let n=4096;try{let e=s.toInt(o("sysctl -n vm.pagesize").toString());n=e||n}catch(e){s.noop()}i('vm_stat 2>/dev/null | grep "Pages active"',(function(o,s){if(!o){let e=s.toString().split("\n");t.active=parseInt(e[0].split(":")[1],10)*n,t.buffcache=t.used-t.active,t.available=t.free+t.buffcache}i("sysctl -n vm.swapusage 2>/dev/null",(function(n,i){if(!n){let e=i.toString().split("\n");if(e.length>0){e[0].replace(/,/g,".").replace(/M/g,"").trim().split("  ").forEach((e=>{-1!==e.toLowerCase().indexOf("total")&&(t.swaptotal=1024*parseFloat(e.split("=")[1].trim())*1024),-1!==e.toLowerCase().indexOf("used")&&(t.swapused=1024*parseFloat(e.split("=")[1].trim())*1024),-1!==e.toLowerCase().indexOf("free")&&(t.swapfree=1024*parseFloat(e.split("=")[1].trim())*1024)}))}}e&&e(t),r(t)}))}))}if(p){let n=0,i=0;try{s.powerShell("Get-CimInstance Win32_PageFileUsage | Select AllocatedBaseSize, CurrentUsage").then(((o,s)=>{if(!s){o.split("\r\n").filter((e=>""!==e.trim())).filter(((e,t)=>t>0)).forEach((function(e){""!==e&&(e=e.trim().split(/\s\s+/),n+=parseInt(e[0],10)||0,i+=parseInt(e[1],10)||0)}))}t.swaptotal=1024*n*1024,t.swapused=1024*i*1024,t.swapfree=t.swaptotal-t.swapused,e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}}}))}))},r.memLayout=function(e){function r(e){const t=e.replace("0x","").toUpperCase();return 4===t.length&&{}.hasOwnProperty.call(y,t)?y[t]:e}return new Promise((a=>{t.nextTick((()=>{let t=[];if((c||f||d||h)&&i('export LC_ALL=C; dmidecode -t memory 2>/dev/null | grep -iE "Size:|Type|Speed|Manufacturer|Form Factor|Locator|Memory Device|Serial Number|Voltage|Part Number"; unset LC_ALL',(function(i,l){if(!i){let e=l.toString().split("Memory Device");e.shift(),e.forEach((function(e){let n=e.split("\n");const i=s.getValue(n,"Size"),o=i.indexOf("GB")>=0?1024*parseInt(i,10)*1024*1024:1024*parseInt(i,10)*1024;let a=s.getValue(n,"Bank Locator");if(a.toLowerCase().indexOf("bad")>=0&&(a=""),parseInt(s.getValue(n,"Size"),10)>0){const e=s.toInt(s.getValue(n,"Total Width")),i=s.toInt(s.getValue(n,"Data Width"));t.push({size:o,bank:a,type:s.getValue(n,"Type:"),ecc:!(!i||!e)&&e>i,clockSpeed:s.getValue(n,"Configured Clock Speed:")?parseInt(s.getValue(n,"Configured Clock Speed:"),10):s.getValue(n,"Speed:")?parseInt(s.getValue(n,"Speed:"),10):null,formFactor:s.getValue(n,"Form Factor:"),manufacturer:r(s.getValue(n,"Manufacturer:")),partNum:s.getValue(n,"Part Number:"),serialNum:s.getValue(n,"Serial Number:"),voltageConfigured:parseFloat(s.getValue(n,"Configured Voltage:"))||null,voltageMin:parseFloat(s.getValue(n,"Minimum Voltage:"))||null,voltageMax:parseFloat(s.getValue(n,"Maximum Voltage:"))||null})}else t.push({size:0,bank:a,type:"Empty",ecc:null,clockSpeed:0,formFactor:s.getValue(n,"Form Factor:"),partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}))}if(!t.length){t.push({size:n.totalmem(),bank:"",type:"",ecc:null,clockSpeed:0,formFactor:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null});try{let e=o("cat /proc/cpuinfo 2>/dev/null"),r=e.toString().split("\n"),n=s.getValue(r,"hardware",":",!0).toUpperCase(),i=s.getValue(r,"revision",":",!0).toLowerCase();if("BCM2835"===n||"BCM2708"===n||"BCM2709"===n||"BCM2835"===n||"BCM2837"===n){const n={0:400,1:450,2:450,3:3200};t[0].type="LPDDR2",t[0].type=i&&i[2]&&"3"===i[2]?"LPDDR4":t[0].type,t[0].ecc=!1,t[0].clockSpeed=i&&i[2]&&n[i[2]]||400,t[0].clockSpeed=i&&i[4]&&"d"===i[4]?500:t[0].clockSpeed,t[0].formFactor="SoC",e=o("vcgencmd get_config sdram_freq 2>/dev/null"),r=e.toString().split("\n");let a=parseInt(s.getValue(r,"sdram_freq","=",!0),10)||0;a&&(t[0].clockSpeed=a),e=o("vcgencmd measure_volts sdram_p 2>/dev/null"),r=e.toString().split("\n");let l=parseFloat(s.getValue(r,"volt","=",!0))||0;l&&(t[0].voltageConfigured=l,t[0].voltageMin=l,t[0].voltageMax=l)}}catch(e){s.noop()}}e&&e(t),a(t)})),u&&i("system_profiler SPMemoryDataType",(function(r,n){if(!r){const e=n.toString().split("\n"),r=s.getValue(e,"ecc",":",!0).toLowerCase();let i=n.toString().split("        BANK "),o=!0;1===i.length&&(i=n.toString().split("        DIMM"),o=!1),i.shift(),i.forEach((function(e){let n=e.split("\n");const i=(o?"BANK ":"DIMM")+n[0].trim().split("/")[0],a=parseInt(s.getValue(n,"          Size"));var l;a?t.push({size:1024*a*1024*1024,bank:i,type:s.getValue(n,"          Type:"),ecc:r?"enabled"===r:null,clockSpeed:parseInt(s.getValue(n,"          Speed:"),10),formFactor:"",manufacturer:(l=s.getValue(n,"          Manufacturer:"),{}.hasOwnProperty.call(g,l)?g[l]:l),partNum:s.getValue(n,"          Part Number:"),serialNum:s.getValue(n,"          Serial Number:"),voltageConfigured:null,voltageMin:null,voltageMax:null}):t.push({size:0,bank:i,type:"Empty",ecc:null,clockSpeed:0,formFactor:"",manufacturer:"",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}))}if(!t.length){const e=n.toString().split("\n"),r=parseInt(s.getValue(e,"      Memory:")),i=s.getValue(e,"      Type:");r&&i&&t.push({size:1024*r*1024*1024,bank:"0",type:i,ecc:!1,clockSpeed:0,formFactor:"",manufacturer:"Apple",partNum:"",serialNum:"",voltageConfigured:null,voltageMin:null,voltageMax:null})}e&&e(t),a(t)})),m&&(e&&e(t),a(t)),p){const r="Unknown|Other|DRAM|Synchronous DRAM|Cache DRAM|EDO|EDRAM|VRAM|SRAM|RAM|ROM|FLASH|EEPROM|FEPROM|EPROM|CDRAM|3DRAM|SDRAM|SGRAM|RDRAM|DDR|DDR2|DDR2 FB-DIMM|Reserved|DDR3|FBD2|DDR4|LPDDR|LPDDR2|LPDDR3|LPDDR4".split("|"),n="Unknown|Other|SIP|DIP|ZIP|SOJ|Proprietary|SIMM|DIMM|TSOP|PGA|RIMM|SODIMM|SRIMM|SMD|SSMP|QFP|TQFP|SOIC|LCC|PLCC|BGA|FPBGA|LGA".split("|");try{s.powerShell("Get-CimInstance Win32_PhysicalMemory | select DataWidth,TotalWidth,Capacity,BankLabel,MemoryType,SMBIOSMemoryType,ConfiguredClockSpeed,FormFactor,Manufacturer,PartNumber,SerialNumber,ConfiguredVoltage,MinVoltage,MaxVoltage | fl").then(((i,o)=>{if(!o){let e=i.toString().split(/\n\s*\n/);e.shift(),e.forEach((function(e){let i=e.split("\r\n");const o=s.toInt(s.getValue(i,"DataWidth",":")),a=s.toInt(s.getValue(i,"TotalWidth",":")),l=parseInt(s.getValue(i,"Capacity",":"),10)||0;l&&t.push({size:l,bank:s.getValue(i,"BankLabel",":"),type:r[parseInt(s.getValue(i,"MemoryType",":"),10)||parseInt(s.getValue(i,"SMBIOSMemoryType",":"),10)],ecc:!(!o||!a)&&a>o,clockSpeed:parseInt(s.getValue(i,"ConfiguredClockSpeed",":"),10)||parseInt(s.getValue(i,"Speed",":"),10)||0,formFactor:n[parseInt(s.getValue(i,"FormFactor",":"),10)||0],manufacturer:s.getValue(i,"Manufacturer",":"),partNum:s.getValue(i,"PartNumber",":"),serialNum:s.getValue(i,"SerialNumber",":"),voltageConfigured:(parseInt(s.getValue(i,"ConfiguredVoltage",":"),10)||0)/1e3,voltageMin:(parseInt(s.getValue(i,"MinVoltage",":"),10)||0)/1e3,voltageMax:(parseInt(s.getValue(i,"MaxVoltage",":"),10)||0)/1e3})}))}e&&e(t),a(t)}))}catch(r){e&&e(t),a(t)}}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178}],270:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("child_process").exec,o=e("child_process").execSync,s=e("fs"),a=e("./util");let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l;let g,y={},v="",b={},w=[],_=[],S={};function x(){let e="",t="";try{let r=n.networkInterfaces(),i=9999;for(let n in r)({}).hasOwnProperty.call(r,n)&&r[n].forEach((function(r){r&&!1===r.internal&&(t=t||n,r.scopeid&&r.scopeid<i&&(e=n,i=r.scopeid))}));if(e=e||t||"",p){let t="";const i=o("netstat -r",a.execOptsWin);if(i.toString().split(n.EOL).forEach((e=>{if((e=e.replace(/\s+/g," ").trim()).indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(e)){const r=e.split(" ");r.length>=5&&(t=r[r.length-2])}})),t)for(let n in r)({}).hasOwnProperty.call(r,n)&&r[n].forEach((function(r){r&&r.address&&r.address===t&&(e=n)}))}if(c){let t=o("ip route 2> /dev/null | grep default").toString().split("\n")[0].split(/\s+/);"none"===t[0]&&t[5]?e=t[5]:t[4]&&(e=t[4]),e.indexOf(":")>-1&&(e=e.split(":")[1].trim())}if(u||f||d||h||m){let t="";c&&(t="ip route 2> /dev/null | grep default | awk '{print $5}'"),u&&(t="route -n get default 2>/dev/null | grep interface: | awk '{print $2}'"),(f||d||h||m)&&(t="route get 0.0.0.0 | grep interface:");let r=o(t);e=r.toString().split("\n")[0],e.indexOf(":")>-1&&(e=e.split(":")[1].trim())}}catch(e){a.noop()}return e&&(v=e),v}function O(){let e="",t="",r={};if(c||f||d||h){if(void 0===g)try{const e=o("which ip").toString().split("\n");g=e.length&&-1===e[0].indexOf(":")&&0===e[0].indexOf("/")?e[0]:""}catch(e){g=""}try{const n=o("export LC_ALL=C; "+(g?g+" link show up":"/sbin/ifconfig")+"; unset LC_ALL").toString().split("\n");for(let i=0;i<n.length;i++)if(n[i]&&" "!==n[i][0]){if(g){let r=n[i+1].trim().split(" ");"link/ether"===r[0]&&(e=n[i].split(" ")[1],e=e.slice(0,e.length-1),t=r[1])}else e=n[i].split(" ")[0],t=n[i].split("HWaddr ")[1];e&&t&&(r[e]=t.trim(),e="",t="")}}catch(e){a.noop()}}if(u)try{const n=o("/sbin/ifconfig").toString().split("\n");for(let i=0;i<n.length;i++)n[i]&&"\t"!==n[i][0]&&n[i].indexOf(":")>0?e=n[i].split(":")[0]:0===n[i].indexOf("\tether ")&&(t=n[i].split("\tether ")[1],e&&t&&(r[e]=t.trim(),e="",t=""))}catch(e){a.noop()}return r}function E(){return new Promise((e=>{t.nextTick((()=>{let t="Get-CimInstance Win32_NetworkAdapter | fl *; echo '#-#-#-#';";t+="Get-CimInstance Win32_NetworkAdapterConfiguration | fl DHCPEnabled";try{a.powerShell("Get-CimInstance Win32_NetworkAdapter | fl *; echo '#-#-#-#';Get-CimInstance Win32_NetworkAdapterConfiguration | fl DHCPEnabled").then((t=>{const r=((t=t.split("#-#-#-#"))[0]||"").split(/\n\s*\n/),n=(t[1]||"").split(/\n\s*\n/);e(function(e,t){let r=[];for(let n in e)if({}.hasOwnProperty.call(e,n)&&""!==e[n].trim()){let i=e[n].trim().split("\r\n"),o=t&&t[n]?t[n].trim().split("\r\n"):[],s=a.getValue(i,"NetEnabled",":"),l="9"===a.getValue(i,"AdapterTypeID",":")?"wireless":"wired",c=a.getValue(i,"Name",":").replace(/\]/g,")").replace(/\[/g,"("),u=a.getValue(i,"NetConnectionID",":").replace(/\]/g,")").replace(/\[/g,"(");if((c.toLowerCase().indexOf("wi-fi")>=0||c.toLowerCase().indexOf("wireless")>=0)&&(l="wireless"),""!==s){const e=parseInt(a.getValue(i,"speed",":").trim(),10)/1e6;r.push({mac:a.getValue(i,"MACAddress",":").toLowerCase(),dhcp:"true"===a.getValue(o,"dhcpEnabled",":").toLowerCase(),name:c,iface:u,netEnabled:"TRUE"===s,speed:isNaN(e)?null:e,operstate:"2"===a.getValue(i,"NetConnectionStatus",":")?"up":"down",type:l})}}return r}(r,n))}))}catch(t){e([])}}))}))}function C(e,t){let r="";const n=t+".";try{const t=e.filter((e=>n.includes(e.name+"."))).map((e=>e.dnsSuffix));return t[0]&&(r=t[0]),r||(r=""),r}catch(e){return"Unknown"}}function P(e,t,r){let n={state:"Unknown",protocol:"Unknown"};if("Disabled"===r)return n.state="Disabled",n.protocol="Not defined",n;if("wired"==e&&r.length>0)try{const e=r.find((e=>e.includes(t+"\r\n"))).split("\r\n"),i=e.find((e=>e.includes("802.1x")));if(i.includes("Disabled"))n.state="Disabled",n.protocol="Not defined";else if(i.includes("Enabled")){const t=e.find((e=>e.includes("EAP")));n.protocol=t.split(":").pop(),n.state="Enabled"}}catch(e){return n}else if("wireless"==e){let e="",r="";try{const i=function(e){try{return o(`netsh wlan show  interface name="${e}" | findstr "SSID"`,a.execOptsWin).split("\r\n").shift().split(":").pop()}catch(e){return"Unknown"}}(t);"Unknown"!==i&&(e=o(`netsh wlan show profiles "${i}" | findstr "802.1X"`,a.execOptsWin),r=o(`netsh wlan show profiles "${i}" | findstr "EAP"`,a.execOptsWin)),e.includes(":")&&r.includes(":")&&(n.state=e.split(":").pop(),n.protocol=r.split(":").pop())}catch(e){return 1===e.status&&e.stdout.includes("AutoConfig")&&(n.state="Disabled",n.protocol="Not defined"),n}}return n}function I(e){const t=[];let r=[];return e.forEach((function(e){e.startsWith("\t")||e.startsWith(" ")||r.length&&(t.push(r),r=[]),r.push(e)})),r.length&&t.push(r),t}function k(){try{const e=o("/sbin/ifconfig -v",{maxBuffer:2048e4}).toString().split("\n");return function(e){let t=[];return e.forEach((e=>{let r={iface:"",mtu:null,mac:"",ip6:"",ip4:"",speed:null,type:"",operstate:"",duplex:"",internal:!1};const n=e[0];r.iface=n.split(":")[0].trim();let i=n.split("> mtu");r.mtu=i.length>1?parseInt(i[1],10):null,isNaN(r.mtu)&&(r.mtu=null),r.internal=i[0].toLowerCase().indexOf("loopback")>-1,e.forEach((e=>{e.trim().startsWith("ether ")&&(r.mac=e.split("ether ")[1].toLowerCase().trim()),e.trim().startsWith("inet6 ")&&!r.ip6&&(r.ip6=e.split("inet6 ")[1].toLowerCase().split("%")[0].split(" ")[0]),e.trim().startsWith("inet ")&&!r.ip4&&(r.ip4=e.split("inet ")[1].toLowerCase().split(" ")[0])}));let o=a.getValue(e,"link rate");r.speed=o?parseFloat(o):null,null===r.speed?(o=a.getValue(e,"uplink rate"),r.speed=o?parseFloat(o):null,null!==r.speed&&o.toLowerCase().indexOf("gbps")>=0&&(r.speed=1e3*r.speed)):o.toLowerCase().indexOf("gbps")>=0&&(r.speed=1e3*r.speed),r.type=a.getValue(e,"type").toLowerCase().indexOf("wi-fi")>-1?"wireless":"wired";const s=a.getValue(e,"status").toLowerCase();r.operstate="active"===s?"up":"inactive"===s?"down":"unknown",r.duplex=a.getValue(e,"media").toLowerCase().indexOf("half-duplex")>-1?"half":"full",(r.ip6||r.ip4||r.mac)&&t.push(r)})),t}(I(e))}catch(e){return[]}}function L(e){const t=`nmcli device status 2>/dev/null | grep ${e}`;try{const e=o(t).toString().replace(/\s+/g," ").trim(),r=e.split(" ").slice(3).join(" ");return"--"!=r?r:""}catch(e){return""}}function T(e){let t=[];try{let r=`cat ${e} 2> /dev/null | grep 'iface\\|source'`;o(r,{maxBuffer:2048e4}).toString().split("\n").forEach((e=>{const r=e.replace(/\s+/g," ").trim().split(" ");if(r.length>=4&&e.toLowerCase().indexOf(" inet ")>=0&&e.toLowerCase().indexOf("dhcp")>=0&&t.push(r[1]),e.toLowerCase().includes("source")){let r=e.split(" ")[1];t=t.concat(T(r))}}))}catch(e){a.noop()}return t}function A(){let e=[];try{const t=o("ip a 2> /dev/null",{maxBuffer:2048e4}).toString().split("\n");e=function(e){const t=[];e&&e.length&&e.forEach((e=>{if(e&&e.length){if(e[0].split(":").length>2)for(let r of e)if(r.indexOf(" inet ")>=0&&r.indexOf(" dynamic ")>=0){const e=r.split(" "),n=e[e.length-1].trim();t.push(n);break}}}));return t}(I(t))}catch(e){a.noop()}try{e=T("/etc/network/interfaces")}catch(e){a.noop()}return e}function j(e,t,r){let n=!1;if(!t)return r.indexOf(e)>=0;{const i=`nmcli connection show "${t}" 2>/dev/null | grep ipv4.method;`;try{const e=o(i).toString();if("auto"===e.replace(/\s+/g," ").trim().split(" ").slice(1).toString())n=!0;else n=!1;return n}catch(t){return r.indexOf(e)>=0}}}function M(e){let t=!1;const r=`ipconfig getpacket "${e}" 2>/dev/null | grep lease_time;`;try{const e=o(r).toString().split("\n");e.length&&e[0].startsWith("lease_time")&&(t=!0)}catch(e){a.noop()}return t}function R(e){if(!e)return"Unknown";{const t=`nmcli connection show "${e}" 2>/dev/null | grep ipv4.dns-search;`;try{const e=o(t).toString(),r=e.replace(/\s+/g," ").trim().split(" ").slice(1).toString();return"--"==r?"Not defined":r}catch(e){return"Unknown"}}}function D(e){if(!e)return"Not defined";{const t=`nmcli connection show "${e}" 2>/dev/null | grep 802-1x.eap;`;try{const e=o(t).toString(),r=e.replace(/\s+/g," ").trim().split(" ").slice(1).toString();return"--"==r?"":r}catch(e){return"Not defined"}}}function N(e,t,r){return!!r&&(["00:00:00:00:00:00","00:03:FF","00:05:69","00:0C:29","00:0F:4B","00:0F:4B","00:13:07","00:13:BE","00:15:5d","00:16:3E","00:1C:42","00:21:F6","00:21:F6","00:24:0B","00:24:0B","00:50:56","00:A0:B1","00:E0:C8","08:00:27","0A:00:27","18:92:2C","16:DF:49","3C:F3:92","54:52:00","FC:15:97"].filter((e=>r.toUpperCase().toUpperCase().startsWith(e.substr(0,r.length)))).length>0||e.toLowerCase().indexOf(" virtual ")>-1||t.toLowerCase().indexOf(" virtual ")>-1||e.toLowerCase().indexOf("vethernet ")>-1||t.toLowerCase().indexOf("vethernet ")>-1||e.toLowerCase().startsWith("veth")||t.toLowerCase().startsWith("veth")||e.toLowerCase().startsWith("vboxnet")||t.toLowerCase().startsWith("vboxnet"))}function V(e,r,i){return"string"==typeof e&&(i=e,r=!0,e=null),"boolean"==typeof e&&(r=e,e=null,i=""),void 0===r&&(r=!0),i=""+(i=i||""),new Promise((s=>{t.nextTick((()=>{let l=n.networkInterfaces(),m=[],g=[],y=[],v=[];if(u||f||d||h)if(JSON.stringify(l)!==JSON.stringify(b)||r){const t=x();b=JSON.parse(JSON.stringify(l)),g=k(),g.forEach((e=>{({}).hasOwnProperty.call(l,e.iface)&&l[e.iface].forEach((function(t){"IPv4"!==t.family&&4!==t.family||(e.ip4subnet=t.netmask),"IPv6"!==t.family&&6!==t.family||(e.ip6subnet=t.netmask)}));let r="";const n=a.isPrototypePolluted()?"---":a.sanitizeShellString(e.iface);for(let e=0;e<=a.mathMin(n.length,2e3);e++)void 0!==n[e]&&(r+=n[e]);m.push({iface:e.iface,ifaceName:e.iface,default:e.iface===t,ip4:e.ip4,ip4subnet:e.ip4subnet||"",ip6:e.ip6,ip6subnet:e.ip6subnet||"",mac:e.mac,internal:e.internal,virtual:!e.internal&&N(e.iface,e.iface,e.mac),operstate:e.operstate,type:e.type,duplex:e.duplex,mtu:e.mtu,speed:e.speed,dhcp:M(r),dnsSuffix:"",ieee8021xAuth:"",ieee8021xState:"",carrierChanges:0})})),_=m,i.toLowerCase().indexOf("default")>=0&&(m=m.filter((e=>e.default)),m=m.length>0?m[0]:[]),e&&e(m),s(m)}else m=_,e&&e(m),s(m);if(c)if(JSON.stringify(l)!==JSON.stringify(b)||r){b=JSON.parse(JSON.stringify(l)),w=A();const r=x();for(let e in l){let n="",i="",s="",p="",f="",d="",h="",g=null,y=0,v=!1,b="",_="",x="",E="";if({}.hasOwnProperty.call(l,e)){let C=e;l[e].forEach((function(r){"IPv4"!==r.family&&4!==r.family||(n=r.address,i=r.netmask),"IPv6"!==r.family&&6!==r.family||s&&!s.match(/^fe80::/i)||(s=r.address,p=r.netmask),f=r.mac;const o=parseInt(t.versions.node.split("."),10);f.indexOf("00:00:0")>-1&&(c||u)&&!r.internal&&o>=8&&o<=11&&(0===Object.keys(S).length&&(S=O()),f=S[e]||"")}));let P=e.split(":")[0].trim().toLowerCase(),k="";const T=a.isPrototypePolluted()?"---":a.sanitizeShellString(P);for(let e=0;e<=a.mathMin(T.length,2e3);e++)void 0!==T[e]&&(k+=T[e]);const A=`echo -n "addr_assign_type: "; cat /sys/class/net/${k}/addr_assign_type 2>/dev/null; echo;\n            echo -n "address: "; cat /sys/class/net/${k}/address 2>/dev/null; echo;\n            echo -n "addr_len: "; cat /sys/class/net/${k}/addr_len 2>/dev/null; echo;\n            echo -n "broadcast: "; cat /sys/class/net/${k}/broadcast 2>/dev/null; echo;\n            echo -n "carrier: "; cat /sys/class/net/${k}/carrier 2>/dev/null; echo;\n            echo -n "carrier_changes: "; cat /sys/class/net/${k}/carrier_changes 2>/dev/null; echo;\n            echo -n "dev_id: "; cat /sys/class/net/${k}/dev_id 2>/dev/null; echo;\n            echo -n "dev_port: "; cat /sys/class/net/${k}/dev_port 2>/dev/null; echo;\n            echo -n "dormant: "; cat /sys/class/net/${k}/dormant 2>/dev/null; echo;\n            echo -n "duplex: "; cat /sys/class/net/${k}/duplex 2>/dev/null; echo;\n            echo -n "flags: "; cat /sys/class/net/${k}/flags 2>/dev/null; echo;\n            echo -n "gro_flush_timeout: "; cat /sys/class/net/${k}/gro_flush_timeout 2>/dev/null; echo;\n            echo -n "ifalias: "; cat /sys/class/net/${k}/ifalias 2>/dev/null; echo;\n            echo -n "ifindex: "; cat /sys/class/net/${k}/ifindex 2>/dev/null; echo;\n            echo -n "iflink: "; cat /sys/class/net/${k}/iflink 2>/dev/null; echo;\n            echo -n "link_mode: "; cat /sys/class/net/${k}/link_mode 2>/dev/null; echo;\n            echo -n "mtu: "; cat /sys/class/net/${k}/mtu 2>/dev/null; echo;\n            echo -n "netdev_group: "; cat /sys/class/net/${k}/netdev_group 2>/dev/null; echo;\n            echo -n "operstate: "; cat /sys/class/net/${k}/operstate 2>/dev/null; echo;\n            echo -n "proto_down: "; cat /sys/class/net/${k}/proto_down 2>/dev/null; echo;\n            echo -n "speed: "; cat /sys/class/net/${k}/speed 2>/dev/null; echo;\n            echo -n "tx_queue_len: "; cat /sys/class/net/${k}/tx_queue_len 2>/dev/null; echo;\n            echo -n "type: "; cat /sys/class/net/${k}/type 2>/dev/null; echo;\n            echo -n "wireless: "; cat /proc/net/wireless 2>/dev/null | grep ${k}; echo;\n            echo -n "wirelessspeed: "; iw dev ${k} link 2>&1 | grep bitrate; echo;`;let M=[];try{M=o(A).toString().split("\n");const e=L(k);v=j(k,e,w),b=R(e),_=D(e),x=(I=_)?"Not defined"==I?"Disabled":"Enabled":"Unknown"}catch(e){a.noop()}d=a.getValue(M,"duplex"),d=d.startsWith("cat")?"":d,h=parseInt(a.getValue(M,"mtu"),10);let V=parseInt(a.getValue(M,"speed"),10);g=isNaN(V)?null:V;let U=a.getValue(M,"wirelessspeed").split("tx bitrate: ");null===g&&2===U.length&&(V=parseFloat(U[1]),g=isNaN(V)?null:V),y=parseInt(a.getValue(M,"carrier_changes"),10);const B=a.getValue(M,"operstate");E="up"===B?a.getValue(M,"wireless").trim()?"wireless":"wired":"unknown",("lo"===k||k.startsWith("bond"))&&(E="virtual");let F=!(!l[e]||!l[e][0])&&l[e][0].internal;(e.toLowerCase().indexOf("loopback")>-1||C.toLowerCase().indexOf("loopback")>-1)&&(F=!0);const W=!F&&N(e,C,f);m.push({iface:k,ifaceName:C,default:P===r,ip4:n,ip4subnet:i,ip6:s,ip6subnet:p,mac:f,internal:F,virtual:W,operstate:B,type:E,duplex:d,mtu:h,speed:g,dhcp:v,dnsSuffix:b,ieee8021xAuth:_,ieee8021xState:x,carrierChanges:y})}}_=m,i.toLowerCase().indexOf("default")>=0&&(m=m.filter((e=>e.default)),m=m.length>0?m[0]:[]),e&&e(m),s(m)}else m=_,e&&e(m),s(m);var I;if(p)if(JSON.stringify(l)!==JSON.stringify(b)||r){b=JSON.parse(JSON.stringify(l));const r=x();E().then((function(n){n.forEach((e=>{let t=!1;Object.keys(l).forEach((r=>{t||l[r].forEach((r=>{Object.keys(r).indexOf("mac")>=0&&(t=r.mac===e.mac)}))})),t||(l[e.name]=[{mac:e.mac}])})),v=function(){try{return o("netsh lan show profiles",a.execOptsWin).split("\r\nProfile on interface")}catch(e){return 1===e.status&&e.stdout.includes("AutoConfig")?"Disabled":[]}}(),y=function(){let e={},t={primaryDNS:"",exitCode:0,ifaces:[]};try{return o("ipconfig /all",a.execOptsWin).split("\r\n\r\n").forEach(((r,n)=>{if(1==n){const e=r.split("\r\n").filter((e=>e.toUpperCase().includes("DNS"))),n=e[0].substring(e[0].lastIndexOf(":")+1);t.primaryDNS=n.trim(),t.primaryDNS||(t.primaryDNS="Not defined")}if(n>1)if(n%2==0){const t=r.substring(r.lastIndexOf(" ")+1).replace(":","");e.name=t}else{const n=r.split("\r\n").filter((e=>e.toUpperCase().includes("DNS"))),i=n[0].substring(n[0].lastIndexOf(":")+1);e.dnsSuffix=i.trim(),t.ifaces.push(e),e={}}})),t}catch(e){return{primaryDNS:"",exitCode:0,ifaces:[]}}}();for(let e in l){let i="";const o=a.isPrototypePolluted()?"---":a.sanitizeShellString(e);for(let e=0;e<=a.mathMin(o.length,2e3);e++)void 0!==o[e]&&(i+=o[e]);let s=e,p="",f="",d="",h="",g="",b="",w="",_=null,x=0,E="down",I=!1,k="",L="",T="",A="";if({}.hasOwnProperty.call(l,e)){let o=e;l[e].forEach((function(r){"IPv4"!==r.family&&4!==r.family||(p=r.address,f=r.netmask),"IPv6"!==r.family&&6!==r.family||d&&!d.match(/^fe80::/i)||(d=r.address,h=r.netmask),g=r.mac;const n=parseInt(t.versions.node.split("."),10);g.indexOf("00:00:0")>-1&&(c||u)&&!r.internal&&n>=8&&n<=11&&(0===Object.keys(S).length&&(S=O()),g=S[e]||"")})),k=C(y.ifaces,i);let a=!1;n.forEach((e=>{e.mac!==g||a||(s=e.iface||s,o=e.name,I=e.dhcp,E=e.operstate,_=e.speed,A=e.type,a=!0)})),(e.toLowerCase().indexOf("wlan")>=0||o.toLowerCase().indexOf("wlan")>=0||o.toLowerCase().indexOf("802.11n")>=0||o.toLowerCase().indexOf("wireless")>=0||o.toLowerCase().indexOf("wi-fi")>=0||o.toLowerCase().indexOf("wifi")>=0)&&(A="wireless");const j=P(A,i,v);L=j.protocol,T=j.state;let M=!(!l[e]||!l[e][0])&&l[e][0].internal;(e.toLowerCase().indexOf("loopback")>-1||o.toLowerCase().indexOf("loopback")>-1)&&(M=!0);const R=!M&&N(e,o,g);m.push({iface:s,ifaceName:o,default:s===r,ip4:p,ip4subnet:f,ip6:d,ip6subnet:h,mac:g,internal:M,virtual:R,operstate:E,type:A,duplex:b,mtu:w,speed:_,dhcp:I,dnsSuffix:k,ieee8021xAuth:L,ieee8021xState:T,carrierChanges:x})}}_=m,i.toLowerCase().indexOf("default")>=0&&(m=m.filter((e=>e.default)),m=m.length>0?m[0]:[]),e&&e(m),s(m)}))}else m=_,e&&e(m),s(m)}))}))}function U(e,t,r,n,i,o,s,a){let l={iface:e,operstate:n,rx_bytes:t,rx_dropped:i,rx_errors:o,tx_bytes:r,tx_dropped:s,tx_errors:a,rx_sec:null,tx_sec:null,ms:0};return y[e]&&y[e].ms?(l.ms=Date.now()-y[e].ms,l.rx_sec=t-y[e].rx_bytes>=0?(t-y[e].rx_bytes)/(l.ms/1e3):0,l.tx_sec=r-y[e].tx_bytes>=0?(r-y[e].tx_bytes)/(l.ms/1e3):0,y[e].rx_bytes=t,y[e].tx_bytes=r,y[e].rx_sec=l.rx_sec,y[e].tx_sec=l.tx_sec,y[e].ms=Date.now(),y[e].last_ms=l.ms,y[e].operstate=n):(y[e]||(y[e]={}),y[e].rx_bytes=t,y[e].tx_bytes=r,y[e].rx_sec=null,y[e].tx_sec=null,y[e].ms=Date.now(),y[e].last_ms=0,y[e].operstate=n),l}function B(e){return new Promise((r=>{t.nextTick((()=>{let t="";const n=a.isPrototypePolluted()?"---":a.sanitizeShellString(e);for(let e=0;e<=a.mathMin(n.length,2e3);e++)void 0!==n[e]&&(t+=n[e]);let o,l,m,g={iface:t,operstate:"unknown",rx_bytes:0,rx_dropped:0,rx_errors:0,tx_bytes:0,tx_dropped:0,tx_errors:0,rx_sec:null,tx_sec:null,ms:0},v="unknown",b=0,w=0,_=0,S=0,x=0,O=0;if(!y[t]||y[t]&&!y[t].ms||y[t]&&y[t].ms&&Date.now()-y[t].ms>=500){if(c&&(s.existsSync("/sys/class/net/"+t)?(o="cat /sys/class/net/"+t+"/operstate; cat /sys/class/net/"+t+"/statistics/rx_bytes; cat /sys/class/net/"+t+"/statistics/tx_bytes; cat /sys/class/net/"+t+"/statistics/rx_dropped; cat /sys/class/net/"+t+"/statistics/rx_errors; cat /sys/class/net/"+t+"/statistics/tx_dropped; cat /sys/class/net/"+t+"/statistics/tx_errors; ",i(o,(function(e,n){e||(l=n.toString().split("\n"),v=l[0].trim(),b=parseInt(l[1],10),w=parseInt(l[2],10),_=parseInt(l[3],10),S=parseInt(l[4],10),x=parseInt(l[5],10),O=parseInt(l[6],10),g=U(t,b,w,v,_,S,x,O)),r(g)}))):r(g)),(f||d||h)&&(o="netstat -ibndI "+t,i(o,(function(e,n){if(!e){l=n.toString().split("\n");for(let e=1;e<l.length;e++){const t=l[e].replace(/ +/g," ").split(" ");t&&t[0]&&t[7]&&t[10]&&(b+=parseInt(t[7]),"-"!==t[6].trim()&&(_+=parseInt(t[6])),"-"!==t[5].trim()&&(S+=parseInt(t[5])),w+=parseInt(t[10]),"-"!==t[12].trim()&&(x+=parseInt(t[12])),"-"!==t[9].trim()&&(O+=parseInt(t[9])),v="up")}g=U(t,b,w,v,_,S,x,O)}r(g)}))),u&&(o="ifconfig "+t+' | grep "status"',i(o,(function(e,n){g.operstate=(n.toString().split(":")[1]||"").trim(),g.operstate=(g.operstate||"").toLowerCase(),g.operstate="active"===g.operstate?"up":"inactive"===g.operstate?"down":"unknown",o="netstat -bdI "+t,i(o,(function(e,n){if(!e&&(l=n.toString().split("\n"),l.length>1&&""!==l[1].trim())){m=l[1].replace(/ +/g," ").split(" ");const e=m.length>11?1:0;b=parseInt(m[e+5]),_=parseInt(m[e+10]),S=parseInt(m[e+4]),w=parseInt(m[e+8]),x=parseInt(m[e+10]),O=parseInt(m[e+7]),g=U(t,b,w,g.operstate,_,S,x,O)}r(g)}))}))),p){let e=[],n=t;a.powerShell("Get-CimInstance Win32_PerfRawData_Tcpip_NetworkInterface | select Name,BytesReceivedPersec,PacketsReceivedErrors,PacketsReceivedDiscarded,BytesSentPersec,PacketsOutboundErrors,PacketsOutboundDiscarded | fl").then(((i,o)=>{if(!o){const t=i.toString().split(/\n\s*\n/);e=function(e){let t=[];for(let r in e)if({}.hasOwnProperty.call(e,r)&&""!==e[r].trim()){let n=e[r].trim().split("\r\n");t.push({name:a.getValue(n,"Name",":").replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase(),rx_bytes:parseInt(a.getValue(n,"BytesReceivedPersec",":"),10),rx_errors:parseInt(a.getValue(n,"PacketsReceivedErrors",":"),10),rx_dropped:parseInt(a.getValue(n,"PacketsReceivedDiscarded",":"),10),tx_bytes:parseInt(a.getValue(n,"BytesSentPersec",":"),10),tx_errors:parseInt(a.getValue(n,"PacketsOutboundErrors",":"),10),tx_dropped:parseInt(a.getValue(n,"PacketsOutboundDiscarded",":"),10)})}return t}(t)}V(!1).then((i=>{b=0,w=0,e.forEach((e=>{i.forEach((r=>{r.iface.toLowerCase()!==t.toLowerCase()&&r.mac.toLowerCase()!==t.toLowerCase()&&r.ip4.toLowerCase()!==t.toLowerCase()&&r.ip6.toLowerCase()!==t.toLowerCase()&&r.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()!==t.replace(/[()[\] ]+/g,"").replace("#","_").toLowerCase()||r.ifaceName.replace(/[()[\] ]+/g,"").replace(/#|\//g,"_").toLowerCase()!==e.name||(n=r.iface,b=e.rx_bytes,_=e.rx_dropped,S=e.rx_errors,w=e.tx_bytes,x=e.tx_dropped,O=e.tx_errors,v=r.operstate)}))})),b&&w&&(g=U(n,parseInt(b),parseInt(w),v,_,S,x,O)),r(g)}))}))}}else g.rx_bytes=y[t].rx_bytes,g.tx_bytes=y[t].tx_bytes,g.rx_sec=y[t].rx_sec,g.tx_sec=y[t].tx_sec,g.ms=y[t].last_ms,g.operstate=y[t].operstate,r(g)}))}))}function F(e,t){let r="";e.forEach((e=>{const n=e.split(" ");(parseInt(n[0],10)||-1)===t&&(n.shift(),r=n.join(" ").split(":")[0])})),r=r.split(" -")[0];const n=r.split("/");return n[n.length-1]}r.getDefaultNetworkInterface=x,r.networkInterfaceDefault=function(e){return new Promise((r=>{t.nextTick((()=>{let t=x();e&&e(t),r(t)}))}))},r.networkInterfaces=V,r.networkStats=function e(r,n){let i=[];return new Promise((o=>{t.nextTick((()=>{if(a.isFunction(r)&&!n)n=r,i=[x()];else{if("string"!=typeof r&&void 0!==r)return n&&n([]),o([]);(r=r||x()).__proto__.toLowerCase=a.stringToLower,r.__proto__.replace=a.stringReplace,r.__proto__.trim=a.stringTrim,r=r.trim().toLowerCase().replace(/,+/g,"|"),i=r.split("|")}const t=[],s=[];if(i.length&&"*"===i[0].trim())i=[],V(!1).then((t=>{for(let e of t)i.push(e.iface);e(i.join(",")).then((e=>{n&&n(e),o(e)}))}));else{for(let e of i)s.push(B(e.trim()));s.length?Promise.all(s).then((e=>{n&&n(e),o(e)})):(n&&n(t),o(t))}}))}))},r.networkConnections=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(c||f||d||h){let n='export LC_ALL=C; netstat -tunap | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL';(f||d||h)&&(n='export LC_ALL=C; netstat -na | grep "ESTABLISHED\\|SYN_SENT\\|SYN_RECV\\|FIN_WAIT1\\|FIN_WAIT2\\|TIME_WAIT\\|CLOSE\\|CLOSE_WAIT\\|LAST_ACK\\|LISTEN\\|CLOSING\\|UNKNOWN"; unset LC_ALL'),i(n,{maxBuffer:2048e4},(function(o,s){let a=s.toString().split("\n");!o&&(a.length>1||""!=a[0])?(a.forEach((function(e){if((e=e.replace(/ +/g," ").split(" ")).length>=7){let r=e[3],n="",i=e[3].split(":");i.length>1&&(n=i[i.length-1],i.pop(),r=i.join(":"));let o=e[4],s="",a=e[4].split(":");a.length>1&&(s=a[a.length-1],a.pop(),o=a.join(":"));let l=e[5],c=e[6].split("/");l&&t.push({protocol:e[0],localAddress:r,localPort:n,peerAddress:o,peerPort:s,state:l,pid:c[0]&&"-"!==c[0]?parseInt(c[0],10):null,process:c[1]?c[1].split(" ")[0].split(":")[0]:""})}})),e&&e(t),r(t)):(n='ss -tunap | grep "ESTAB\\|SYN-SENT\\|SYN-RECV\\|FIN-WAIT1\\|FIN-WAIT2\\|TIME-WAIT\\|CLOSE\\|CLOSE-WAIT\\|LAST-ACK\\|LISTEN\\|CLOSING"',i(n,{maxBuffer:2048e4},(function(n,i){if(!n){i.toString().split("\n").forEach((function(e){if((e=e.replace(/ +/g," ").split(" ")).length>=6){let r=e[4],n="",i=e[4].split(":");i.length>1&&(n=i[i.length-1],i.pop(),r=i.join(":"));let o=e[5],s="",a=e[5].split(":");a.length>1&&(s=a[a.length-1],a.pop(),o=a.join(":"));let l=e[1];"ESTAB"===l&&(l="ESTABLISHED"),"TIME-WAIT"===l&&(l="TIME_WAIT");let c=null,u="";if(e.length>=7&&e[6].indexOf("users:")>-1){let t=e[6].replace('users:(("',"").replace(/"/g,"").split(",");t.length>2&&(u=t[0].split(" ")[0].split(":")[0],c=parseInt(t[1],10))}l&&t.push({protocol:e[0],localAddress:r,localPort:n,peerAddress:o,peerPort:s,state:l,pid:c,process:u})}}))}e&&e(t),r(t)})))}))}if(u){const n="ESTABLISHED|SYN_SENT|SYN_RECV|FIN_WAIT1|FIN_WAIT2|TIME_WAIT|CLOSE|CLOSE_WAIT|LAST_ACK|LISTEN|CLOSING|UNKNOWN";i('netstat -natv | grep "tcp4\\|tcp6\\|udp4\\|udp6"',{maxBuffer:2048e4},(function(o,s){o||i("ps -axo pid,command",{maxBuffer:2048e4},(function(i,o){let a=o.toString().split("\n");a=a.map((e=>e.trim().replace(/ +/g," "))),s.toString().split("\n").forEach((function(e){if((e=e.replace(/ +/g," ").split(" ")).length>=8){let r=e[3],i="",o=e[3].split(".");o.length>1&&(i=o[o.length-1],o.pop(),r=o.join("."));let s=e[4],l="",c=e[4].split(".");c.length>1&&(l=c[c.length-1],c.pop(),s=c.join("."));const u=n.indexOf(e[5])>=0;let p=u?e[5]:"UNKNOWN",f=parseInt(e[8+(u?0:-1)],10);p&&t.push({protocol:e[0],localAddress:r,localPort:i,peerAddress:s,peerPort:l,state:p,pid:f,process:F(a,f)})}})),e&&e(t),r(t)}))}))}if(p){let n="netstat -nao";try{i(n,a.execOptsWin,(function(n,i){if(!n){i.toString().split("\r\n").forEach((function(e){if((e=e.trim().replace(/ +/g," ").split(" ")).length>=4){let r=e[1],n="",i=e[1].split(":");i.length>1&&(n=i[i.length-1],i.pop(),r=i.join(":")),r=r.replace(/\[/g,"").replace(/\]/g,"");let o=e[2],s="",l=e[2].split(":");l.length>1&&(s=l[l.length-1],l.pop(),o=l.join(":")),o=o.replace(/\[/g,"").replace(/\]/g,"");let c=a.toInt(e[4]),u=e[3];"HERGESTELLT"===u&&(u="ESTABLISHED"),u.startsWith("ABH")&&(u="LISTEN"),"SCHLIESSEN_WARTEN"===u&&(u="CLOSE_WAIT"),"WARTEND"===u&&(u="TIME_WAIT"),"SYN_GESENDET"===u&&(u="SYN_SENT"),"LISTENING"===u&&(u="LISTEN"),"SYN_RECEIVED"===u&&(u="SYN_RECV"),"FIN_WAIT_1"===u&&(u="FIN_WAIT1"),"FIN_WAIT_2"===u&&(u="FIN_WAIT2"),"udp"!==e[0].toLowerCase()&&u?t.push({protocol:e[0].toLowerCase(),localAddress:r,localPort:n,peerAddress:o,peerPort:s,state:u,pid:c,process:""}):"udp"===e[0].toLowerCase()&&t.push({protocol:e[0].toLowerCase(),localAddress:r,localPort:n,peerAddress:o,peerPort:s,state:"",pid:parseInt(e[3],10),process:""})}})),e&&e(t),r(t)}}))}catch(n){e&&e(t),r(t)}}}))}))},r.networkGatewayDefault=function(e){return new Promise((r=>{t.nextTick((()=>{let t="";if(c||f||d||h){let n="ip route get 1";try{i(n,{maxBuffer:2048e4},(function(n,i){if(n)e&&e(t),r(t);else{let n=i.toString().split("\n");let o=(n&&n[0]?n[0]:"").split(" via ");o&&o[1]&&(o=o[1].split(" "),t=o[0]),e&&e(t),r(t)}}))}catch(n){e&&e(t),r(t)}}if(u){let n="route -n get default";try{i(n,{maxBuffer:2048e4},(function(o,s){if(!o){const e=s.toString().split("\n").map((e=>e.trim()));t=a.getValue(e,"gateway")}t?(e&&e(t),r(t)):(n="netstat -rn | awk '/default/ {print $2}'",i(n,{maxBuffer:2048e4},(function(n,i){const o=i.toString().split("\n").map((e=>e.trim()));t=o.find((e=>/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e))),e&&e(t),r(t)})))}))}catch(n){e&&e(t),r(t)}}if(p)try{i("netstat -r",a.execOptsWin,(function(i,o){o.toString().split(n.EOL).forEach((e=>{if((e=e.replace(/\s+/g," ").trim()).indexOf("0.0.0.0 0.0.0.0")>-1&&!/[a-zA-Z]/.test(e)){const r=e.split(" ");r.length>=5&&r[r.length-3].indexOf(".")>-1&&(t=r[r.length-3])}})),t?(e&&e(t),r(t)):a.powerShell("Get-CimInstance -ClassName Win32_IP4RouteTable | Where-Object { $_.Destination -eq '0.0.0.0' -and $_.Mask -eq '0.0.0.0' }").then((n=>{let i=n.toString().split("\r\n");i.length>1&&!t&&(t=a.getValue(i,"NextHop"),e&&e(t),r(t))}))}))}catch(n){e&&e(t),r(t)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178}],271:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("fs"),o=e("./util"),s=e("child_process").exec,a=e("child_process").execSync;let l=t.platform;const c="linux"===l||"android"===l,u="darwin"===l,p="win32"===l,f="freebsd"===l,d="openbsd"===l,h="netbsd"===l,m="sunos"===l;function g(e){e=(e=e||"").toLowerCase();let t=l;return p?t="windows":-1!==e.indexOf("mac os")?t="apple":-1!==e.indexOf("arch")?t="arch":-1!==e.indexOf("centos")?t="centos":-1!==e.indexOf("coreos")?t="coreos":-1!==e.indexOf("debian")?t="debian":-1!==e.indexOf("deepin")?t="deepin":-1!==e.indexOf("elementary")?t="elementary":-1!==e.indexOf("fedora")?t="fedora":-1!==e.indexOf("gentoo")?t="gentoo":-1!==e.indexOf("mageia")?t="mageia":-1!==e.indexOf("mandriva")?t="mandriva":-1!==e.indexOf("manjaro")?t="manjaro":-1!==e.indexOf("mint")?t="mint":-1!==e.indexOf("mx")?t="mx":-1!==e.indexOf("openbsd")?t="openbsd":-1!==e.indexOf("freebsd")?t="freebsd":-1!==e.indexOf("opensuse")?t="opensuse":-1!==e.indexOf("pclinuxos")?t="pclinuxos":-1!==e.indexOf("puppy")?t="puppy":-1!==e.indexOf("raspbian")?t="raspbian":-1!==e.indexOf("reactos")?t="reactos":-1!==e.indexOf("redhat")?t="redhat":-1!==e.indexOf("slackware")?t="slackware":-1!==e.indexOf("sugar")?t="sugar":-1!==e.indexOf("steam")?t="steam":-1!==e.indexOf("suse")?t="suse":-1!==e.indexOf("mate")?t="ubuntu-mate":-1!==e.indexOf("lubuntu")?t="lubuntu":-1!==e.indexOf("xubuntu")?t="xubuntu":-1!==e.indexOf("ubuntu")?t="ubuntu":-1!==e.indexOf("solaris")?t="solaris":-1!==e.indexOf("tails")?t="tails":-1!==e.indexOf("feren")?t="ferenos":-1!==e.indexOf("robolinux")?t="robolinux":c&&e&&(t=e.toLowerCase().trim().replace(/\s+/g,"-")),t}function y(){let e=n.hostname;if(c||u)try{e=a("hostname -f").toString().split(n.EOL)[0]}catch(e){o.noop()}if(f||d||h)try{e=a("hostname").toString().split(n.EOL)[0]}catch(e){o.noop()}if(p)try{e=a("echo %COMPUTERNAME%.%USERDNSDOMAIN%",o.execOptsWin).toString().replace(".%USERDNSDOMAIN%","").split(n.EOL)[0]}catch(e){o.noop()}return e}function v(){let e=[];try{const t=n.networkInterfaces();for(let r in t)({}).hasOwnProperty.call(t,r)&&t[r].forEach((function(t){if(t&&t.mac&&"00:00:00:00:00:00"!==t.mac){const r=t.mac.toLowerCase();-1===e.indexOf(r)&&e.push(r)}}));e=e.sort((function(e,t){return e<t?-1:e>t?1:0}))}catch(t){e.push("00:00:00:00:00:00")}return e}function b(e){return new Promise((r=>{t.nextTick((()=>{let n,a={os:"",hardware:"",macs:v()};if(u&&s("system_profiler SPHardwareDataType -json",(function(t,n){if(!t)try{const e=JSON.parse(n.toString());if(e.SPHardwareDataType&&e.SPHardwareDataType.length>0){const t=e.SPHardwareDataType[0];a.os=t.platform_UUID.toLowerCase(),a.hardware=t.serial_number}}catch(e){o.noop()}e&&e(a),r(a)})),c){s('echo -n "os: "; cat /var/lib/dbus/machine-id 2> /dev/null; echo;\necho -n "os: "; cat /etc/machine-id 2> /dev/null; echo;\necho -n "hardware: "; cat /sys/class/dmi/id/product_uuid 2> /dev/null; echo;',(function(t,n){const s=n.toString().split("\n");if(a.os=o.getValue(s,"os").toLowerCase(),a.hardware=o.getValue(s,"hardware").toLowerCase(),!a.hardware){const e=i.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split("\n"),t=o.getValue(e,"serial");a.hardware=t||""}e&&e(a),r(a)}))}if((f||d||h)&&s("sysctl -i kern.hostid kern.hostuuid",(function(t,n){const i=n.toString().split("\n");a.os=o.getValue(i,"kern.hostid",":").toLowerCase(),a.hardware=o.getValue(i,"kern.hostuuid",":").toLowerCase(),a.os.indexOf("unknown")>=0&&(a.os=""),a.hardware.indexOf("unknown")>=0&&(a.hardware=""),e&&e(a),r(a)})),p){let i="%windir%\\System32";"ia32"===t.arch&&Object.prototype.hasOwnProperty.call(t.env,"PROCESSOR_ARCHITEW6432")&&(i="%windir%\\sysnative\\cmd.exe /c %windir%\\System32"),o.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select UUID | fl").then((t=>{let l=t.split("\r\n");a.hardware=o.getValue(l,"uuid",":").toLowerCase(),s(`${i}\\reg query "HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography" /v MachineGuid`,o.execOptsWin,(function(t,i){n=i.toString().split("\n\r")[0].split("REG_SZ"),a.os=n.length>1?n[1].replace(/\r+|\n+|\s+/gi,"").toLowerCase():"",e&&e(a),r(a)}))}))}}))}))}r.time=function(){let e=(new Date).toString().split(" ");return{current:Date.now(),uptime:n.uptime(),timezone:e.length>=7?e[5]:"",timezoneName:Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:e.length>=7?e.slice(6).join(" ").replace(/\(/g,"").replace(/\)/g,""):""}},r.osInfo=function(e){return new Promise((r=>{t.nextTick((()=>{let a={platform:"win32"===l?"Windows":l,distro:"unknown",release:"unknown",codename:"",kernel:n.release(),arch:n.arch(),hostname:n.hostname(),fqdn:y(),codepage:"",logofile:"",serial:"",build:"",servicepack:"",uefi:!1};if(c&&s("cat /etc/*-release; cat /usr/lib/os-release; cat /etc/openwrt_release",(function(n,l){let c={};l.toString().split("\n").forEach((function(e){-1!==e.indexOf("=")&&(c[e.split("=")[0].trim().toUpperCase()]=e.split("=")[1].trim())}));let u=(c.VERSION||"").replace(/"/g,""),p=(c.DISTRIB_CODENAME||c.VERSION_CODENAME||"").replace(/"/g,"");u.indexOf("(")>=0&&(p=u.split("(")[1].replace(/[()]/g,"").trim(),u=u.split("(")[0].trim()),a.distro=(c.DISTRIB_ID||c.NAME||"unknown").replace(/"/g,""),a.logofile=g(a.distro),a.release=(u||c.DISTRIB_RELEASE||c.VERSION_ID||"unknown").replace(/"/g,""),a.codename=p,a.codepage=o.getCodepage(),a.build=(c.BUILD_ID||"").replace(/"/g,"").trim(),new Promise((e=>{t.nextTick((()=>{i.stat("/sys/firmware/efi",(function(t){if(!t)return e(!0);s('dmesg | grep -E "EFI v"',(function(t,r){if(!t){const t=r.toString().split("\n");return e(t.length>0)}return e(!1)}))}))}))})).then((t=>{a.uefi=t,b().then((t=>{a.serial=t.os,e&&e(a),r(a)}))}))})),(f||d||h)&&s("sysctl kern.ostype kern.osrelease kern.osrevision kern.hostuuid machdep.bootmethod kern.geom.confxml",(function(t,n){let i=n.toString().split("\n");const s=o.getValue(i,"kern.ostype"),l=o.getValue(i,"kern.ostype"),c=o.getValue(i,"kern.osrelease").split("-")[0],u=o.getValue(i,"kern.uuid"),p=o.getValue(i,"machdep.bootmethod"),f=n.toString().indexOf("<type>efi</type>")>=0,d=p?p.toLowerCase().indexOf("uefi")>=0:f||null;a.distro=s||a.distro,a.logofile=l||a.logofile,a.release=c||a.release,a.serial=u||a.serial,a.codename="",a.codepage=o.getCodepage(),a.uefi=d||null,e&&e(a),r(a)})),u&&s("sw_vers; sysctl kern.ostype kern.osrelease kern.osrevision kern.uuid",(function(t,n){let i=n.toString().split("\n");a.serial=o.getValue(i,"kern.uuid"),a.distro=o.getValue(i,"ProductName"),a.release=o.getValue(i,"ProductVersion"),a.build=o.getValue(i,"BuildVersion"),a.logofile=g(a.distro),a.codename="macOS",a.codename=a.release.indexOf("10.4")>-1?"Mac OS X Tiger":a.codename,a.codename=a.release.indexOf("10.5")>-1?"Mac OS X Leopard":a.codename,a.codename=a.release.indexOf("10.6")>-1?"Mac OS X Snow Leopard":a.codename,a.codename=a.release.indexOf("10.7")>-1?"Mac OS X Lion":a.codename,a.codename=a.release.indexOf("10.8")>-1?"OS X Mountain Lion":a.codename,a.codename=a.release.indexOf("10.9")>-1?"OS X Mavericks":a.codename,a.codename=a.release.indexOf("10.10")>-1?"OS X Yosemite":a.codename,a.codename=a.release.indexOf("10.11")>-1?"OS X El Capitan":a.codename,a.codename=a.release.indexOf("10.12")>-1?"macOS Sierra":a.codename,a.codename=a.release.indexOf("10.13")>-1?"macOS High Sierra":a.codename,a.codename=a.release.indexOf("10.14")>-1?"macOS Mojave":a.codename,a.codename=a.release.indexOf("10.15")>-1?"macOS Catalina":a.codename,a.codename=a.release.startsWith("11.")?"macOS Big Sur":a.codename,a.codename=a.release.startsWith("12.")?"macOS Monterey":a.codename,a.codename=a.release.startsWith("13.")?"macOS Ventura":a.codename,a.uefi=!0,a.codepage=o.getCodepage(),e&&e(a),r(a)})),m&&(a.release=a.kernel,s("uname -o",(function(t,n){let i=n.toString().split("\n");a.distro=i[0],a.logofile=g(a.distro),e&&e(a),r(a)}))),p){a.logofile=g(),a.release=a.kernel;try{const n=[];n.push(o.powerShell("Get-CimInstance Win32_OperatingSystem | select Caption,SerialNumber,BuildNumber,ServicePackMajorVersion,ServicePackMinorVersion | fl")),n.push(o.powerShell("(Get-CimInstance Win32_ComputerSystem).HypervisorPresent")),n.push(o.powerShell("Add-Type -AssemblyName System.Windows.Forms; [System.Windows.Forms.SystemInformation]::TerminalServerSession")),o.promiseAll(n).then((n=>{let i=n.results[0]?n.results[0].toString().split("\r\n"):[""];a.distro=o.getValue(i,"Caption",":").trim(),a.serial=o.getValue(i,"SerialNumber",":").trim(),a.build=o.getValue(i,"BuildNumber",":").trim(),a.servicepack=o.getValue(i,"ServicePackMajorVersion",":").trim()+"."+o.getValue(i,"ServicePackMinorVersion",":").trim(),a.codepage=o.getCodepage();const l=n.results[1]?n.results[1].toString().toLowerCase():"";a.hypervisor=-1!==l.indexOf("true");const c=n.results[2]?n.results[2].toString():"";a.remoteSession=c.toString().toLowerCase().indexOf("true")>=0,new Promise((e=>{t.nextTick((()=>{try{s('findstr /C:"Detected boot environment" "%windir%\\Panther\\setupact.log"',o.execOptsWin,(function(t,r){if(!t){const t=r.toString().split("\n\r")[0];return e(t.toLowerCase().indexOf("efi")>=0)}s("echo %firmware_type%",o.execOptsWin,(function(t,r){if(t)return e(!1);{const t=r.toString()||"";return e(t.toLowerCase().indexOf("efi")>=0)}}))}))}catch(t){return e(!1)}}))})).then((t=>{a.uefi=t,e&&e(a),r(a)}))}))}catch(t){e&&e(a),r(a)}}}))}))},r.versions=function(e,r){let l={kernel:n.release(),openssl:"",systemOpenssl:"",systemOpensslLib:"",node:t.versions.node,v8:t.versions.v8,npm:"",yarn:"",pm2:"",gulp:"",grunt:"",git:"",tsc:"",mysql:"",redis:"",mongodb:"",apache:"",nginx:"",php:"",docker:"",postfix:"",postgresql:"",perl:"",python:"",python3:"",pip:"",pip3:"",java:"",gcc:"",virtualbox:"",bash:"",zsh:"",fish:"",powershell:"",dotnet:""};return new Promise((n=>{t.nextTick((()=>{if(o.isFunction(e)&&!r)r=e,e="*";else if("string"!=typeof(e=e||"*"))return r&&r({}),n({});const f=function(e){if("*"===e)return{versions:l,counter:30};if(!Array.isArray(e)){e=(e=e.trim().toLowerCase().replace(/,+/g,"|").replace(/ /g,"|")).split("|");const t={versions:{},counter:0};return e.forEach((e=>{if(e)for(let r in l)({}).hasOwnProperty.call(l,r)&&(r.toLowerCase()!==e.toLowerCase()||{}.hasOwnProperty.call(t.versions,r)||(t.versions[r]=l[r],"openssl"===r&&(t.versions.systemOpenssl="",t.versions.systemOpensslLib=""),t.versions[r]||t.counter++))})),t}}(e);let d=f.counter,h=function(){0==--d&&(r&&r(f.versions),n(f.versions))},m="";try{if({}.hasOwnProperty.call(f.versions,"openssl")&&(f.versions.openssl=t.versions.openssl,s("openssl version",(function(e,t){if(!e){let e=t.toString().split("\n")[0].trim().split(" ");f.versions.systemOpenssl=e.length>0?e[1]:e[0],f.versions.systemOpensslLib=e.length>0?e[0]:"openssl"}h()}))),{}.hasOwnProperty.call(f.versions,"npm")&&s("npm -v",(function(e,t){e||(f.versions.npm=t.toString().split("\n")[0]),h()})),{}.hasOwnProperty.call(f.versions,"pm2")&&(m="pm2",p&&(m+=".cmd"),s(`${m} -v`,(function(e,t){if(!e){let e=t.toString().split("\n")[0].trim();e.startsWith("[PM2]")||(f.versions.pm2=e)}h()}))),{}.hasOwnProperty.call(f.versions,"yarn")&&s("yarn --version",(function(e,t){e||(f.versions.yarn=t.toString().split("\n")[0]),h()})),{}.hasOwnProperty.call(f.versions,"gulp")&&(m="gulp",p&&(m+=".cmd"),s(`${m} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.gulp=(e.toLowerCase().split("version")[1]||"").trim()}h()}))),{}.hasOwnProperty.call(f.versions,"tsc")&&(m="tsc",p&&(m+=".cmd"),s(`${m} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.tsc=(e.toLowerCase().split("version")[1]||"").trim()}h()}))),{}.hasOwnProperty.call(f.versions,"grunt")&&(m="grunt",p&&(m+=".cmd"),s(`${m} --version`,(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.grunt=(e.toLowerCase().split("cli v")[1]||"").trim()}h()}))),{}.hasOwnProperty.call(f.versions,"git"))if(u){const e=i.existsSync("/usr/local/Cellar/git")||i.existsSync("/opt/homebrew/bin/git");o.darwinXcodeExists()||e?s("git --version",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";e=(e.toLowerCase().split("version")[1]||"").trim(),f.versions.git=(e.split(" ")[0]||"").trim()}h()})):h()}else s("git --version",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";e=(e.toLowerCase().split("version")[1]||"").trim(),f.versions.git=(e.split(" ")[0]||"").trim()}h()}));if({}.hasOwnProperty.call(f.versions,"apache")&&s("apachectl -v 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(":");f.versions.apache=e.length>1?e[1].replace("Apache","").replace("/","").split("(")[0].trim():""}h()})),{}.hasOwnProperty.call(f.versions,"nginx")&&s("nginx -v 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.nginx=(e.toLowerCase().split("/")[1]||"").trim()}h()})),{}.hasOwnProperty.call(f.versions,"mysql")&&s("mysql -V",(function(e,t){if(!e){let e=t.toString().split("\n")[0]||"";if(e=e.toLowerCase(),e.indexOf(",")>-1){e=(e.split(",")[0]||"").trim();const t=e.split(" ");f.versions.mysql=(t[t.length-1]||"").trim()}else e.indexOf(" ver ")>-1&&(e=e.split(" ver ")[1],f.versions.mysql=e.split(" ")[0])}h()})),{}.hasOwnProperty.call(f.versions,"php")&&s("php -v",(function(e,t){if(!e){let e=(t.toString().split("\n")[0]||"").split("(");e[0].indexOf("-")&&(e=e[0].split("-")),f.versions.php=e[0].replace(/[^0-9.]/g,"")}h()})),{}.hasOwnProperty.call(f.versions,"redis")&&s("redis-server --version",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.redis=o.getValue(e,"v","=",!0)}h()})),{}.hasOwnProperty.call(f.versions,"docker")&&s("docker --version",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.docker=e.length>2&&e[2].endsWith(",")?e[2].slice(0,-1):""}h()})),{}.hasOwnProperty.call(f.versions,"postfix")&&s("postconf -d | grep mail_version",(function(e,t){if(!e){const e=t.toString().split("\n")||[];f.versions.postfix=o.getValue(e,"mail_version","=",!0)}h()})),{}.hasOwnProperty.call(f.versions,"mongodb")&&s("mongod --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.mongodb=(e.toLowerCase().split(",")[0]||"").replace(/[^0-9.]/g,"")}h()})),{}.hasOwnProperty.call(f.versions,"postgresql")&&(c?s("locate bin/postgres",(function(e,t){if(e)s("psql -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];f.versions.postgresql=e.length?e[e.length-1]:"",f.versions.postgresql=f.versions.postgresql.split("-")[0]}h()}));else{const e=t.toString().split("\n").sort();e.length?s(e[e.length-1]+" -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];f.versions.postgresql=e.length?e[e.length-1]:""}h()})):h()}})):p?o.powerShell("Get-CimInstance Win32_Service | select caption | fl").then((e=>{e.split(/\n\s*\n/).forEach((e=>{if(""!==e.trim()){let t=e.trim().split("\r\n"),r=o.getValue(t,"caption",":",!0).toLowerCase();if(r.indexOf("postgresql")>-1){const e=r.split(" server ");e.length>1&&(f.versions.postgresql=e[1])}}})),h()})):s("postgres -V",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" ")||[];f.versions.postgresql=e.length?e[e.length-1]:""}h()}))),{}.hasOwnProperty.call(f.versions,"perl")&&s("perl -v",(function(e,t){if(!e){const e=t.toString().split("\n")||"";for(;e.length>0&&""===e[0].trim();)e.shift();e.length>0&&(f.versions.perl=e[0].split("(").pop().split(")")[0].replace("v",""))}h()})),{}.hasOwnProperty.call(f.versions,"python"))if(u){const e=a("sw_vers").toString().split("\n"),t=o.getValue(e,"ProductVersion",":"),r=i.existsSync("/usr/local/Cellar/python"),n=i.existsSync("/opt/homebrew/bin/python");if(o.darwinXcodeExists()&&o.semverCompare("12.0.1",t)<0||r||n){s(r?"/usr/local/Cellar/python -V 2>&1":n?"/opt/homebrew/bin/python -V 2>&1":"python -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.python=e.toLowerCase().replace("python","").trim()}h()}))}else h()}else s("python -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.python=e.toLowerCase().replace("python","").trim()}h()}));if({}.hasOwnProperty.call(f.versions,"python3"))if(u){const e=i.existsSync("/usr/local/Cellar/python3")||i.existsSync("/opt/homebrew/bin/python3");o.darwinXcodeExists()||e?s("python3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.python3=e.toLowerCase().replace("python","").trim()}h()})):h()}else s("python3 -V 2>&1",(function(e,t){if(!e){const e=t.toString().split("\n")[0]||"";f.versions.python3=e.toLowerCase().replace("python","").trim()}h()}));if({}.hasOwnProperty.call(f.versions,"pip"))if(u){const e=i.existsSync("/usr/local/Cellar/pip")||i.existsSync("/opt/homebrew/bin/pip");o.darwinXcodeExists()||e?s("pip -V 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.pip=e.length>=2?e[1]:""}h()})):h()}else s("pip -V 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.pip=e.length>=2?e[1]:""}h()}));if({}.hasOwnProperty.call(f.versions,"pip3"))if(u){const e=i.existsSync("/usr/local/Cellar/pip3")||i.existsSync("/opt/homebrew/bin/pip3");o.darwinXcodeExists()||e?s("pip3 -V 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.pip3=e.length>=2?e[1]:""}h()})):h()}else s("pip3 -V 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split(" ");f.versions.pip3=e.length>=2?e[1]:""}h()}));({}).hasOwnProperty.call(f.versions,"java")&&(u?s("/usr/libexec/java_home -V 2>&1",(function(e,t){e||-1!==t.toString().toLowerCase().indexOf("no java runtime")?h():s("java -version 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split('"');f.versions.java=3===e.length?e[1].trim():""}h()}))})):s("java -version 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split('"');f.versions.java=3===e.length?e[1].trim():""}h()}))),{}.hasOwnProperty.call(f.versions,"gcc")&&(u&&o.darwinXcodeExists()||!u?s("gcc -dumpversion",(function(e,t){e||(f.versions.gcc=t.toString().split("\n")[0].trim()||""),f.versions.gcc.indexOf(".")>-1?h():s("gcc --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0].trim();if(e.indexOf("gcc")>-1&&e.indexOf(")")>-1){const t=e.split(")");f.versions.gcc=t[1].trim()||f.versions.gcc}}h()}))})):h()),{}.hasOwnProperty.call(f.versions,"virtualbox")&&s(o.getVboxmanage()+" -v 2>&1",(function(e,t){if(!e){const e=(t.toString().split("\n")[0]||"").split("r");f.versions.virtualbox=e[0]}h()})),{}.hasOwnProperty.call(f.versions,"bash")&&s("bash --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" version ");e.length>1&&(f.versions.bash=e[1].split(" ")[0].split("(")[0])}h()})),{}.hasOwnProperty.call(f.versions,"zsh")&&s("zsh --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split("zsh ");e.length>1&&(f.versions.zsh=e[1].split(" ")[0])}h()})),{}.hasOwnProperty.call(f.versions,"fish")&&s("fish --version",(function(e,t){if(!e){const e=t.toString().split("\n")[0].split(" version ");e.length>1&&(f.versions.fish=e[1].split(" ")[0])}h()})),{}.hasOwnProperty.call(f.versions,"powershell")&&(p?o.powerShell("$PSVersionTable").then((e=>{const t=e.toString().split("\n").map((e=>e.replace(/ +/g," ").replace(/ +/g,":")));f.versions.powershell=o.getValue(t,"psversion"),h()})):h()),{}.hasOwnProperty.call(f.versions,"dotnet")&&(p?o.powerShell('gci "HKLM:\\SOFTWARE\\Microsoft\\NET Framework Setup\\NDP" -recurse | gp -name Version,Release -EA 0 | where { $_.PSChildName -match "^(?!S)\\p{L}"} | select PSChildName, Version, Release').then((e=>{const t=e.toString().split("\r\n");let r="";t.forEach((e=>{const t=(e=e.replace(/ +/g," ")).split(" ");r=r||(t[0].toLowerCase().startsWith("client")&&t.length>2||t[0].toLowerCase().startsWith("full")&&t.length>2?t[1].trim():"")})),f.versions.dotnet=r.trim(),h()})):h())}catch(e){r&&r(f.versions),n(f.versions)}}))}))},r.shell=function(e){return new Promise((r=>{t.nextTick((()=>{if(p)r("cmd");else{let t="";s("echo $SHELL",(function(n,i){n||(t=i.toString().split("\n")[0]),e&&e(t),r(t)}))}}))}))},r.uuid=b}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178}],272:[function(e,t,r){(function(t){(function(){"use strict";const n=e("child_process").exec,i=e("./util");let o=t.platform;const s="linux"===o||"android"===o,a="darwin"===o,l="win32"===o,c="freebsd"===o,u="openbsd"===o,p="netbsd"===o,f="sunos"===o,d={1:"Other",2:"Unknown",3:"Idle",4:"Printing",5:"Warmup",6:"Stopped Printing",7:"Offline"};function h(e){const t={},r=i.getValue(e,"PrinterId"," ");return t.id=r?parseInt(r,10):null,t.name=i.getValue(e,"Info"," "),t.model=e.length>0&&e[0]?e[0].split(" ")[0]:"",t.uri=i.getValue(e,"DeviceURI"," "),t.uuid=i.getValue(e,"UUID"," "),t.status=i.getValue(e,"State"," "),t.local=i.getValue(e,"Location"," ").toLowerCase().startsWith("local"),t.default=null,t.shared=i.getValue(e,"Shared"," ").toLowerCase().startsWith("yes"),t}function m(e,t){const r={};return r.id=t,r.name=i.getValue(e,"Description",":",!0),r.model=e.length>0&&e[0]?e[0].split(" ")[0]:"",r.uri=null,r.uuid=null,r.status=e.length>0&&e[0]?e[0].indexOf(" idle")>0?"idle":e[0].indexOf(" printing")>0?"printing":"unknown":null,r.local=i.getValue(e,"Location",":",!0).toLowerCase().startsWith("local"),r.default=null,r.shared=i.getValue(e,"Shared"," ").toLowerCase().startsWith("yes"),r}function g(e,t){const r={},n=e.uri.split("/");return r.id=t,r.name=e._name,r.model=n.length?n[n.length-1]:"",r.uri=e.uri,r.uuid=null,r.status=e.status,r.local="local"===e.printserver,r.default="yes"===e.default,r.shared="yes"===e.shared,r}function y(e,t){const r={},n=parseInt(i.getValue(e,"PrinterStatus",":"),10);return r.id=t,r.name=i.getValue(e,"name",":"),r.model=i.getValue(e,"DriverName",":"),r.uri=null,r.uuid=null,r.status=d[n]?d[n]:null,r.local="TRUE"===i.getValue(e,"Local",":").toUpperCase(),r.default="TRUE"===i.getValue(e,"Default",":").toUpperCase(),r.shared="TRUE"===i.getValue(e,"Shared",":").toUpperCase(),r}r.printer=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(s||c||u||p){let i="cat /etc/cups/printers.conf 2>/dev/null";n(i,(function(o,a){if(!o){const e=a.toString().split("<Printer "),r=function(e){const t={};if(e&&e.length&&e[0].indexOf(" CUPS v")>0){const r=e[0].split(" CUPS v");t.cupsVersion=r[1]}return t}(e[0]);for(let n=1;n<e.length;n++){const i=h(e[n].split("\n"));i.name&&(i.engine="CUPS",i.engineVersion=r.cupsVersion,t.push(i))}}0===t.length&&s?(i="export LC_ALL=C; lpstat -lp 2>/dev/null; unset LC_ALL",n(i,(function(e,r){const n=("\n"+r.toString()).split("\nprinter ");for(let e=1;e<n.length;e++){const r=m(n[e].split("\n"),e);t.push(r)}})),e&&e(t),r(t)):(e&&e(t),r(t))}))}if(a){n("system_profiler SPPrintersDataType -json",(function(n,o){if(!n)try{const e=JSON.parse(o.toString());if(e.SPPrintersDataType&&e.SPPrintersDataType.length)for(let r=0;r<e.SPPrintersDataType.length;r++){const n=g(e.SPPrintersDataType[r],r);t.push(n)}}catch(e){i.noop()}e&&e(t),r(t)}))}l&&i.powerShell("Get-CimInstance Win32_Printer | select PrinterStatus,Name,DriverName,Local,Default,Shared | fl").then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);for(let r=0;r<e.length;r++){const n=y(e[r].split("\n"),r);(n.name||n.model)&&t.push(n)}}e&&e(t),r(t)})),f&&r(null)}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63}],273:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("fs"),o=e("path"),s=e("child_process").exec,a=e("child_process").execSync,l=e("./util");let c=t.platform;const u="linux"===c||"android"===c,p="darwin"===c,f="win32"===c,d="freebsd"===c,h="openbsd"===c,m="netbsd"===c,g="sunos"===c,y={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},v={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},b={all:0,all_utime:0,all_stime:0,list:{},ms:0,result:{}},w={0:"unknown",1:"other",2:"ready",3:"running",4:"blocked",5:"suspended blocked",6:"suspended ready",7:"terminated",8:"stopped",9:"growing"};function _(e){let t=e.replace(/ +/g," ").split(" ");return(t.length>=2?parseInt(t[1]):0)+(t.length>=3?parseInt(t[2]):0)+(t.length>=4?parseInt(t[3]):0)+(t.length>=5?parseInt(t[4]):0)+(t.length>=6?parseInt(t[5]):0)+(t.length>=7?parseInt(t[6]):0)+(t.length>=8?parseInt(t[7]):0)+(t.length>=9?parseInt(t[8]):0)+(t.length>=10?parseInt(t[9]):0)+(t.length>=11?parseInt(t[10]):0)}function S(e,t,r){let n=e.replace(/ +/g," ").split(")");if(n.length>=2){let e=n[1].split(" ");if(e.length>=16){let i=parseInt(n[0].split(" ")[0]),o=parseInt(e[12]),s=parseInt(e[13]),a=parseInt(e[14]),l=parseInt(e[15]),c=0,u=0;return r.all>0&&r.list[i]?(c=(o+a-r.list[i].utime-r.list[i].cutime)/(t-r.all)*100,u=(s+l-r.list[i].stime-r.list[i].cstime)/(t-r.all)*100):(c=(o+a)/t*100,u=(s+l)/t*100),{pid:i,utime:o,stime:s,cutime:a,cstime:l,cpuu:c,cpus:u}}return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}return{pid:0,utime:0,stime:0,cutime:0,cstime:0,cpuu:0,cpus:0}}function x(e,t,r){let n=0,i=0;return r.all>0&&r.list[e.pid]?(n=(e.utime-r.list[e.pid].utime)/(t-r.all)*100,i=(e.stime-r.list[e.pid].stime)/(t-r.all)*100):(n=e.utime/t*100,i=e.stime/t*100),{pid:e.pid,utime:e.utime,stime:e.stime,cpuu:n>0?n:0,cpus:i>0?i:0}}r.services=function(e,r){return l.isFunction(e)&&!r&&(r=e,e=""),new Promise((n=>{t.nextTick((()=>{if("string"!=typeof e)return r&&r([]),n([]);if(e){let t="";t.__proto__.toLowerCase=l.stringToLower,t.__proto__.replace=l.stringReplace,t.__proto__.trim=l.stringTrim;const i=l.sanitizeShellString(e);for(let e=0;e<=l.mathMin(i.length,2e3);e++)void 0!==i[e]&&(t+=i[e]);t=t.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|"),""===t&&(t="*"),l.isPrototypePolluted()&&"*"!==t&&(t="------");let o=t.split("|"),c=[],g=[];if(u||d||h||m||p){if((u||d||h||m)&&"*"===t)try{const e=a("systemctl --all --type=service --no-legend 2> /dev/null").toString().split("\n");o=[];for(const t of e){const e=t.split(".service")[0];e&&-1===t.indexOf(" not-found ")&&o.push(e.trim())}t=o.join("|")}catch(e){try{t="";const e=a("service --status-all 2> /dev/null").toString().split("\n");for(const r of e){const e=r.split("]");2===e.length&&(t+=(""!==t?"|":"")+e[1].trim())}o=t.split("|")}catch(e){try{const e=a("ls /etc/init.d/ -m 2> /dev/null").toString().split("\n").join("");if(t="",e){const r=e.split(",");for(const e of r){const r=e.trim();r&&(t+=(""!==t?"|":"")+r)}o=t.split("|")}}catch(e){t="",o=[]}}}p&&"*"===t&&(r&&r(c),n(c));let e=p?["-caxo","pcpu,pmem,pid,command"]:["-axo","pcpu,pmem,pid,command"];""!==t&&o.length>0?l.execSafe("ps",e).then((t=>{if(t){let e=t.replace(/ +/g," ").replace(/,+/g,".").split("\n");if(o.forEach((function(t){let r;r=p?e.filter((function(e){return-1!==e.toLowerCase().indexOf(t)})):e.filter((function(e){return-1!==e.toLowerCase().indexOf(" "+t+":")||-1!==e.toLowerCase().indexOf("/"+t)}));const n=[];for(const e of r){const t=e.trim().split(" ")[2];t&&n.push(parseInt(t,10))}c.push({name:t,running:r.length>0,startmode:"",pids:n,cpu:parseFloat(r.reduce((function(e,t){return e+parseFloat(t.trim().split(" ")[0])}),0).toFixed(2)),mem:parseFloat(r.reduce((function(e,t){return e+parseFloat(t.trim().split(" ")[1])}),0).toFixed(2))})})),u){let e='cat /proc/stat | grep "cpu "';for(let t in c)for(let r in c[t].pids)e+=";cat /proc/"+c[t].pids[r]+"/stat";s(e,{maxBuffer:2048e4},(function(e,t){let i=t.toString().split("\n"),o=_(i.shift()),s={},a={};i.forEach((e=>{if(a=S(e,o,v),a.pid){let e=-1;for(let t in c)for(let r in c[t].pids)parseInt(c[t].pids[r])===parseInt(a.pid)&&(e=t);e>=0&&(c[e].cpu+=a.cpuu+a.cpus),s[a.pid]={cpuu:a.cpuu,cpus:a.cpus,utime:a.utime,stime:a.stime,cutime:a.cutime,cstime:a.cstime}}})),v.all=o,v.list=Object.assign({},s),v.ms=Date.now()-v.ms,v.result=Object.assign({},c),r&&r(c),n(c)}))}else r&&r(c),n(c)}else e=["-o","comm"],l.execSafe("ps",e).then((e=>{if(e){let t=e.replace(/ +/g," ").replace(/,+/g,".").split("\n");o.forEach((function(e){let r=t.filter((function(t){return-1!==t.indexOf(e)}));c.push({name:e,running:r.length>0,startmode:"",cpu:0,mem:0})})),r&&r(c),n(c)}else o.forEach((function(e){c.push({name:e,running:!1,startmode:"",cpu:0,mem:0})})),r&&r(c),n(c)}))})):(r&&r(c),n(c))}if(f)try{let e="Get-CimInstance Win32_Service";"*"!==o[0]&&(e+=' -Filter "',o.forEach((t=>{e+=`Name='${t}' or `})),e=`${e.slice(0,-4)}"`),e+=" | select Name,Caption,Started,StartMode,ProcessId | fl",l.powerShell(e).then(((e,i)=>{if(i)o.forEach((function(e){c.push({name:e,running:!1,startmode:"",cpu:0,mem:0})})),r&&r(c),n(c);else{if(e.split(/\n\s*\n/).forEach((e=>{if(""!==e.trim()){let r=e.trim().split("\r\n"),n=l.getValue(r,"Name",":",!0).toLowerCase(),i=l.getValue(r,"Caption",":",!0).toLowerCase(),s=l.getValue(r,"Started",":",!0),a=l.getValue(r,"StartMode",":",!0),u=l.getValue(r,"ProcessId",":",!0);("*"===t||o.indexOf(n)>=0||o.indexOf(i)>=0)&&(c.push({name:n,running:"true"===s.toLowerCase(),startmode:a,pids:[u],cpu:0,mem:0}),g.push(n),g.push(i))}})),"*"!==t){o.filter((function(e){return-1===g.indexOf(e)})).forEach((function(e){c.push({name:e,running:!1,startmode:"",pids:[],cpu:0,mem:0})}))}r&&r(c),n(c)}}))}catch(e){r&&r(c),n(c)}}else r&&r([]),n([])}))}))},r.processes=function(e){let r=[];function a(e){let t=(e=e||"").split(" ")[0];if(":"===t.substr(-1)&&(t=t.substr(0,t.length-1)),"["!==t.substr(0,1)){let e=t.split("/");t=isNaN(parseInt(e[e.length-1]))?e[e.length-1]:e[0]}return t}function c(e){let t=0,n=0;function s(i){t=n,n=r[i]?e.substring(r[i].to+t,1e4).indexOf(" "):1e4}s(0);const c=parseInt(e.substring(r[0].from+t,r[0].to+n));s(1);const p=parseInt(e.substring(r[1].from+t,r[1].to+n));s(2);const f=parseFloat(e.substring(r[2].from+t,r[2].to+n).replace(/,/g,"."));s(3);const d=parseFloat(e.substring(r[3].from+t,r[3].to+n).replace(/,/g,"."));s(4);const h=parseInt(e.substring(r[4].from+t,r[4].to+n));s(5);const m=parseInt(e.substring(r[5].from+t,r[5].to+n));s(6);const y=parseInt(e.substring(r[6].from+t,r[6].to+n));s(7);const v=parseInt(e.substring(r[7].from+t,r[7].to+n))||0;s(8);const b=g?function(e){let t=e,r=e.replace(/ +/g," ").split(" ");return 5===r.length&&(t=r[4]+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(r[1].toUpperCase())/3+1)).slice(-2)+"-"+("0"+r[2]).slice(-2)+" "+r[3]),t}(e.substring(r[8].from+t,r[8].to+n).trim()):function(e){let t=new Date;t=new Date(t.getTime()-6e4*t.getTimezoneOffset());const r=e.split("-"),n=r.length-1,i=n>0?parseInt(r[n-1]):0,o=r[n].split(":"),s=1e3*(60*(60*(24*i+(3===o.length?parseInt(o[0]||0):0))+parseInt(o[3===o.length?1:0]||0))+parseInt(o[3===o.length?2:1]||0));let a=new Date(t.getTime()),c=a.toISOString().substring(0,10)+" "+a.toISOString().substring(11,19);try{a=new Date(t.getTime()-s),c=a.toISOString().substring(0,10)+" "+a.toISOString().substring(11,19)}catch(e){l.noop()}return c}(e.substring(r[8].from+t,r[8].to+n).trim());s(9);let w=e.substring(r[9].from+t,r[9].to+n).trim();w="R"===w[0]?"running":"S"===w[0]?"sleeping":"T"===w[0]?"stopped":"W"===w[0]?"paging":"X"===w[0]?"dead":"Z"===w[0]?"zombie":"D"===w[0]||"U"===w[0]?"blocked":"unknown",s(10);let _=e.substring(r[10].from+t,r[10].to+n).trim();"?"!==_&&"??"!==_||(_=""),s(11);const S=e.substring(r[11].from+t,r[11].to+n).trim();s(12);let x="",O="",E="",C=e.substring(r[12].from+t,r[12].to+n).trim();if("]"===C.substr(C.length-1)&&(C=C.slice(0,-1)),"["===C.substr(0,1))O=C.substring(1);else{const e=C.indexOf("("),t=C.indexOf(")"),r=C.indexOf("/"),n=C.indexOf(":");if(e<t&&e<r&&r<t)O=C.split(" ")[0],O=O.replace(/:/g,"");else if(n>0&&(-1===r||r>3))O=C.split(" ")[0],O=O.replace(/:/g,"");else{let e=C.indexOf(" -"),t=C.indexOf(" /");e=e>=0?e:1e4,t=t>=0?t:1e4;const r=Math.min(e,t);let n=C.substr(0,r);const s=C.substr(r),a=n.lastIndexOf("/");if(a>=0&&(x=n.substr(0,a),n=n.substr(a+1)),1e4===r&&n.indexOf(" ")>-1){const e=n.split(" ");i.existsSync(o.join(x,e[0]))?(O=e.shift(),E=(e.join(" ")+" "+s).trim()):(O=n.trim(),E=s.trim())}else O=n.trim(),E=s.trim()}}return{pid:c,parentPid:p,name:u?a(O):O,cpu:f,cpuu:0,cpus:0,mem:d,priority:h,memVsz:m,memRss:y,nice:v,started:b,state:w,tty:_,user:S,command:O,params:E,path:x}}function v(e){function t(e){const t=("0"+(e.getMonth()+1).toString()).slice(-2);return e.getFullYear().toString()+"-"+t+"-"+("0"+e.getDate().toString()).slice(-2)+" "+("0"+e.getHours().toString()).slice(-2)+":"+("0"+e.getMinutes().toString()).slice(-2)+":"+("0"+e.getSeconds().toString()).slice(-2)}let r=[];return e.forEach((function(e){if(""!==e.trim()){const i=(e=e.trim().replace(/ +/g," ").replace(/,+/g,".")).split(" "),o=i.slice(9).join(" "),s=parseFloat((1*parseInt(i[3])*1024/n.totalmem()).toFixed(1)),l=function(e){let r="";if(e.indexOf("d")>=0){const n=e.split("d");r=t(new Date(Date.now()-60*(24*n[0]+1*n[1])*60*1e3))}else if(e.indexOf("h")>=0){const n=e.split("h");r=t(new Date(Date.now()-60*(60*n[0]+1*n[1])*1e3))}else if(e.indexOf(":")>=0){const n=e.split(":");r=t(new Date(Date.now()-(n.length>1?1e3*(60*n[0]+n[1]):1e3*n[0])))}return r}(i[5]);r.push({pid:parseInt(i[0]),parentPid:parseInt(i[1]),name:a(o),cpu:0,cpuu:0,cpus:0,mem:s,priority:0,memVsz:parseInt(i[2]),memRss:parseInt(i[3]),nice:parseInt(i[4]),started:l,state:"R"===i[6]?"running":"S"===i[6]?"sleeping":"T"===i[6]?"stopped":"W"===i[6]?"paging":"X"===i[6]?"dead":"Z"===i[6]?"zombie":"D"===i[6]||"U"===i[6]?"blocked":"unknown",tty:i[7],user:i[8],command:o})}})),r}return new Promise((i=>{t.nextTick((()=>{let t={all:0,running:0,blocked:0,sleeping:0,unknown:0,list:[]},o="";if(y.ms&&Date.now()-y.ms>=500||0===y.ms)if(u||d||h||m||p||g)u&&(o="export LC_ALL=C; ps -axo pid:11,ppid:11,pcpu:6,pmem:6,pri:5,vsz:11,rss:11,ni:5,etime:30,state:5,tty:15,user:20,command; unset LC_ALL"),(d||h||m)&&(o="export LC_ALL=C; ps -axo pid,ppid,pcpu,pmem,pri,vsz,rss,ni,etime,state,tty,user,command; unset LC_ALL"),p&&(o="ps -axo pid,ppid,pcpu,pmem,pri,vsz=temp_title_1,rss=temp_title_2,nice,etime=temp_title_3,state,tty,user,command -r"),g&&(o="ps -Ao pid,ppid,pcpu,pmem,pri,vsz,rss,nice,stime,s,tty,user,comm"),s(o,{maxBuffer:2048e4},(function(n,a){!n&&a.toString().trim()?(t.list=function(e){let t=[];if(e.length>1){let n=e[0];r=l.parseHead(n,8),e.shift(),e.forEach((function(e){""!==e.trim()&&t.push(c(e))}))}return t}(a.toString().split("\n")).slice(),t.all=t.list.length,t.running=t.list.filter((function(e){return"running"===e.state})).length,t.blocked=t.list.filter((function(e){return"blocked"===e.state})).length,t.sleeping=t.list.filter((function(e){return"sleeping"===e.state})).length,u?(o='cat /proc/stat | grep "cpu "',t.list.forEach((e=>{o+=";cat /proc/"+e.pid+"/stat"})),s(o,{maxBuffer:2048e4},(function(r,n){let o=n.toString().split("\n"),s=_(o.shift()),a={},l={};o.forEach((e=>{if(l=S(e,s,y),l.pid){let e=t.list.map((function(e){return e.pid})).indexOf(l.pid);e>=0&&(t.list[e].cpu=l.cpuu+l.cpus,t.list[e].cpuu=l.cpuu,t.list[e].cpus=l.cpus),a[l.pid]={cpuu:l.cpuu,cpus:l.cpus,utime:l.utime,stime:l.stime,cutime:l.cutime,cstime:l.cstime}}})),y.all=s,y.list=Object.assign({},a),y.ms=Date.now()-y.ms,y.result=Object.assign({},t),e&&e(t),i(t)}))):(e&&e(t),i(t))):(o="ps -o pid,ppid,vsz,rss,nice,etime,stat,tty,user,comm",g&&(o="ps -o pid,ppid,vsz,rss,nice,etime,s,tty,user,comm"),s(o,{maxBuffer:2048e4},(function(r,n){if(r)e&&e(t),i(t);else{let r=n.toString().split("\n");r.shift(),t.list=v(r).slice(),t.all=t.list.length,t.running=t.list.filter((function(e){return"running"===e.state})).length,t.blocked=t.list.filter((function(e){return"blocked"===e.state})).length,t.sleeping=t.list.filter((function(e){return"sleeping"===e.state})).length,e&&e(t),i(t)}})))}));else if(f)try{l.powerShell('Get-CimInstance Win32_Process | select-Object ProcessId,ParentProcessId,ExecutionState,Caption,CommandLine,ExecutablePath,UserModeTime,KernelModeTime,WorkingSetSize,Priority,PageFileUsage, @{n="CreationDate";e={$_.CreationDate.ToString("yyyy-MM-dd HH:mm:ss")}} | fl').then(((r,o)=>{if(!o){let e=r.split(/\n\s*\n/),i=[],o=[],s={},a=0,c=0;e.forEach((e=>{if(""!==e.trim()){let r=e.trim().split("\r\n"),s=parseInt(l.getValue(r,"ProcessId",":",!0),10),u=parseInt(l.getValue(r,"ParentProcessId",":",!0),10),p=l.getValue(r,"ExecutionState",":"),f=l.getValue(r,"Caption",":",!0),d=l.getValue(r,"CommandLine",":",!0),h=!1;r.forEach((e=>{h&&e.toLowerCase().startsWith(" ")?d+=" "+e.trim():h=!1,e.toLowerCase().startsWith("commandline")&&(h=!0)}));let m=l.getValue(r,"ExecutablePath",":",!0),g=parseInt(l.getValue(r,"UserModeTime",":",!0),10),y=parseInt(l.getValue(r,"KernelModeTime",":",!0),10),v=parseInt(l.getValue(r,"WorkingSetSize",":",!0),10);a+=g,c+=y,t.all++,p||t.unknown++,"3"===p&&t.running++,"4"!==p&&"5"!==p||t.blocked++,o.push({pid:s,utime:g,stime:y,cpu:0,cpuu:0,cpus:0}),i.push({pid:s,parentPid:u,name:f,cpu:0,cpuu:0,cpus:0,mem:v/n.totalmem()*100,priority:parseInt(l.getValue(r,"Priority",":",!0),10),memVsz:parseInt(l.getValue(r,"PageFileUsage",":",!0),10),memRss:Math.floor(parseInt(l.getValue(r,"WorkingSetSize",":",!0),10)/1024),nice:0,started:l.getValue(r,"CreationDate",":",!0),state:p?w[p]:w[0],tty:"",user:"",command:d||f,path:m,params:""})}})),t.sleeping=t.all-t.running-t.blocked-t.unknown,t.list=i,o.forEach((e=>{let r=x(e,a+c,y),n=t.list.map((function(e){return e.pid})).indexOf(r.pid);n>=0&&(t.list[n].cpu=r.cpuu+r.cpus,t.list[n].cpuu=r.cpuu,t.list[n].cpus=r.cpus),s[r.pid]={cpuu:r.cpuu,cpus:r.cpus,utime:r.utime,stime:r.stime}})),y.all=a+c,y.all_utime=a,y.all_stime=c,y.list=Object.assign({},s),y.ms=Date.now()-y.ms,y.result=Object.assign({},t)}e&&e(t),i(t)}))}catch(r){e&&e(t),i(t)}else e&&e(t),i(t);else e&&e(y.result),i(y.result)}))}))},r.processLoad=function(e,r){return l.isFunction(e)&&!r&&(r=e,e=""),new Promise((i=>{t.nextTick((()=>{if("string"!=typeof(e=e||""))return r&&r([]),i([]);let t="";t.__proto__.toLowerCase=l.stringToLower,t.__proto__.replace=l.stringReplace,t.__proto__.trim=l.stringTrim;const o=l.sanitizeShellString(e);for(let e=0;e<=l.mathMin(o.length,2e3);e++)void 0!==o[e]&&(t+=o[e]);t=t.trim().toLowerCase().replace(/, /g,"|").replace(/,+/g,"|"),""===t&&(t="*"),l.isPrototypePolluted()&&"*"!==t&&(t="------");let a=t.split("|"),c=[];if((l.isPrototypePolluted()?"":l.sanitizeShellString(e))&&a.length&&"------"!==a[0]){if(f)try{l.powerShell("Get-CimInstance Win32_Process | select ProcessId,Caption,UserModeTime,KernelModeTime,WorkingSetSize | fl").then(((e,o)=>{if(!o){let o=e.split(/\n\s*\n/),s=[],u={},p=0,f=0;if(o.forEach((e=>{if(""!==e.trim()){let r=e.trim().split("\r\n"),i=parseInt(l.getValue(r,"ProcessId",":",!0),10),o=l.getValue(r,"Caption",":",!0),u=parseInt(l.getValue(r,"UserModeTime",":",!0),10),d=parseInt(l.getValue(r,"KernelModeTime",":",!0),10),h=parseInt(l.getValue(r,"WorkingSetSize",":",!0),10);p+=u,f+=d,s.push({pid:i,name:o,utime:u,stime:d,cpu:0,cpuu:0,cpus:0,mem:h});let m="",g=!1;if(a.forEach((function(e){o.toLowerCase().indexOf(e.toLowerCase())>=0&&!g&&(g=!0,m=e)})),"*"===t||g){let e=!1;c.forEach((function(t){t.proc.toLowerCase()===m.toLowerCase()&&(t.pids.push(i),t.mem+=h/n.totalmem()*100,e=!0)})),e||c.push({proc:m,pid:i,pids:[i],cpu:0,mem:h/n.totalmem()*100})}}})),"*"!==t){a.filter((function(e){return 0===s.filter((function(t){return t.name.toLowerCase().indexOf(e)>=0})).length})).forEach((function(e){c.push({proc:e,pid:null,pids:[],cpu:0,mem:0})}))}s.forEach((e=>{let t=x(e,p+f,b),r=-1;for(let e=0;e<c.length;e++)(c[e].pid===t.pid||c[e].pids.indexOf(t.pid)>=0)&&(r=e);r>=0&&(c[r].cpu+=t.cpuu+t.cpus),u[t.pid]={cpuu:t.cpuu,cpus:t.cpus,utime:t.utime,stime:t.stime}})),b.all=p+f,b.all_utime=p,b.all_stime=f,b.list=Object.assign({},u),b.ms=Date.now()-b.ms,b.result=JSON.parse(JSON.stringify(c)),r&&r(c),i(c)}}))}catch(e){r&&r(c),i(c)}if(p||u||d||h||m){const e=["-axo","pid,ppid,pcpu,pmem,comm"];l.execSafe("ps",e).then((e=>{if(e){let n=[];if(e.toString().split("\n").filter((function(e){if("*"===t)return!0;if(-1!==e.toLowerCase().indexOf("grep"))return!1;let r=!1;return a.forEach((function(t){r=r||e.toLowerCase().indexOf(t.toLowerCase())>=0})),r})).forEach((function(e){let t=e.trim().replace(/ +/g," ").split(" ");t.length>4&&n.push({name:t[4].substring(t[4].lastIndexOf("/")+1),pid:parseInt(t[0])||0,ppid:parseInt(t[1])||0,cpu:parseFloat(t[2].replace(",",".")),mem:parseFloat(t[3].replace(",","."))})})),n.forEach((function(e){let r=-1,n=!1,i="";for(let t=0;t<c.length;t++)e.name.toLowerCase().indexOf(c[t].proc.toLowerCase())>=0&&(r=t);a.forEach((function(t){e.name.toLowerCase().indexOf(t.toLowerCase())>=0&&!n&&(n=!0,i=t)})),("*"===t||n)&&(r<0?c.push({proc:i,pid:e.pid,pids:[e.pid],cpu:e.cpu,mem:e.mem}):(e.ppid<10&&(c[r].pid=e.pid),c[r].pids.push(e.pid),c[r].cpu+=e.cpu,c[r].mem+=e.mem))})),"*"!==t){a.filter((function(e){return 0===n.filter((function(t){return t.name.toLowerCase().indexOf(e)>=0})).length})).forEach((function(e){c.push({proc:e,pid:null,pids:[],cpu:0,mem:0})}))}if(u){c.forEach((function(e){e.cpu=0}));let e='cat /proc/stat | grep "cpu "';for(let t in c)for(let r in c[t].pids)e+=";cat /proc/"+c[t].pids[r]+"/stat";s(e,{maxBuffer:2048e4},(function(e,t){let n=t.toString().split("\n"),o=_(n.shift()),s={},a={};n.forEach((e=>{if(a=S(e,o,b),a.pid){let e=-1;for(let t in c)c[t].pids.indexOf(a.pid)>=0&&(e=t);e>=0&&(c[e].cpu+=a.cpuu+a.cpus),s[a.pid]={cpuu:a.cpuu,cpus:a.cpus,utime:a.utime,stime:a.stime,cutime:a.cutime,cstime:a.cstime}}})),c.forEach((function(e){e.cpu=Math.round(100*e.cpu)/100})),b.all=o,b.list=Object.assign({},s),b.ms=Date.now()-b.ms,b.result=Object.assign({},c),r&&r(c),i(c)}))}else r&&r(c),i(c)}else r&&r(c),i(c)}))}}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178,path:179}],274:[function(e,t,r){(function(t){(function(){"use strict";const n=e("fs"),i=e("os"),o=e("./util"),s=e("child_process").exec,a=e("child_process").execSync,l=o.promisify(e("child_process").exec);let c=t.platform;const u="linux"===c||"android"===c,p="darwin"===c,f="win32"===c,d="freebsd"===c,h="openbsd"===c,m="netbsd"===c,g="sunos"===c;r.system=function(e){return new Promise((r=>{t.nextTick((()=>{let t={manufacturer:"",model:"Computer",version:"",serial:"-",uuid:"-",sku:"-",virtual:!1};if((u||d||h||m)&&s("export LC_ALL=C; dmidecode -t system 2>/dev/null; unset LC_ALL",(function(s,l){let c=l.toString().split("\n");t.manufacturer=o.getValue(c,"manufacturer"),t.model=o.getValue(c,"product name"),t.version=o.getValue(c,"version"),t.serial=o.getValue(c,"serial number"),t.uuid=o.getValue(c,"uuid").toLowerCase(),t.sku=o.getValue(c,"sku number");try{c=a('echo -n "product_name: "; cat /sys/devices/virtual/dmi/id/product_name 2>/dev/null; echo;\n            echo -n "product_serial: "; cat /sys/devices/virtual/dmi/id/product_serial 2>/dev/null; echo;\n            echo -n "product_uuid: "; cat /sys/devices/virtual/dmi/id/product_uuid 2>/dev/null; echo;\n            echo -n "product_version: "; cat /sys/devices/virtual/dmi/id/product_version 2>/dev/null; echo;\n            echo -n "sys_vendor: "; cat /sys/devices/virtual/dmi/id/sys_vendor 2>/dev/null; echo;').toString().split("\n"),t.manufacturer=""===t.manufacturer?o.getValue(c,"sys_vendor"):t.manufacturer,t.model=""===t.model?o.getValue(c,"product_name"):t.model,t.version=""===t.version?o.getValue(c,"product_version"):t.version,t.serial=""===t.serial?o.getValue(c,"product_serial"):t.serial,t.uuid=""===t.uuid?o.getValue(c,"product_uuid").toLowerCase():t.uuid}catch(e){o.noop()}if(t.serial&&-1===t.serial.toLowerCase().indexOf("o.e.m.")||(t.serial="-"),t.manufacturer&&-1===t.manufacturer.toLowerCase().indexOf("o.e.m.")||(t.manufacturer=""),t.model&&-1===t.model.toLowerCase().indexOf("o.e.m.")||(t.model="Computer"),t.version&&-1===t.version.toLowerCase().indexOf("o.e.m.")||(t.version=""),t.sku&&-1===t.sku.toLowerCase().indexOf("o.e.m.")||(t.sku="-"),"virtualbox"===t.model.toLowerCase()||"kvm"===t.model.toLowerCase()||"virtual machine"===t.model.toLowerCase()||"bochs"===t.model.toLowerCase()||t.model.toLowerCase().startsWith("vmware")||t.model.toLowerCase().startsWith("droplet"))switch(t.virtual=!0,t.model.toLowerCase()){case"virtualbox":t.virtualHost="VirtualBox";break;case"vmware":t.virtualHost="VMware";break;case"kvm":t.virtualHost="KVM";break;case"bochs":t.virtualHost="bochs"}if(t.manufacturer.toLowerCase().startsWith("vmware")||"xen"===t.manufacturer.toLowerCase())switch(t.virtual=!0,t.manufacturer.toLowerCase()){case"vmware":t.virtualHost="VMware";break;case"xen":t.virtualHost="Xen"}if(!t.virtual)try{const e=a("ls -1 /dev/disk/by-id/ 2>/dev/null").toString();e.indexOf("_QEMU_")>=0&&(t.virtual=!0,t.virtualHost="QEMU"),e.indexOf("_VBOX_")>=0&&(t.virtual=!0,t.virtualHost="VirtualBox")}catch(e){o.noop()}if(!t.virtual&&(i.release().toLowerCase().indexOf("microsoft")>=0||i.release().toLowerCase().endsWith("wsl2"))){const e=parseFloat(i.release().toLowerCase());t.virtual=!0,t.manufacturer="Microsoft",t.model="WSL",t.version=e<4.19?"1":"2"}if((d||h||m)&&!t.virtualHost)try{const e=a("dmidecode -t 4").toString().split("\n");switch(o.getValue(e,"manufacturer",":",!0).toLowerCase()){case"virtualbox":t.virtualHost="VirtualBox";break;case"vmware":t.virtualHost="VMware";break;case"kvm":t.virtualHost="KVM";break;case"bochs":t.virtualHost="bochs"}}catch(e){o.noop()}(n.existsSync("/.dockerenv")||n.existsSync("/.dockerinit"))&&(t.model="Docker Container");try{const e=a('dmesg 2>/dev/null | grep -iE "virtual|hypervisor" | grep -iE "vmware|qemu|kvm|xen" | grep -viE "Nested Virtualization|/virtual/"');e.toString().split("\n").length>0&&("Computer"===t.model&&(t.model="Virtual machine"),t.virtual=!0,e.toString().toLowerCase().indexOf("vmware")>=0&&!t.virtualHost&&(t.virtualHost="VMware"),e.toString().toLowerCase().indexOf("qemu")>=0&&!t.virtualHost&&(t.virtualHost="QEMU"),e.toString().toLowerCase().indexOf("xen")>=0&&!t.virtualHost&&(t.virtualHost="Xen"),e.toString().toLowerCase().indexOf("kvm")>=0&&!t.virtualHost&&(t.virtualHost="KVM"))}catch(e){o.noop()}""===t.manufacturer&&"Computer"===t.model&&""===t.version?n.readFile("/proc/cpuinfo",(function(n,i){if(!n){let e=i.toString().split("\n");t.model=o.getValue(e,"hardware",":",!0).toUpperCase(),t.version=o.getValue(e,"revision",":",!0).toLowerCase(),t.serial=o.getValue(e,"serial",":",!0);const r=o.getValue(e,"model:",":",!0);if(("BCM2835"===t.model||"BCM2708"===t.model||"BCM2709"===t.model||"BCM2710"===t.model||"BCM2711"===t.model||"BCM2836"===t.model||"BCM2837"===t.model)&&r.toLowerCase().indexOf("raspberry")>=0){const r=o.decodePiCpuinfo(e);t.model=r.model,t.version=r.revisionCode,t.manufacturer="Raspberry Pi Foundation",t.raspberry={manufacturer:r.manufacturer,processor:r.processor,type:r.type,revision:r.revision}}}e&&e(t),r(t)})):(e&&e(t),r(t))})),p&&s("ioreg -c IOPlatformExpertDevice -d 2",(function(n,i){if(!n){let e=i.toString().replace(/[<>"]/g,"").split("\n");t.manufacturer=o.getValue(e,"manufacturer","=",!0),t.model=o.getValue(e,"model","=",!0,!0),t.version=o.getValue(e,"version","=",!0),t.serial=o.getValue(e,"ioplatformserialnumber","=",!0),t.uuid=o.getValue(e,"ioplatformuuid","=",!0).toLowerCase(),t.sku=o.getValue(e,"board-id","=",!0)}e&&e(t),r(t)})),g&&(e&&e(t),r(t)),f)try{o.powerShell("Get-CimInstance Win32_ComputerSystemProduct | select Name,Vendor,Version,IdentifyingNumber,UUID | fl").then(((n,i)=>{if(i)e&&e(t),r(t);else{let i=n.split("\r\n");t.manufacturer=o.getValue(i,"vendor",":"),t.model=o.getValue(i,"name",":"),t.version=o.getValue(i,"version",":"),t.serial=o.getValue(i,"identifyingnumber",":"),t.uuid=o.getValue(i,"uuid",":").toLowerCase();const s=t.model.toLowerCase();("virtualbox"===s||"kvm"===s||"virtual machine"===s||"bochs"===s||s.startsWith("vmware")||s.startsWith("qemu")||s.startsWith("parallels"))&&(t.virtual=!0,s.startsWith("virtualbox")&&(t.virtualHost="VirtualBox"),s.startsWith("vmware")&&(t.virtualHost="VMware"),s.startsWith("kvm")&&(t.virtualHost="KVM"),s.startsWith("bochs")&&(t.virtualHost="bochs"),s.startsWith("qemu")&&(t.virtualHost="KVM"),s.startsWith("parallels")&&(t.virtualHost="Parallels"));const a=t.manufacturer.toLowerCase();(a.startsWith("vmware")||a.startsWith("qemu")||"xen"===a||a.startsWith("parallels"))&&(t.virtual=!0,a.startsWith("vmware")&&(t.virtualHost="VMware"),a.startsWith("xen")&&(t.virtualHost="Xen"),a.startsWith("qemu")&&(t.virtualHost="KVM"),a.startsWith("parallels")&&(t.virtualHost="Parallels")),o.powerShell('Get-CimInstance MS_Systeminformation -Namespace "root/wmi" | select systemsku | fl ').then(((n,i)=>{if(!i){let e=n.split("\r\n");t.sku=o.getValue(e,"systemsku",":")}t.virtual?(e&&e(t),r(t)):o.powerShell("Get-CimInstance Win32_bios | select Version, SerialNumber, SMBIOSBIOSVersion").then(((n,i)=>{if(i)e&&e(t),r(t);else{let i=n.toString();(i.indexOf("VRTUAL")>=0||i.indexOf("A M I ")>=0||i.indexOf("VirtualBox")>=0||i.indexOf("VMWare")>=0||i.indexOf("Xen")>=0||i.indexOf("Parallels")>=0)&&(t.virtual=!0,i.indexOf("VirtualBox")>=0&&!t.virtualHost&&(t.virtualHost="VirtualBox"),i.indexOf("VMware")>=0&&!t.virtualHost&&(t.virtualHost="VMware"),i.indexOf("Xen")>=0&&!t.virtualHost&&(t.virtualHost="Xen"),i.indexOf("VRTUAL")>=0&&!t.virtualHost&&(t.virtualHost="Hyper-V"),i.indexOf("A M I")>=0&&!t.virtualHost&&(t.virtualHost="Virtual PC"),i.indexOf("Parallels")>=0&&!t.virtualHost&&(t.virtualHost="Parallels")),e&&e(t),r(t)}}))}))}}))}catch(n){e&&e(t),r(t)}}))}))},r.bios=function(e){return new Promise((r=>{t.nextTick((()=>{let n={vendor:"",version:"",releaseDate:"",revision:""},i="";if((u||d||h||m)&&(i="arm"===t.arch?"cat /proc/cpuinfo | grep Serial":"export LC_ALL=C; dmidecode -t bios 2>/dev/null; unset LC_ALL",s(i,(function(t,i){let s=i.toString().split("\n");n.vendor=o.getValue(s,"Vendor"),n.version=o.getValue(s,"Version");let l=o.getValue(s,"Release Date");n.releaseDate=o.parseDateTime(l).date,n.revision=o.getValue(s,"BIOS Revision"),n.serial=o.getValue(s,"SerialNumber");let c=o.getValue(s,"Currently Installed Language").split("|")[0];if(c&&(n.language=c),s.length&&i.toString().indexOf("Characteristics:")>=0){const e=[];s.forEach((t=>{if(t.indexOf(" is supported")>=0){const r=t.split(" is supported")[0].trim();e.push(r)}})),n.features=e}try{s=a('echo -n "bios_date: "; cat /sys/devices/virtual/dmi/id/bios_date 2>/dev/null; echo;\n            echo -n "bios_vendor: "; cat /sys/devices/virtual/dmi/id/bios_vendor 2>/dev/null; echo;\n            echo -n "bios_version: "; cat /sys/devices/virtual/dmi/id/bios_version 2>/dev/null; echo;').toString().split("\n"),n.vendor=n.vendor?n.vendor:o.getValue(s,"bios_vendor"),n.version=n.version?n.version:o.getValue(s,"bios_version"),l=o.getValue(s,"bios_date"),n.releaseDate=n.releaseDate?n.releaseDate:o.parseDateTime(l).date}catch(e){o.noop()}e&&e(n),r(n)}))),p&&(n.vendor="Apple Inc.",s("system_profiler SPHardwareDataType -json",(function(t,i){try{const e=JSON.parse(i.toString());if(e&&e.SPHardwareDataType&&e.SPHardwareDataType.length){let t=e.SPHardwareDataType[0].boot_rom_version;t=t?t.split("(")[0].trim():null,n.version=t}}catch(e){o.noop()}e&&e(n),r(n)}))),g&&(n.vendor="Sun Microsystems",e&&e(n),r(n)),f)try{o.powerShell('Get-CimInstance Win32_bios | select Description,Version,Manufacturer,@{n="ReleaseDate";e={$_.ReleaseDate.ToString("yyyy-MM-dd")}},BuildNumber,SerialNumber | fl').then(((t,i)=>{if(!i){let e=t.toString().split("\r\n");const r=o.getValue(e,"description",":");-1!==r.indexOf(" Version ")?(n.vendor=r.split(" Version ")[0].trim(),n.version=r.split(" Version ")[1].trim()):-1!==r.indexOf(" Ver: ")?(n.vendor=o.getValue(e,"manufacturer",":"),n.version=r.split(" Ver: ")[1].trim()):(n.vendor=o.getValue(e,"manufacturer",":"),n.version=o.getValue(e,"version",":")),n.releaseDate=o.getValue(e,"releasedate",":"),n.revision=o.getValue(e,"buildnumber",":"),n.serial=o.getValue(e,"serialnumber",":")}e&&e(n),r(n)}))}catch(t){e&&e(n),r(n)}}))}))},r.baseboard=function(e){return new Promise((r=>{t.nextTick((()=>{let s={manufacturer:"",model:"",version:"",serial:"-",assetTag:"-",memMax:null,memSlots:null},c="";if(u||d||h||m){c="arm"===t.arch?"cat /proc/cpuinfo | grep Serial":"export LC_ALL=C; dmidecode -t 2 2>/dev/null; unset LC_ALL";const u=[];u.push(l(c)),u.push(l("export LC_ALL=C; dmidecode -t memory 2>/dev/null")),o.promiseAll(u).then((t=>{let l=t.results[0]?t.results[0].toString().split("\n"):[""];s.manufacturer=o.getValue(l,"Manufacturer"),s.model=o.getValue(l,"Product Name"),s.version=o.getValue(l,"Version"),s.serial=o.getValue(l,"Serial Number"),s.assetTag=o.getValue(l,"Asset Tag");try{l=a('echo -n "board_asset_tag: "; cat /sys/devices/virtual/dmi/id/board_asset_tag 2>/dev/null; echo;\n            echo -n "board_name: "; cat /sys/devices/virtual/dmi/id/board_name 2>/dev/null; echo;\n            echo -n "board_serial: "; cat /sys/devices/virtual/dmi/id/board_serial 2>/dev/null; echo;\n            echo -n "board_vendor: "; cat /sys/devices/virtual/dmi/id/board_vendor 2>/dev/null; echo;\n            echo -n "board_version: "; cat /sys/devices/virtual/dmi/id/board_version 2>/dev/null; echo;').toString().split("\n"),s.manufacturer=s.manufacturer?s.manufacturer:o.getValue(l,"board_vendor"),s.model=s.model?s.model:o.getValue(l,"board_name"),s.version=s.version?s.version:o.getValue(l,"board_version"),s.serial=s.serial?s.serial:o.getValue(l,"board_serial"),s.assetTag=s.assetTag?s.assetTag:o.getValue(l,"board_asset_tag")}catch(e){o.noop()}-1!==s.serial.toLowerCase().indexOf("o.e.m.")&&(s.serial="-"),-1!==s.assetTag.toLowerCase().indexOf("o.e.m.")&&(s.assetTag="-"),l=t.results[1]?t.results[1].toString().split("\n"):[""],s.memMax=1024*o.toInt(o.getValue(l,"Maximum Capacity"))*1024*1024||null,s.memSlots=o.toInt(o.getValue(l,"Number Of Devices"))||null;let c="";try{c=n.readFileSync("/proc/cpuinfo").toString().split("\n")}catch(e){o.noop()}if(o.getValue(c,"hardware").startsWith("BCM")){const e=o.decodePiCpuinfo(c);s.manufacturer=e.manufacturer,s.model="Raspberry Pi",s.serial=e.serial,s.version=e.type+" - "+e.revision,s.memMax=i.totalmem(),s.memSlots=0}e&&e(s),r(s)}))}if(p){const t=[];t.push(l("ioreg -c IOPlatformExpertDevice -d 2")),t.push(l("system_profiler SPMemoryDataType")),o.promiseAll(t).then((t=>{let n=t.results[0]?t.results[0].toString().replace(/[<>"]/g,"").split("\n"):[""];s.manufacturer=o.getValue(n,"manufacturer","=",!0),s.model=o.getValue(n,"model","=",!0),s.version=o.getValue(n,"version","=",!0),s.serial=o.getValue(n,"ioplatformserialnumber","=",!0),s.assetTag=o.getValue(n,"board-id","=",!0);let a=t.results[1]?t.results[1].toString().split("        BANK "):[""];1===a.length&&(a=t.results[1]?t.results[1].toString().split("        DIMM"):[""]),a.shift(),s.memSlots=a.length,"arm64"===i.arch()&&(s.memSlots=0,s.memMax=i.totalmem()),e&&e(s),r(s)}))}if(g&&(e&&e(s),r(s)),f)try{const t=[],n=parseInt(i.release())>=10,a=n?"MaxCapacityEx":"MaxCapacity";t.push(o.powerShell("Get-CimInstance Win32_baseboard | select Model,Manufacturer,Product,Version,SerialNumber,PartNumber,SKU | fl")),t.push(o.powerShell(`Get-CimInstance Win32_physicalmemoryarray | select ${a}, MemoryDevices | fl`)),o.promiseAll(t).then((t=>{let i=t.results[0]?t.results[0].toString().split("\r\n"):[""];s.manufacturer=o.getValue(i,"manufacturer",":"),s.model=o.getValue(i,"model",":"),s.model||(s.model=o.getValue(i,"product",":")),s.version=o.getValue(i,"version",":"),s.serial=o.getValue(i,"serialnumber",":"),s.assetTag=o.getValue(i,"partnumber",":"),s.assetTag||(s.assetTag=o.getValue(i,"sku",":")),i=t.results[1]?t.results[1].toString().split("\r\n"):[""],s.memMax=o.toInt(o.getValue(i,a,":"))*(n?1024:1)||null,s.memSlots=o.toInt(o.getValue(i,"MemoryDevices",":"))||null,e&&e(s),r(s)}))}catch(t){e&&e(s),r(s)}}))}))},r.chassis=function(e){const r=["Other","Unknown","Desktop","Low Profile Desktop","Pizza Box","Mini Tower","Tower","Portable","Laptop","Notebook","Hand Held","Docking Station","All in One","Sub Notebook","Space-Saving","Lunch Box","Main System Chassis","Expansion Chassis","SubChassis","Bus Expansion Chassis","Peripheral Chassis","Storage Chassis","Rack Mount Chassis","Sealed-Case PC","Multi-System Chassis","Compact PCI","Advanced TCA","Blade","Blade Enclosure","Tablet","Convertible","Detachable","IoT Gateway ","Embedded PC","Mini PC","Stick PC"];return new Promise((n=>{t.nextTick((()=>{let t={manufacturer:"",model:"",type:"",version:"",serial:"-",assetTag:"-",sku:""};if(u||d||h||m){s('echo -n "chassis_asset_tag: "; cat /sys/devices/virtual/dmi/id/chassis_asset_tag 2>/dev/null; echo;\n            echo -n "chassis_serial: "; cat /sys/devices/virtual/dmi/id/chassis_serial 2>/dev/null; echo;\n            echo -n "chassis_type: "; cat /sys/devices/virtual/dmi/id/chassis_type 2>/dev/null; echo;\n            echo -n "chassis_vendor: "; cat /sys/devices/virtual/dmi/id/chassis_vendor 2>/dev/null; echo;\n            echo -n "chassis_version: "; cat /sys/devices/virtual/dmi/id/chassis_version 2>/dev/null; echo;',(function(i,s){let a=s.toString().split("\n");t.manufacturer=o.getValue(a,"chassis_vendor");const l=parseInt(o.getValue(a,"chassis_type").replace(/\D/g,""));t.type=l&&!isNaN(l)&&l<r.length?r[l-1]:"",t.version=o.getValue(a,"chassis_version"),t.serial=o.getValue(a,"chassis_serial"),t.assetTag=o.getValue(a,"chassis_asset_tag"),-1!==t.manufacturer.toLowerCase().indexOf("o.e.m.")&&(t.manufacturer="-"),-1!==t.version.toLowerCase().indexOf("o.e.m.")&&(t.version="-"),-1!==t.serial.toLowerCase().indexOf("o.e.m.")&&(t.serial="-"),-1!==t.assetTag.toLowerCase().indexOf("o.e.m.")&&(t.assetTag="-"),e&&e(t),n(t)}))}if(p&&s("ioreg -c IOPlatformExpertDevice -d 2",(function(r,i){if(!r){let e=i.toString().replace(/[<>"]/g,"").split("\n");t.manufacturer=o.getValue(e,"manufacturer","=",!0),t.model=o.getValue(e,"model","=",!0),t.version=o.getValue(e,"version","=",!0),t.serial=o.getValue(e,"ioplatformserialnumber","=",!0),t.assetTag=o.getValue(e,"board-id","=",!0)}e&&e(t),n(t)})),g&&(e&&e(t),n(t)),f)try{o.powerShell("Get-CimInstance Win32_SystemEnclosure | select Model,Manufacturer,ChassisTypes,Version,SerialNumber,PartNumber,SKU | fl").then(((i,s)=>{if(!s){let e=i.toString().split("\r\n");t.manufacturer=o.getValue(e,"manufacturer",":"),t.model=o.getValue(e,"model",":");const n=parseInt(o.getValue(e,"ChassisTypes",":").replace(/\D/g,""));t.type=n&&!isNaN(n)&&n<r.length?r[n-1]:"",t.version=o.getValue(e,"version",":"),t.serial=o.getValue(e,"serialnumber",":"),t.assetTag=o.getValue(e,"partnumber",":"),t.sku=o.getValue(e,"sku",":"),-1!==t.manufacturer.toLowerCase().indexOf("o.e.m.")&&(t.manufacturer="-"),-1!==t.version.toLowerCase().indexOf("o.e.m.")&&(t.version="-"),-1!==t.serial.toLowerCase().indexOf("o.e.m.")&&(t.serial="-"),-1!==t.assetTag.toLowerCase().indexOf("o.e.m.")&&(t.assetTag="-")}e&&e(t),n(t)}))}catch(r){e&&e(t),n(t)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,fs:63,os:178}],275:[function(e,t,r){(function(t){(function(){"use strict";const n=e("child_process").exec,i=e("./util");let o=t.platform;const s="linux"===o||"android"===o,a="darwin"===o,l="win32"===o,c="freebsd"===o,u="openbsd"===o,p="netbsd"===o,f="sunos"===o;function d(e){const t={},r=e.split("\n");if(r&&r.length&&r[0].indexOf("Device")>=0){const e=r[0].split(" ");t.bus=parseInt(e[0],10),e[2]?t.deviceId=parseInt(e[2],10):t.deviceId=null}else t.bus=null,t.deviceId=null;const n=i.getValue(r,"idVendor"," ",!0).trim();let o=n.split(" ");o.shift();const s=o.join(" "),a=i.getValue(r,"idProduct"," ",!0).trim();let l=a.split(" ");l.shift();const c=l.join(" ");let u=i.getValue(r,"bInterfaceClass"," ",!0).trim().split(" ");u.shift();const p=u.join(" ");let f=i.getValue(r,"iManufacturer"," ",!0).trim().split(" ");f.shift();const d=f.join(" ");return t.id=(n.startsWith("0x")?n.split(" ")[0].substr(2,10):"")+":"+(a.startsWith("0x")?a.split(" ")[0].substr(2,10):""),t.name=c,t.type=function(e,t){let r=e;const n=(t+" "+e).toLowerCase();return n.indexOf("camera")>=0?r="Camera":n.indexOf("hub")>=0?r="Hub":n.indexOf("keybrd")>=0||n.indexOf("keyboard")>=0?r="Keyboard":n.indexOf("mouse")>=0?r="Mouse":n.indexOf("stora")>=0?r="Storage":n.indexOf("mic")>=0?r="Microphone":(n.indexOf("headset")>=0||n.indexOf("audio")>=0)&&(r="Audio"),r}(p,c),t.removable=null,t.vendor=s,t.manufacturer=d,t.maxPower=i.getValue(r,"MaxPower"," ",!0),t.serialNumber=null,t}function h(e,t){const r={};r.id=t;let n=(e=(e=e.replace(/ \|/g,"")).trim()).split("\n");n.shift();try{for(let e=0;e<n.length;e++)n[e]=n[e].trim(),n[e]=n[e].replace(/=/g,":"),"{"!==n[e]&&"}"!==n[e]&&n[e+1]&&"}"!==n[e+1].trim()&&(n[e]=n[e]+","),n[e]=n[e].replace(": Yes,",': "Yes",'),n[e]=n[e].replace(": No,",': "No",');const e=JSON.parse(n.join("\n")),t="yes"!==e["Built-In"].toLowerCase()&&"no"===e["non-removable"].toLowerCase();return r.bus=null,r.deviceId=null,r.id=e["USB Address"]||null,r.name=e.kUSBProductString||e["USB Product Name"]||null,r.type=function(e){let t="";return e.indexOf("camera")>=0?t="Camera":e.indexOf("touch bar")>=0?t="Touch Bar":e.indexOf("controller")>=0?t="Controller":e.indexOf("headset")>=0?t="Audio":e.indexOf("keyboard")>=0?t="Keyboard":e.indexOf("trackpad")>=0?t="Trackpad":e.indexOf("sensor")>=0?t="Sensor":e.indexOf("bthusb")>=0||e.indexOf("bth")>=0||e.indexOf("rfcomm")>=0?t="Bluetooth":e.indexOf("usbhub")>=0||e.indexOf(" hub")>=0?t="Hub":e.indexOf("mouse")>=0?t="Mouse":e.indexOf("mic")>=0?t="Microphone":e.indexOf("removable")>=0&&(t="Storage"),t}((e.kUSBProductString||e["USB Product Name"]||"").toLowerCase()+(t?" removable":"")),r.removable="no"===e["non-removable"].toLowerCase(),r.vendor=e.kUSBVendorString||e["USB Vendor Name"]||null,r.manufacturer=e.kUSBVendorString||e["USB Vendor Name"]||null,r.maxPower=null,r.serialNumber=e.kUSBSerialNumberString||null,r.name?r:null}catch(e){return null}}function m(e,t){const r=function(e,t){let r="";return t.indexOf("storage")>=0||t.indexOf("speicher")>=0?r="Storage":e.indexOf("usbhub")>=0?r="Hub":e.indexOf("storage")>=0?r="Storage":e.indexOf("usbcontroller")>=0?r="Controller":e.indexOf("keyboard")>=0?r="Keyboard":e.indexOf("pointing")>=0?r="Mouse":e.indexOf("disk")>=0&&(r="Storage"),r}(i.getValue(e,"CreationClassName",":").toLowerCase(),i.getValue(e,"name",":").toLowerCase());if(r){const n={bus:null};return n.deviceId=i.getValue(e,"deviceid",":"),n.id=t,n.name=i.getValue(e,"name",":"),n.type=r,n.removable=null,n.vendor=null,n.manufacturer=i.getValue(e,"Manufacturer",":"),n.maxPower=null,n.serialNumber=null,n}return null}r.usb=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(s){n("export LC_ALL=C; lsusb -v 2>/dev/null; unset LC_ALL",{maxBuffer:134217728},(function(n,i){if(!n){const e=("\n\n"+i.toString()).split("\n\nBus ");for(let r=1;r<e.length;r++){const n=d(e[r]);t.push(n)}}e&&e(t),r(t)}))}if(a){n("ioreg -p IOUSB -c AppleUSBRootHubDevice -w0 -l",{maxBuffer:134217728},(function(n,i){if(!n){const n=i.toString().split(" +-o ");for(let e=1;e<n.length;e++){const r=h(n[e]);r&&t.push(r)}e&&e(t),r(t)}e&&e(t),r(t)}))}l&&i.powerShell('Get-CimInstance CIM_LogicalDevice | where { $_.Description -match "USB"} | select Name,CreationClassName,DeviceId,Manufacturer | fl').then(((n,i)=>{if(!i){const e=n.toString().split(/\n\s*\n/);for(let r=0;r<e.length;r++){const n=m(e[r].split("\n"),r);n&&t.push(n)}}e&&e(t),r(t)})),(f||c||u||p)&&r(null)}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63}],276:[function(e,t,r){(function(t){(function(){"use strict";const n=e("child_process").exec,i=e("./util");let o=t.platform;const s="linux"===o||"android"===o,a="darwin"===o,l="win32"===o,c="freebsd"===o,u="openbsd"===o,p="netbsd"===o,f="sunos"===o;function d(e,t){let r=[],n=[],i={},o=!0,s=[],a=[],l={},c=!0;return e.forEach((function(e){if("---"===e)c=!1;else{let t=e.replace(/ +/g," ").split(" ");c?n.push({user:t[0],tty:t[1],date:t[2],time:t[3],ip:t&&t.length>4?t[4].replace(/\(/g,"").replace(/\)/g,""):""}):o?(s=t,s.forEach((function(t){a.push(e.indexOf(t))})),o=!1):(i.user=e.substring(a[0],a[1]-1).trim(),i.tty=e.substring(a[1],a[2]-1).trim(),i.ip=e.substring(a[2],a[3]-1).replace(/\(/g,"").replace(/\)/g,"").trim(),i.command=e.substring(a[7],1e3).trim(),l=n.filter((function(e){return e.user.substring(0,8).trim()===i.user&&e.tty===i.tty})),1===l.length&&r.push({user:l[0].user,tty:l[0].tty,date:l[0].date,time:l[0].time,ip:l[0].ip,command:i.command}))}})),0===r.length&&2===t?n:r}function h(e){let t=[],r=[],n={},i={},o=!0;return e.forEach((function(e){if("---"===e)o=!1;else{let s=e.replace(/ +/g," ").split(" ");o?r.push({user:s[0],tty:s[1],date:(new Date).getFullYear()+"-"+("0"+("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC".indexOf(s[2].toUpperCase())/3+1)).slice(-2)+"-"+("0"+s[3]).slice(-2),time:s[4]}):(n.user=s[0],n.tty=s[1],n.ip="-"!==s[2]?s[2]:"",n.command=s.slice(5,1e3).join(" "),i=r.filter((function(e){return e.user===n.user&&(e.tty.substring(3,1e3)===n.tty||e.tty===n.tty)})),1===i.length&&t.push({user:i[0].user,tty:i[0].tty,date:i[0].date,time:i[0].time,ip:n.ip,command:n.command}))}})),t}r.users=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(s&&n('who --ips; echo "---"; w | tail -n +2',(function(i,o){if(i)e&&e(t),r(t);else{let i=o.toString().split("\n");t=d(i,1),0===t.length?n('who; echo "---"; w | tail -n +2',(function(n,o){n||(i=o.toString().split("\n"),t=d(i,2)),e&&e(t),r(t)})):(e&&e(t),r(t))}})),(c||u||p)&&n('who; echo "---"; w -ih',(function(n,i){if(!n){let e=i.toString().split("\n");t=h(e)}e&&e(t),r(t)})),f&&n('who; echo "---"; w -h',(function(n,i){if(!n){let e=i.toString().split("\n");t=h(e)}e&&e(t),r(t)})),a&&n('who; echo "---"; w -ih',(function(n,i){if(!n){let e=i.toString().split("\n");t=h(e)}e&&e(t),r(t)})),l)try{let n='Get-CimInstance Win32_LogonSession | select LogonId,@{n="StartTime";e={$_.StartTime.ToString("yyyy-MM-dd HH:mm:ss")}} | fl; echo \'#-#-#-#\';';n+="Get-CimInstance Win32_LoggedOnUser | select antecedent,dependent | fl ; echo '#-#-#-#';",n+="$process = (Get-CimInstance Win32_Process -Filter \"name = 'explorer.exe'\"); Invoke-CimMethod -InputObject $process[0] -MethodName GetOwner | select user, domain | fl; get-process -name explorer | select-object sessionid | fl; echo '#-#-#-#';",n+="query user",i.powerShell(n).then((n=>{if(n){let e=function(e){const t={};return e.forEach((e=>{const r=e.split("\r\n"),n=i.getValue(r,"LogonId"),o=i.getValue(r,"starttime");n&&(t[n]=o)})),t}(((n=n.split("#-#-#-#"))[0]||"").split(/\n\s*\n/)),r=function(e){const t={};return e.forEach((e=>{const r=e.split("\r\n");let n=i.getValue(r,"antecedent",":",!0).split("=");const o=n.length>2?n[1].split(",")[0].replace(/"/g,"").trim():"",s=n.length>2?n[2].replace(/"/g,"").replace(/\)/g,"").trim():"";n=i.getValue(r,"dependent",":",!0).split("=");const a=n.length>1?n[1].replace(/"/g,"").replace(/\)/g,"").trim():"";a&&(t[a]={domain:s,user:o})})),t}((n[1]||"").split(/\n\s*\n/)),o=function(e){e=e.filter((e=>e));let t=[];const r=e[0],n=[];if(r){const i=" "===r[0]?1:0;n.push(i-1);let o=0;for(let e=i+1;e<r.length;e++)" "!==r[e]||" "!==r[e-1]&&"."!==r[e-1]?o&&(n.push(o),o=0):o=e;for(let r=1;r<e.length;r++)if(e[r].trim()){const i=e[r].substring(n[0]+1,n[1]).trim()||"",o=e[r].substring(n[1]+1,n[2]-2).trim()||"";t.push({user:i,tty:o})}}return t}((n[3]||"").split("\r\n")),s=function(e,t){const r=[];return e.forEach((e=>{const n=e.split("\r\n"),o=i.getValue(n,"domain",":",!0),s=i.getValue(n,"user",":",!0),a=i.getValue(n,"sessionid",":",!0);if(s){const e=t.filter((e=>function(e,t){e=e.toLowerCase(),t=t.toLowerCase();let r=0,n=e.length;t.length>n&&(n=t.length);for(let i=0;i<n;i++){(e[i]||"")===(t[i]||"")&&r++}return n>10?r/n>.9:n>0&&r/n>.8}(e.user,s)));r.push({domain:o,user:s,tty:e&&e[0]&&e[0].tty?e[0].tty:a})}})),r}((n[2]||"").split(/\n\s*\n/),o);for(let t in r)({}).hasOwnProperty.call(r,t)&&(r[t].dateTime={}.hasOwnProperty.call(e,t)?e[t]:"");s.forEach((e=>{let n="";for(let t in r)({}).hasOwnProperty.call(r,t)&&r[t].user===e.user&&(!n||n<r[t].dateTime)&&(n=r[t].dateTime);t.push({user:e.user,tty:e.tty,date:`${n.substring(0,10)}`,time:`${n.substring(11,19)}`,ip:"",command:""})}))}e&&e(t),r(t)}))}catch(n){e&&e(t),r(t)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63}],277:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("fs"),o=e("path"),s=e("child_process").spawn,a=e("child_process").exec,l=e("child_process").execSync,c=e("util");let u=t.platform;const p="linux"===u||"android"===u,f="darwin"===u,d="win32"===u,h="freebsd"===u,m="openbsd"===u,g="netbsd"===u;let y=0,v="",b="",w=null;const _=t.env.WINDIR||"C:\\Windows";let S,x="",O=[],E=!1;const C="$OutputEncoding = [System.Console]::OutputEncoding = [System.Console]::InputEncoding = [System.Text.Encoding]::UTF8 ; ",P="--###START###--",I="--ERROR--",k="--###ENDCMD###--",L="--##ID##--",T={windowsHide:!0,maxBuffer:2048e4,encoding:"UTF-8",env:c._extend({},t.env,{LANG:"en_US.UTF-8"})};const A=(new String).replace,j=(new String).toLowerCase,M=(new String).toString,R=(new String).substr,D=(new String).trim,N=(new String).startsWith,V=Math.min;function U(e,t,r,n,i){r=r||":",t=t.toLowerCase(),n=n||!1,i=i||!1;let o="";return e.forEach((e=>{let s=e.toLowerCase().replace(/\t/g,"");if(n&&(s=s.trim()),s.startsWith(t)&&(!i||(s.match(t+r)||s.match(t+" "+r)))){const t=n?e.trim().split(r):e.split(r);t.length>=2&&(t.shift(),o=t.join(r).trim())}})),o}function B(){if("Windows_NT"===n.type()&&!v&&(v=_+"\\system32\\wbem\\wmic.exe",!i.existsSync(v)))try{const e=l("WHERE WMIC",T).toString().split("\r\n");v=e&&e.length?e[0]:"wmic"}catch(e){v="wmic"}return v}function F(e){let t,r="",n="";if(e.indexOf(P)>=0){t=e.split(P);const n=t[1].split(L);r=n[0],n.length>1&&(e=n.slice(1).join(L))}e.indexOf(k)>=0&&(t=e.split(k),n=t[0]);let i=-1;for(let e=0;e<O.length;e++)O[e].id===r&&(i=e,O[e].callback(n));i>=0&&O.splice(i,1)}function W(e){if(E){const r=Math.random().toString(36).substring(2,12);return new Promise((i=>{t.nextTick((()=>{O.push({id:r,cmd:e,callback:function(e){i(e)},start:new Date});try{S&&S.pid&&S.stdin.write(C+"echo "+P+r+"--##ID##--; "+n.EOL+e+n.EOL+"echo "+k+n.EOL)}catch(e){i("")}}))}))}{let r="";return new Promise((i=>{t.nextTick((()=>{try{const o=s("powershell.exe",["-NoLogo","-InputFormat","Text","-NoExit","-ExecutionPolicy","Unrestricted","-Command","-"],{stdio:"pipe",windowsHide:!0,maxBuffer:2048e4,encoding:"UTF-8",env:c._extend({},t.env,{LANG:"en_US.UTF-8"})});if(o&&!o.pid&&o.on("error",(function(){i(r)})),o&&o.pid){o.stdout.on("data",(function(e){r+=e.toString("utf8")})),o.stderr.on("data",(function(){o.kill(),i(r)})),o.on("close",(function(){o.kill(),i(r)})),o.on("error",(function(){o.kill(),i(r)}));try{o.stdin.write(C+e+n.EOL),o.stdin.write("exit"+n.EOL),o.stdin.end()}catch(e){o.kill(),i(r)}}else i(r)}catch(e){i(r)}}))}))}}function q(e){return"string"==typeof e&&!isNaN(e)&&!isNaN(parseFloat(e))}function G(){}r.toInt=function(e){let t=parseInt(e,10);return isNaN(t)&&(t=0),t},r.execOptsWin=T,r.getCodepage=function(){if(d){if(!b)try{const e=l("chcp",T),t=e.toString().split("\r\n")[0].split(":");b=t.length>1?t[1].replace(".","").trim():""}catch(e){b="437"}return b}if(p||f||h||m||g){if(!b)try{const e=l("echo $LANG"),t=e.toString().split("\r\n")[0].split(".");b=t.length>1?t[1].trim():"",b||(b="UTF-8")}catch(e){b="UTF-8"}return b}},r.execWin=function(e,t,r){r||(r=t,t=T),a("chcp 65001 > nul && cmd /C "+e+" && chcp "+b+" > nul",t,(function(e,t){r(e,t)}))},r.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},r.unique=function(e){let t=[],r={};for(let n=0;n<e.length;n++){let i=Object.keys(e[n]);i.sort((function(e,t){return e-t}));let o="";for(let t=0;t<i.length;t++)o+=JSON.stringify(i[t]),o+=JSON.stringify(e[n][i[t]]);({}).hasOwnProperty.call(r,o)||(t.push(e[n]),r[o]=!0)}return t},r.sortByKey=function(e,t){return e.sort((function(e,r){let n="",i="";return t.forEach((function(t){n+=e[t],i+=r[t]})),n<i?-1:n>i?1:0}))},r.cores=function(){return 0===y&&(y=n.cpus().length),y},r.getValue=U,r.decodeEscapeSequence=function(e,t){return t=t||16,e.replace(/\\x([0-9A-Fa-f]{2})/g,(function(){return String.fromCharCode(parseInt(arguments[1],t))}))},r.parseDateTime=function(e,t){const r={date:"",time:""};let n=((t=t||{}).dateFormat||"").toLowerCase(),i=t.pmDesignator||"";const o=e.split(" ");if(o[0]){if(o[0].indexOf("/")>=0){const t=o[0].split("/");if(3===t.length)if(4===t[0].length)r.date=t[0]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[2]).substr(-2);else if(2===t[2].length)n.indexOf("/d/")>-1||n.indexOf("/dd/"),r.date="20"+t[2]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[0]).substr(-2);else{(e.toLowerCase().indexOf("pm")>-1||e.toLowerCase().indexOf("p.m.")>-1||e.toLowerCase().indexOf("p. m.")>-1||e.toLowerCase().indexOf("am")>-1||e.toLowerCase().indexOf("a.m.")>-1||e.toLowerCase().indexOf("a. m.")>-1||n.indexOf("/d/")>-1||n.indexOf("/dd/")>-1)&&0!==n.indexOf("dd/")?r.date=t[2]+"-"+("0"+t[0]).substr(-2)+"-"+("0"+t[1]).substr(-2):r.date=t[2]+"-"+("0"+t[1]).substr(-2)+"-"+("0"+t[0]).substr(-2)}}if(o[0].indexOf(".")>=0){const e=o[0].split(".");3===e.length&&(n.indexOf(".d.")>-1||n.indexOf(".dd.")>-1?r.date=e[2]+"-"+("0"+e[0]).substr(-2)+"-"+("0"+e[1]).substr(-2):r.date=e[2]+"-"+("0"+e[1]).substr(-2)+"-"+("0"+e[0]).substr(-2))}if(o[0].indexOf("-")>=0){const e=o[0].split("-");3===e.length&&(r.date=e[0]+"-"+("0"+e[1]).substr(-2)+"-"+("0"+e[2]).substr(-2))}}if(o[1]){o.shift();let e=o.join(" ");r.time=function(e,t){t=t||"";let r=0,n=0,i=function(e){let t="",r=0;return e.split("").forEach((e=>{e>="0"&&e<="9"?1===r&&r++:(0===r&&r++,1===r&&(t+=e))})),t}(e=e.toUpperCase()),o=e.split(i);if(o.length>=2){o[2]&&(o[1]+=o[2]);let e=o[1]&&o[1].toLowerCase().indexOf("pm")>-1||o[1].toLowerCase().indexOf("p.m.")>-1||o[1].toLowerCase().indexOf("p. m.")>-1||o[1].toLowerCase().indexOf("n")>-1||o[1].toLowerCase().indexOf("ch")>-1||o[1].toLowerCase().indexOf("ös")>-1||t&&o[1].toLowerCase().indexOf(t)>-1;return r=parseInt(o[0],10),n=parseInt(o[1],10),r=e&&r<12?r+12:r,("0"+r).substr(-2)+":"+("0"+n).substr(-2)}}(e,i)}return r},r.parseHead=function(e,t){let r=t>0,n=1,i=0,o=0,s=[];for(let a=0;a<e.length;a++)n<=t?(/\s/.test(e[a])&&!r&&(o=a-1,s.push({from:i,to:o+1,cap:e.substring(i,o+1)}),i=o+2,n++),r=" "===e[a]):(!/\s/.test(e[a])&&r&&(o=a-1,i<o&&s.push({from:i,to:o,cap:e.substring(i,o)}),i=o+1,n++),r=" "===e[a]);o=5e3,s.push({from:i,to:o,cap:e.substring(i,o)});let a=s.length;for(let e=0;e<a;e++)0===s[e].cap.replace(/\s/g,"").length&&e+1<a&&(s[e].to=s[e+1].to,s[e].cap=s[e].cap+s[e+1].cap,s.splice(e+1,1),a-=1);return s},r.findObjectByKey=function(e,t,r){for(let n=0;n<e.length;n++)if(e[n][t]===r)return n;return-1},r.getWmic=B,r.wmic=function(e){return new Promise((r=>{t.nextTick((()=>{try{W(B()+" "+e).then((e=>{r(e,"")}))}catch(e){r("",e)}}))}))},r.darwinXcodeExists=function(){const e=i.existsSync("/Library/Developer/CommandLineTools/usr/bin/"),t=i.existsSync("/Applications/Xcode.app/Contents/Developer/Tools"),r=i.existsSync("/Library/Developer/Xcode/");return e||r||t},r.getVboxmanage=function(){return d?`"${t.env.VBOX_INSTALL_PATH||t.env.VBOX_MSI_INSTALL_PATH}\\VBoxManage.exe"`:"vboxmanage"},r.powerShell=W,r.powerShellStart=function(){S||(S=s("powershell.exe",["-NoLogo","-InputFormat","Text","-NoExit","-Command","-"],{stdio:"pipe",windowsHide:!0,maxBuffer:2048e4,encoding:"UTF-8",env:c._extend({},t.env,{LANG:"en_US.UTF-8"})}),S&&S.pid&&(E=!0,S.stdout.on("data",(function(e){x+=e.toString("utf8"),e.indexOf(k)>=0&&(F(x),x="")})),S.stderr.on("data",(function(){F(x+I)})),S.on("error",(function(){F(x+I)})),S.on("close",(function(){S.kill()}))))},r.powerShellRelease=function(){try{S&&(S.stdin.write("exit"+n.EOL),S.stdin.end(),E=!1)}catch(e){S&&S.kill()}S=null},r.execSafe=function(e,r,n){let i="";return n=n||{},new Promise((o=>{t.nextTick((()=>{try{const t=s(e,r,n);t&&!t.pid&&t.on("error",(function(){o(i)})),t&&t.pid?(t.stdout.on("data",(function(e){i+=e.toString()})),t.on("close",(function(){t.kill(),o(i)})),t.on("error",(function(){t.kill(),o(i)}))):o(i)}catch(e){o(i)}}))}))},r.nanoSeconds=function(){const e=t.hrtime();return Array.isArray(e)&&2===e.length?1e9*+e[0]+ +e[1]:0},r.countUniqueLines=function(e,t){t=t||"";const r=[];return e.forEach((e=>{e.startsWith(t)&&-1===r.indexOf(e)&&r.push(e)})),r.length},r.countLines=function(e,t){t=t||"";const r=[];return e.forEach((e=>{e.startsWith(t)&&r.push(e)})),r.length},r.noop=G,r.isRaspberry=function(){let e=[];try{e=i.readFileSync("/proc/cpuinfo",{encoding:"utf8"}).toString().split("\n")}catch(e){return!1}const t=U(e,"hardware");return t&&["BCM2708","BCM2709","BCM2710","BCM2711","BCM2835","BCM2836","BCM2837","BCM2837B0"].indexOf(t)>-1},r.isRaspbian=function(){let e=[];try{e=i.readFileSync("/etc/os-release",{encoding:"utf8"}).toString().split("\n")}catch(e){return!1}const t=U(e,"id","=");return t&&t.indexOf("raspbian")>-1},r.sanitizeShellString=function(e,t){void 0===t&&(t=!1);const r=e||"";let n="";for(let e=0;e<=V(r.length,2e3);e++)void 0===r[e]||">"===r[e]||"<"===r[e]||"*"===r[e]||"?"===r[e]||"["===r[e]||"]"===r[e]||"|"===r[e]||"˚"===r[e]||"$"===r[e]||";"===r[e]||"&"===r[e]||"("===r[e]||")"===r[e]||"]"===r[e]||"#"===r[e]||"\\"===r[e]||"\t"===r[e]||"\n"===r[e]||"'"===r[e]||"`"===r[e]||'"'===r[e]||r[e].length>1||t&&"@"===r[e]||t&&" "===r[e]||t&&"{"==r[e]||t&&")"==r[e]||(n+=r[e]);return n},r.isPrototypePolluted=function(){const e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t=!0,r="";r.__proto__.replace=A,r.__proto__.toLowerCase=j,r.__proto__.toString=M,r.__proto__.substr=R,t=t||62!==e.length;const n=Date.now();if("number"==typeof n&&n>16e11){const i=n%100+15;for(let n=0;n<i;n++){const n=61.99999999*Math.random()+1,i=parseInt(Math.floor(n).toString(),10),o=parseInt(n.toString().split(".")[0],10),s=61.99999999*Math.random()+1,a=parseInt(Math.floor(s).toString(),10),l=parseInt(s.toString().split(".")[0],10);t=t&&n!==s,t=t&&i===o&&a===l,r+=e[i-1]}t=t&&r.length===i;let o=Math.random()*i*.9999999999,s=r.substr(0,o)+" "+r.substr(o,2e3);s.__proto__.replace=A;let a=s.replace(/ /g,"");t=t&&r===a,o=Math.random()*i*.9999999999,s=r.substr(0,o)+"{"+r.substr(o,2e3),a=s.replace(/{/g,""),t=t&&r===a,o=Math.random()*i*.9999999999,s=r.substr(0,o)+"*"+r.substr(o,2e3),a=s.replace(/\*/g,""),t=t&&r===a,o=Math.random()*i*.9999999999,s=r.substr(0,o)+"$"+r.substr(o,2e3),a=s.replace(/\$/g,""),t=t&&r===a;const l=r.toLowerCase();t=t&&l.length===i&&l[i-1]&&!l[i];for(let e=0;e<i;e++){const n=r[e];n.__proto__.toLowerCase=j;const i=l?l[e]:"",o=n.toLowerCase();t=t&&o[0]===i&&o[0]&&!o[1]}}return!t},r.decodePiCpuinfo=function(e){const t={"0002":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0003":{type:"B",revision:"1.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0004":{type:"B",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0005":{type:"B",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"0006":{type:"B",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0007":{type:"A",revision:"2.0",memory:256,manufacturer:"Egoman",processor:"BCM2835"},"0008":{type:"A",revision:"2.0",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0009":{type:"A",revision:"2.0",memory:256,manufacturer:"Qisda",processor:"BCM2835"},"000d":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"000e":{type:"B",revision:"2.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"000f":{type:"B",revision:"2.0",memory:512,manufacturer:"Egoman",processor:"BCM2835"},"0010":{type:"B+",revision:"1.2",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0011":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Sony UK",processor:"BCM2835"},"0012":{type:"A+",revision:"1.1",memory:256,manufacturer:"Sony UK",processor:"BCM2835"},"0013":{type:"B+",revision:"1.2",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0014":{type:"CM1",revision:"1.0",memory:512,manufacturer:"Embest",processor:"BCM2835"},"0015":{type:"A+",revision:"1.1",memory:256,manufacturer:"512MB\tEmbest",processor:"BCM2835"}},r=["BCM2835","BCM2836","BCM2837","BCM2711"],n=["Sony UK","Egoman","Embest","Sony Japan","Embest","Stadium"],i={"00":"A","01":"B","02":"A+","03":"B+","04":"2B","05":"Alpha (early prototype)","06":"CM1","08":"3B","09":"Zero","0a":"CM3","0c":"Zero W","0d":"3B+","0e":"3A+","0f":"Internal use only",10:"CM3+",11:"4B",12:"Zero 2 W",13:"400",14:"CM4"},o=U(e,"revision",":",!0),s=U(e,"model:",":",!0),a=U(e,"serial",":",!0);let l={};if({}.hasOwnProperty.call(t,o))l={model:s,serial:a,revisionCode:o,memory:t[o].memory,manufacturer:t[o].manufacturer,processor:t[o].processor,type:t[o].type,revision:t[o].revision};else{const t=("00000000"+U(e,"revision",":",!0).toLowerCase()).substr(-8),u=parseInt((c=t.substr(2,1),("00000000"+parseInt(c,16).toString(2)).substr(-8)).substr(5,3),2)||0,p=n[parseInt(t.substr(3,1),10)],f=r[parseInt(t.substr(4,1),10)],d=t.substr(5,2);l={model:s,serial:a,revisionCode:o,memory:256*Math.pow(2,u),manufacturer:p,processor:f,type:{}.hasOwnProperty.call(i,d)?i[d]:"",revision:"1."+t.substr(7,1)}}var c;return l},r.promiseAll=function(e){const t=e.map((function(e){return new Promise((function(t){let r=new Array(2);e.then((function(e){r[0]=e})).catch((function(e){r[1]=e})).then((function(){t(r)}))}))})),r=[],n=[];return Promise.all(t).then((function(e){return e.forEach((function(e){e[1]?(r.push(e[1]),n.push(null)):(r.push(null),n.push(e[0]))})),{errors:r,results:n}}))},r.promisify=function(e){return function(){const t=Array.prototype.slice.call(arguments);return new Promise((function(r,n){t.push((function(e,t){e?n(e):r(t)})),e.apply(null,t)}))}},r.promisifySave=function(e){return function(){const t=Array.prototype.slice.call(arguments);return new Promise((function(r){t.push((function(e,t){r(t)})),e.apply(null,t)}))}},r.smartMonToolsInstalled=function(){if(null!==w)return w;if(w=!1,d)try{const e=l("WHERE smartctl 2>nul",T).toString().split("\r\n");w=!(!e||!e.length)&&e[0].indexOf(":\\")>=0}catch(e){w=!1}if(p||f||h||m||g){const e=l("which smartctl 2>/dev/null",T).toString().split("\r\n");w=e.length>0}return w},r.linuxVersion=function(){let e="";if(p)try{e=l("uname -v").toString()}catch(t){e=""}return e},r.plistParser=function(e){const t=["array","dict","key","string","integer","date","real","data","boolean","arrayEmpty"];let r=e.indexOf("<plist version"),n=e.length;for(;">"!==e[r]&&r<n;)r++;let i=0,o=!1,s=!1,a=!1,l=[{tagStart:"",tagEnd:"",tagContent:"",key:"",data:null}],c="",u=e[r];for(;r<n;)c=u,r+1<n&&(u=e[r+1]),"<"===c?(s=!1,"/"===u?a=!0:l[i].tagStart?(l[i].tagContent="",l[i].data||(l[i].data="array"===l[i].tagStart?[]:{}),i++,l.push({tagStart:"",tagEnd:"",tagContent:"",key:null,data:null}),o=!0,s=!1):o||(o=!0)):">"===c?("true/"===l[i].tagStart&&(o=!1,a=!0,l[i].tagStart="",l[i].tagEnd="/boolean",l[i].data=!0),"false/"===l[i].tagStart&&(o=!1,a=!0,l[i].tagStart="",l[i].tagEnd="/boolean",l[i].data=!1),"array/"===l[i].tagStart&&(o=!1,a=!0,l[i].tagStart="",l[i].tagEnd="/arrayEmpty",l[i].data=[]),s&&(s=!1),o&&(o=!1,s=!0,"array"===l[i].tagStart&&(l[i].data=[]),"dict"===l[i].tagStart&&(l[i].data={})),a&&(a=!1,l[i].tagEnd&&t.indexOf(l[i].tagEnd.substr(1))>=0&&("/dict"===l[i].tagEnd||"/array"===l[i].tagEnd?(i>1&&"array"===l[i-2].tagStart&&l[i-2].data.push(l[i-1].data),i>1&&"dict"===l[i-2].tagStart&&(l[i-2].data[l[i-1].key]=l[i-1].data),i--,l.pop(),l[i].tagContent="",l[i].tagStart="",l[i].tagEnd=""):("/key"===l[i].tagEnd&&l[i].tagContent?l[i].key=l[i].tagContent:("/real"===l[i].tagEnd&&l[i].tagContent&&(l[i].data=parseFloat(l[i].tagContent)||0),"/integer"===l[i].tagEnd&&l[i].tagContent&&(l[i].data=parseInt(l[i].tagContent)||0),"/string"===l[i].tagEnd&&l[i].tagContent&&(l[i].data=l[i].tagContent||""),"/boolean"===l[i].tagEnd&&(l[i].data=l[i].tagContent||!1),"/arrayEmpty"===l[i].tagEnd&&(l[i].data=l[i].tagContent||[]),i>0&&"array"===l[i-1].tagStart&&l[i-1].data.push(l[i].data),i>0&&"dict"===l[i-1].tagStart&&(l[i-1].data[l[i].key]=l[i].data)),l[i].tagContent="",l[i].tagStart="",l[i].tagEnd="")),l[i].tagEnd="",o=!1,s=!1)):(o&&(l[i].tagStart+=c),a&&(l[i].tagEnd+=c),s&&(l[i].tagContent+=c)),r++;return l[0].data},r.plistReader=function(e){const t=e.split("\n");for(let e=0;e<t.length;e++){if(t[e].indexOf(" = ")>=0){const r=t[e].split(" = ");if(r[0]=r[0].trim(),r[0].startsWith('"')||(r[0]='"'+r[0]+'"'),r[1]=r[1].trim(),-1===r[1].indexOf('"')&&r[1].endsWith(";")){const e=r[1].substring(0,r[1].length-1);q(e)||(r[1]=`"${e}";`)}if(r[1].indexOf('"')>=0&&r[1].endsWith(";")){const e=r[1].substring(0,r[1].length-1).replace(/"/g,"");q(e)&&(r[1]=`${e};`)}t[e]=r.join(" : ")}t[e]=t[e].replace(/\(/g,"[").replace(/\)/g,"]").replace(/;/g,",").trim(),t[e].startsWith("}")&&t[e-1]&&t[e-1].endsWith(",")&&(t[e-1]=t[e-1].substring(0,t[e-1].length-1))}e=t.join("");let r={};try{r=JSON.parse(e)}catch(e){}return r},r.stringReplace=A,r.stringToLower=j,r.stringToString=M,r.stringSubstr=R,r.stringTrim=D,r.stringStartWith=N,r.mathMin=V,r.WINDIR=_,r.getFilesInPath=function(e){const t=i.lstatSync,r=i.readdirSync,n=o.join;function s(e){return t(e).isDirectory()}function a(e){return t(e).isFile()}return i.existsSync(e)?function e(t){try{let i=function(e){return r(e).map((function(t){return n(e,t)})).filter(s)}(t);return i.map((function(t){return e(t)})).reduce((function(e,t){return e.concat(t)}),[]).concat(function(e){return r(e).map((function(t){return n(e,t)})).filter(a)}(t))}catch(e){return[]}}(e):[]},r.semverCompare=function(e,t){let r=0;const n=e.split("."),i=t.split(".");return n[0]<i[0]?r=1:n[0]>i[0]?r=-1:n[0]===i[0]&&n.length>=2&&i.length>=2&&(n[1]<i[1]?r=1:n[1]>i[1]?r=-1:n[1]===i[1]&&(n.length>=3&&i.length>=3?n[2]<i[2]?r=1:n[2]>i[2]&&(r=-1):i.length>=3&&(r=1))),r}}).call(this)}).call(this,e("_process"))},{_process:181,child_process:63,fs:63,os:178,path:179,util:238}],278:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("child_process").exec,o=e("./util");r.vboxInfo=function(e){let r=[];return new Promise((s=>{t.nextTick((()=>{try{i(o.getVboxmanage()+" list vms --long",(function(t,i){let a=(n.EOL+i.toString()).split(n.EOL+"Name:");a.shift(),a.forEach((e=>{const t=("Name:"+e).split(n.EOL),i=o.getValue(t,"State"),s=i.startsWith("running"),a=s?i.replace("running (since ","").replace(")","").trim():"";let l=0;try{if(s){const e=new Date(a),t=e.getTimezoneOffset();l=Math.round((Date.now()-Date.parse(e))/1e3)+60*t}}catch(e){o.noop()}const c=s?"":i.replace("powered off (since","").replace(")","").trim();let u=0;try{if(!s){const e=new Date(c),t=e.getTimezoneOffset();u=Math.round((Date.now()-Date.parse(e))/1e3)+60*t}}catch(e){o.noop()}r.push({id:o.getValue(t,"UUID"),name:o.getValue(t,"Name"),running:s,started:a,runningSince:l,stopped:c,stoppedSince:u,guestOS:o.getValue(t,"Guest OS"),hardwareUUID:o.getValue(t,"Hardware UUID"),memory:parseInt(o.getValue(t,"Memory size","     "),10),vram:parseInt(o.getValue(t,"VRAM size"),10),cpus:parseInt(o.getValue(t,"Number of CPUs"),10),cpuExepCap:o.getValue(t,"CPU exec cap"),cpuProfile:o.getValue(t,"CPUProfile"),chipset:o.getValue(t,"Chipset"),firmware:o.getValue(t,"Firmware"),pageFusion:"enabled"===o.getValue(t,"Page Fusion"),configFile:o.getValue(t,"Config file"),snapshotFolder:o.getValue(t,"Snapshot folder"),logFolder:o.getValue(t,"Log folder"),hpet:"enabled"===o.getValue(t,"HPET"),pae:"enabled"===o.getValue(t,"PAE"),longMode:"enabled"===o.getValue(t,"Long Mode"),tripleFaultReset:"enabled"===o.getValue(t,"Triple Fault Reset"),apic:"enabled"===o.getValue(t,"APIC"),x2Apic:"enabled"===o.getValue(t,"X2APIC"),acpi:"enabled"===o.getValue(t,"ACPI"),ioApic:"enabled"===o.getValue(t,"IOAPIC"),biosApicMode:o.getValue(t,"BIOS APIC mode"),bootMenuMode:o.getValue(t,"Boot menu mode"),bootDevice1:o.getValue(t,"Boot Device 1"),bootDevice2:o.getValue(t,"Boot Device 2"),bootDevice3:o.getValue(t,"Boot Device 3"),bootDevice4:o.getValue(t,"Boot Device 4"),timeOffset:o.getValue(t,"Time offset"),rtc:o.getValue(t,"RTC")})})),e&&e(r),s(r)}))}catch(t){e&&e(r),s(r)}}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,os:178}],279:[function(e,t,r){(function(t){(function(){"use strict";const n=e("os"),i=e("child_process").exec,o=e("child_process").execSync,s=e("./util");let a=t.platform;const l="linux"===a||"android"===a,c="darwin"===a,u="win32"===a;function p(e){return parseFloat(e)/2-100}function f(e){const t=2*(parseFloat(e)+100);return t<=100?t:100}const d={1:2412,2:2417,3:2422,4:2427,5:2432,6:2437,7:2442,8:2447,9:2452,10:2457,11:2462,12:2467,13:2472,14:2484,32:5160,34:5170,36:5180,38:5190,40:5200,42:5210,44:5220,46:5230,48:5240,50:5250,52:5260,54:5270,56:5280,58:5290,60:5300,62:5310,64:5320,68:5340,96:5480,100:5500,102:5510,104:5520,106:5530,108:5540,110:5550,112:5560,114:5570,116:5580,118:5590,120:5600,122:5610,124:5620,126:5630,128:5640,132:5660,134:5670,136:5680,138:5690,140:5700,142:5710,144:5720,149:5745,151:5755,153:5765,155:5775,157:5785,159:5795,161:5805,165:5825,169:5845,173:5865,183:4915,184:4920,185:4925,187:4935,188:4940,189:4945,192:4960,196:4980};function h(e){return{}.hasOwnProperty.call(d,e)?d[e]:null}function m(e){let t=0;for(let r in d)({}).hasOwnProperty.call(d,r)&&d[r]===e&&(t=s.toInt(r));return t}function g(){const e=[];try{const t=o("iw dev 2>/dev/null").toString().split("\n").map((e=>e.trim())).join("\n").split("\nInterface ");return t.shift(),t.forEach((t=>{const r=t.split("\n"),n=r[0],i=s.toInt(s.getValue(r,"ifindex"," ")),o=s.getValue(r,"addr"," "),a=s.toInt(s.getValue(r,"channel"," "));e.push({id:i,iface:n,mac:o,channel:a})})),e}catch(t){try{const t=o("nmcli -t -f general,wifi-properties,wired-properties,interface-flags,capabilities,nsp device show 2>/dev/null").toString().split("\nGENERAL.DEVICE:");let r=1;return t.forEach((t=>{const n=t.split("\n"),i=s.getValue(n,"GENERAL.DEVICE"),o=s.getValue(n,"GENERAL.TYPE"),a=r++,l=s.getValue(n,"GENERAL.HWADDR");"wifi"===o.toLowerCase()&&e.push({id:a,iface:i,mac:l,channel:""})})),e}catch(e){return[]}}}function y(e){const t=`nmcli -t -f general,wifi-properties,capabilities,ip4,ip6 device show ${e} 2>/dev/null`;try{const r=o(t).toString().split("\n"),n=s.getValue(r,"GENERAL.CONNECTION");return{iface:e,type:s.getValue(r,"GENERAL.TYPE"),vendor:s.getValue(r,"GENERAL.VENDOR"),product:s.getValue(r,"GENERAL.PRODUCT"),mac:s.getValue(r,"GENERAL.HWADDR").toLowerCase(),ssid:"--"!==n?n:null}}catch(e){return{}}}function v(){const e=[];try{const t=o("nmcli -t -m multiline --fields active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags device wifi list 2>/dev/null",{maxBuffer:2048e4}).toString().split("ACTIVE:");return t.shift(),t.forEach((t=>{const r=(t="ACTIVE:"+t).split(n.EOL),i=s.getValue(r,"CHAN"),o=s.getValue(r,"FREQ").toLowerCase().replace("mhz","").trim(),a=s.getValue(r,"SECURITY").replace("(","").replace(")",""),l=s.getValue(r,"WPA-FLAGS").replace("(","").replace(")",""),c=s.getValue(r,"RSN-FLAGS").replace("(","").replace(")","");e.push({ssid:s.getValue(r,"SSID"),bssid:s.getValue(r,"BSSID").toLowerCase(),mode:s.getValue(r,"MODE"),channel:i?parseInt(i,10):null,frequency:o?parseInt(o,10):null,signalLevel:p(s.getValue(r,"SIGNAL")),quality:parseFloat(s.getValue(r,"SIGNAL")),security:a&&"none"!==a?a.split(" "):[],wpaFlags:l&&"none"!==l?l.split(" "):[],rsnFlags:c&&"none"!==c?c.split(" "):[]})})),e}catch(e){return[]}}function b(e){const t=[];try{let r=o(`export LC_ALL=C; iwlist ${e} scan 2>&1; unset LC_ALL`).toString().split("        Cell ");return r[0].indexOf("resource busy")>=0?-1:(r.length>1&&(r.shift(),r.forEach((e=>{const r=e.split("\n"),n=s.getValue(r,"channel",":",!0),i=r&&r.length&&r[0].indexOf("Address:")>=0?r[0].split("Address:")[1].trim().toLowerCase():"",o=s.getValue(r,"mode",":",!0),a=s.getValue(r,"frequency",":",!0),l=s.getValue(r,"Quality","=",!0).toLowerCase().split("signal level="),c=l.length>1?s.toInt(l[1]):0,u=c?f(c):0,p=s.getValue(r,"essid",":",!0),d=e.indexOf(" WPA ")>=0,h=e.indexOf("WPA2 ")>=0,m=[];d&&m.push("WPA"),h&&m.push("WPA2");const g=[];let y="";r.forEach((function(e){const t=e.trim().toLowerCase();if(t.indexOf("group cipher")>=0){y&&g.push(y);const e=t.split(":");e.length>1&&(y=e[1].trim().toUpperCase())}if(t.indexOf("pairwise cipher")>=0){const e=t.split(":");e.length>1&&(e[1].indexOf("tkip")?y=y?"TKIP/"+y:"TKIP":e[1].indexOf("ccmp")?y=y?"CCMP/"+y:"CCMP":e[1].indexOf("proprietary")&&(y=y?"PROP/"+y:"PROP"))}if(t.indexOf("authentication suites")>=0){const e=t.split(":");e.length>1&&(e[1].indexOf("802.1x")?y=y?"802.1x/"+y:"802.1x":e[1].indexOf("psk")&&(y=y?"PSK/"+y:"PSK"))}})),y&&g.push(y),t.push({ssid:p,bssid:i,mode:o,channel:n?s.toInt(n):null,frequency:a?s.toInt(a.replace(".","")):null,signalLevel:c,quality:u,security:m,wpaFlags:g,rsnFlags:[]})}))),t)}catch(e){return-1}}r.wifiNetworks=function(e){return new Promise((r=>{t.nextTick((()=>{let t=[];if(l)if(t=v(),0===t.length)try{const n=o("export LC_ALL=C; iwconfig 2>/dev/null; unset LC_ALL").toString().split("\n\n");let i="";if(n.forEach((e=>{-1===e.indexOf("no wireless")&&""!==e.trim()&&(i=e.split(" ")[0])})),i){const n=b(i);-1===n?setTimeout((function(n){const i=b(n);-1!=i&&(t=i),e&&e(t),r(t)}),4e3):(t=n,e&&e(t),r(t))}else e&&e(t),r(t)}catch(n){e&&e(t),r(t)}else e&&e(t),r(t);else if(c){i("/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s -x",{maxBuffer:4096e4},(function(n,i){const o=i.toString();t=function(e){const t=[];return e&&e.forEach((function(e){const r=e.RSSI;let n=[],i=[];e.WPA_IE&&(n.push("WPA"),e.WPA_IE.IE_KEY_WPA_UCIPHERS&&e.WPA_IE.IE_KEY_WPA_UCIPHERS.forEach((function(e){0===e&&-1===i.indexOf("unknown/TKIP")&&i.push("unknown/TKIP"),2===e&&-1===i.indexOf("PSK/TKIP")&&i.push("PSK/TKIP"),4===e&&-1===i.indexOf("PSK/AES")&&i.push("PSK/AES")}))),e.RSN_IE&&(n.push("WPA2"),e.RSN_IE.IE_KEY_RSN_UCIPHERS&&e.RSN_IE.IE_KEY_RSN_UCIPHERS.forEach((function(e){0===e&&-1===i.indexOf("unknown/TKIP")&&i.push("unknown/TKIP"),2===e&&-1===i.indexOf("TKIP/TKIP")&&i.push("TKIP/TKIP"),4===e&&-1===i.indexOf("PSK/AES")&&i.push("PSK/AES")}))),t.push({ssid:e.SSID_STR,bssid:e.BSSID,mode:"",channel:e.CHANNEL,frequency:h(e.CHANNEL),signalLevel:r?parseInt(r,10):null,quality:f(r),security:n,wpaFlags:i,rsnFlags:[]})})),t}(s.plistParser(o)),e&&e(t),r(t)}))}else if(u){let i="netsh wlan show networks mode=Bssid";s.powerShell(i).then((i=>{const o=i.toString("utf8").split(n.EOL+n.EOL+"SSID ");o.shift(),o.forEach((e=>{const r=e.split(n.EOL);if(r&&r.length>=8&&r[0].indexOf(":")>=0){const i=e.split(" BSSID");i.shift(),i.forEach((e=>{const i=e.split(n.EOL),o=i[0].split(":");o.shift();const s=o.join(":").trim().toLowerCase(),a=i[3].split(":").pop().trim(),l=i[1].split(":").pop().trim();t.push({ssid:r[0].split(":").pop().trim(),bssid:s,mode:"",channel:a?parseInt(a,10):null,frequency:h(a),signalLevel:p(l),quality:l?parseInt(l,10):null,security:[r[2].split(":").pop().trim()],wpaFlags:[r[3].split(":").pop().trim()],rsnFlags:[]})}))}})),e&&e(t),r(t)}))}else e&&e(t),r(t)}))}))},r.wifiConnections=function(e){return new Promise((r=>{t.nextTick((()=>{const t=[];if(l){const n=g(),i=v();n.forEach((e=>{const r=y(e.iface),n=function(e){const t=`wpa_cli -i ${e} status 2>&1`;try{const e=o(t).toString().split("\n"),r=s.toInt(s.getValue(e,"freq","="));return{ssid:s.getValue(e,"ssid","="),uuid:s.getValue(e,"uuid","="),security:s.getValue(e,"key_mgmt","="),freq:r,channel:m(r),bssid:s.getValue(e,"bssid","=").toLowerCase()}}catch(e){return{}}}(e.iface),a=r.ssid||n.ssid,l=i.filter((e=>e.ssid===a)),c=function(e){const t=`nmcli -t --show-secrets connection show ${e} 2>/dev/null`;try{const r=o(t).toString().split("\n"),n=s.getValue(r,"802-11-wireless.seen-bssids").toLowerCase();return{ssid:"--"!==e?e:null,uuid:s.getValue(r,"connection.uuid"),type:s.getValue(r,"connection.type"),autoconnect:"yes"===s.getValue(r,"connection.autoconnect"),security:s.getValue(r,"802-11-wireless-security.key-mgmt"),bssid:"--"!==n?n:null}}catch(e){return{}}}(a),u=l&&l.length&&l[0].channel?l[0].channel:n.channel?n.channel:null,p=l&&l.length&&l[0].bssid?l[0].bssid:n.bssid?n.bssid:null;a&&p&&t.push({id:e.id,iface:e.iface,model:r.product,ssid:a,bssid:l&&l.length&&l[0].bssid?l[0].bssid:n.bssid?n.bssid:null,channel:u,frequency:u?h(u):null,type:c.type?c.type:"802.11",security:c.security?c.security:n.security?n.security:null,signalLevel:l&&l.length&&l[0].signalLevel?l[0].signalLevel:null,txRate:null})})),e&&e(t),r(t)}else if(c){let n="system_profiler SPNetworkDataType";i(n,(function(o,a){const l=a.toString().split("\n\n    Wi-Fi:\n\n");if(l.length>1){const o=l[1].split("\n\n")[0].split("\n"),a=s.getValue(o,"BSD Device Name",":",!0),c=s.getValue(o,"hardware",":",!0);n="/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I",i(n,(function(n,i){const l=i.toString().split("\n");if(o.length>10){const e=s.getValue(l,"ssid",":",!0),r=s.getValue(l,"bssid",":",!0),n=s.getValue(l,"link auth",":",!0),i=s.getValue(l,"lastTxRate",":",!0),o=s.getValue(l,"channel",":",!0).split(",")[0],u="802.11",p=s.toInt(s.getValue(l,"agrCtlRSSI",":",!0))-s.toInt(s.getValue(l,"agrCtlNoise",":",!0));(e||r)&&t.push({id:"Wi-Fi",iface:a,model:c,ssid:e,bssid:r,channel:s.toInt(o),frequency:o?h(o):null,type:u,security:n,signalLevel:p,txRate:i})}e&&e(t),r(t)}))}}))}else if(u){let n="netsh wlan show interfaces";s.powerShell(n).then((function(n){const i=n.toString().split("\r\n");for(let e=0;e<i.length;e++)i[e]=i[e].trim();const o=i.join("\r\n").split(":\r\n\r\n");o.shift(),o.forEach((e=>{const r=e.split("\r\n");if(r.length>=5){const e=r[0].indexOf(":")>=0?r[0].split(":")[1].trim():"",n=r[1].indexOf(":")>=0?r[1].split(":")[1].trim():"",i=r[2].indexOf(":")>=0?r[2].split(":")[1].trim():"",o=s.getValue(r,"SSID",":",!0),a=s.getValue(r,"BSSID",":",!0),l=s.getValue(r,"Signal",":",!0),c=s.getValue(r,"Radio type",":",!0)||s.getValue(r,"Type de radio",":",!0)||s.getValue(r,"Funktyp",":",!0)||null,u=s.getValue(r,"authentication",":",!0)||s.getValue(r,"Authentification",":",!0)||s.getValue(r,"Authentifizierung",":",!0)||null,p=s.getValue(r,"Channel",":",!0)||s.getValue(r,"Canal",":",!0)||s.getValue(r,"Kanal",":",!0)||null,f=s.getValue(r,"Transmit rate (mbps)",":",!0)||s.getValue(r,"Transmission (mbit/s)",":",!0)||s.getValue(r,"Empfangsrate (MBit/s)",":",!0)||null;n&&i&&o&&a&&t.push({id:i,iface:e,model:n,ssid:o,bssid:a,channel:s.toInt(p),frequency:p?h(p):null,type:c,security:u,signalLevel:l,txRate:s.toInt(f)||null})}})),e&&e(t),r(t)}))}else e&&e(t),r(t)}))}))},r.wifiInterfaces=function(e){return new Promise((r=>{t.nextTick((()=>{const t=[];if(l){g().forEach((e=>{const r=y(e.iface);t.push({id:e.id,iface:e.iface,model:r.product?r.product:null,vendor:r.vendor?r.vendor:null,mac:e.mac})})),e&&e(t),r(t)}else if(c){i("system_profiler SPNetworkDataType",(function(n,i){const o=i.toString().split("\n\n    Wi-Fi:\n\n");if(o.length>1){const e=o[1].split("\n\n")[0].split("\n"),r=s.getValue(e,"BSD Device Name",":",!0),n=s.getValue(e,"MAC Address",":",!0),i=s.getValue(e,"hardware",":",!0);t.push({id:"Wi-Fi",iface:r,model:i,vendor:"",mac:n})}e&&e(t),r(t)}))}else if(u){let n="netsh wlan show interfaces";s.powerShell(n).then((function(n){const i=n.toString().split("\r\n");for(let e=0;e<i.length;e++)i[e]=i[e].trim();const o=i.join("\r\n").split(":\r\n\r\n");o.shift(),o.forEach((e=>{const r=e.split("\r\n");if(r.length>=5){const e=r[0].indexOf(":")>=0?r[0].split(":")[1].trim():"",n=r[1].indexOf(":")>=0?r[1].split(":")[1].trim():"",i=r[2].indexOf(":")>=0?r[2].split(":")[1].trim():"",o=r[3].indexOf(":")>=0?r[3].split(":"):[];o.shift();const s=o.join(":").trim(),a=function(e){let t="";return(e=e.toLowerCase()).indexOf("intel")>=0?t="Intel":e.indexOf("realtek")>=0?t="Realtek":e.indexOf("qualcom")>=0?t="Qualcom":e.indexOf("broadcom")>=0?t="Broadcom":e.indexOf("cavium")>=0?t="Cavium":e.indexOf("cisco")>=0?t="Cisco":e.indexOf("marvel")>=0?t="Marvel":e.indexOf("zyxel")>=0?t="Zyxel":e.indexOf("melanox")>=0?t="Melanox":e.indexOf("d-link")>=0?t="D-Link":e.indexOf("tp-link")>=0?t="TP-Link":e.indexOf("asus")>=0?t="Asus":e.indexOf("linksys")>=0&&(t="Linksys"),t}(n);e&&n&&i&&s&&t.push({id:i,iface:e,model:n,vendor:a,mac:s})}})),e&&e(t),r(t)}))}else e&&e(t),r(t)}))}))}}).call(this)}).call(this,e("_process"))},{"./util":277,_process:181,child_process:63,os:178}],280:[function(e,t,r){t.exports={name:"systeminformation",version:"5.17.12",description:"Advanced, lightweight system and OS information library",license:"MIT",author:"Sebastian Hildebrandt <hildebrandt@plus-innovations.com> (https://plus-innovations.com)",homepage:"https://systeminformation.io",main:"./lib/index.js",bin:{systeminformation:"lib/cli.js"},types:"./lib/index.d.ts",scripts:{test:"node ./test/test.js"},files:["lib/"],keywords:["system information","sysinfo","monitor","monitoring","os","linux","osx","windows","freebsd","openbsd","netbsd","cpu","cpuload","physical cores","logical cores","processor","cores","threads","socket type","memory","file system","fsstats","diskio","block devices","netstats","network","network interfaces","network connections","network stats","iface","printer","processes","users","internet","battery","docker","docker stats","docker processes","graphics","graphic card","graphic controller","gpu","display","smart","disk layout","usb","audio","bluetooth","wifi","wifinetworks","virtual box","virtualbox","vm","backend","hardware","BIOS","chassis"],repository:{type:"git",url:"https://github.com/sebhildebrandt/systeminformation.git"},funding:{type:"Buy me a coffee",url:"https://www.buymeacoffee.com/systeminfo"},os:["darwin","linux","win32","freebsd","openbsd","netbsd","sunos","android"],engines:{node:">=8.0.0"}}},{}]},{},[6]);